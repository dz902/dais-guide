# å¼ æ° AWS ç®€æ˜æ‰‹å†Œ

## è¯´æ˜

* ä» Open Guide å¾—åˆ°çµæ„Ÿã€‚
* ä»…ä¸ºä¸ªäººçˆ±å¥½æ”¶é›†æ•´ç†ï¼Œä¸ä»£è¡¨ä»»ä½•ç»„ç»‡å’Œå®˜æ–¹æ„è§ï¼Œä¸æ‰¿è¯ºæ­£ç¡®æ€§åŠå¯èƒ½é€ æˆçš„åæœã€‚
* ä½¿ç”¨æ–¹æ³•ï¼šâŒ˜ + F / âŒƒ + Fã€‚

## å›¾ä¾‹

* ğŸ‡¨ğŸ‡³ = å®å¤å’ŒåŒ—äº¬ Regionï¼ˆä¸­å›½å¤§é™† Regionï¼Œä¸‹ç®€ç§°ã€Œä¸­å›½åŒºã€ï¼‰ç›¸å…³
* ğŸšš = åœ¨ CFn / CDK ä¸­çš„æƒ…å†µ
* ğŸš¥ = åœ¨ CLI å·¥å…·ä¸­çš„æƒ…å†µ
* ğŸ‘€ = åœ¨ CloudWatch Metrics ä¸­çš„æƒ…å†µ
* âœ… = å»ºè®®æ‰§è¡Œçš„æ“ä½œ
* ğŸˆ² = ä¸å»ºè®®æ‰§è¡Œçš„æ“ä½œ
* ğŸ’¢ = éœ€è¦æ³¨æ„çš„å‘
* ğŸ’° = ä¼šäº§ç”Ÿé¢å¤–è´¹ç”¨
* ğŸ“ = è€ƒè¯•ä¸­å¸¸è§

## ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºç‰¹æœ‰æƒ…å†µ

_ã€Œéƒ¨åˆ†æƒ…å†µä¹Ÿé€‚ç”¨äº GovCloudã€‚ã€_

> [æœåŠ¡](https://www.amazonaws.cn/en/about-aws/regional-product-services/) | [æ¡ˆä¾‹](https://aws.amazon.com/cn/solutions/case-studies/china/)

### ä½¿ç”¨é™åˆ¶

* __ä»…é™ä¼ä¸šã€‚__ ä¸ªäººç”¨æˆ·æ— æ³•æ³¨å†Œä½¿ç”¨ã€‚
* ğŸ’¢ __å¿…é¡»å¤‡æ¡ˆã€‚__ å®¢æˆ·å¿…é¡»è¿›è¡Œç½‘ç«™ ICP å¤‡æ¡ˆï¼Œæ‰èƒ½å¯ç”¨ Web ç«¯å£ï¼Œå¦åˆ™ä¼šè¿”å› `403`ã€‚

### åŒºåŸŸéš”ç¦»

* __ç½‘ç»œä¸äº’é€šã€‚__ ä¸­å›½åŒºä¸å…¶ä»– Region æ²¡æœ‰äºšé©¬é€Šå®˜æ–¹çš„å…‰çº¤ç›´è”ã€‚
* __è´¦å·ä¸äº’é€šã€‚__ ä¸­å›½å¤§é™† Region ä¸å…¶ä»– Region çš„è´¦å·ä¸å¤„äºåŒä¸€ä½“ç³»ã€‚
* ğŸ’¢ __èµ„æºä¸äº’é€šã€‚__ ARN ä¸­çš„ç¬¬äºŒæ®µç”±ã€Œawsã€æ”¹ä¸ºã€Œaws-cnã€ï¼Œä¸ Global èµ„æºä¸åœ¨ä¸€ä¸ªä½“ç³»ã€‚

### Service Endpoint / Principal å·®å¼‚

* ğŸ’¢ __ä¸­å›½åŒºçš„æœåŠ¡å‘½åä¸ Global å…¶ä»– Region æœ‰äº›è®¸å·®å¼‚ã€‚__ è¯·æŸ¥çœ‹ [AWS Service Endpoints](https://docs.amazonaws.cn/en_us/general/latest/gr/rande.html) æ¥ç¡®å®šå…·ä½“åå­—ã€‚

## å®‰å…¨

### è´£ä»»å…±æ‹…æ¨¡å‹

* __AWS è´Ÿè´£åŸºå»ºè®¾æ–½çš„ç‰©ç†å®‰å…¨ä»¥åŠè´¦å·èµ„æºä¹‹é—´çš„éš”ç¦»ã€‚__ ç”¨æˆ·è´Ÿè´£ä½¿ç”¨å’Œåº”ç”¨å±‚é¢çš„å®‰å…¨ã€‚
* __AWS æ— æ³•è®¿é—®ç”¨æˆ·çš„åº”ç”¨æ•°æ®ã€‚__ ä¹Ÿæ— æ³•ä¸ºç”¨æˆ·é‡ç½® SSH ç™»å½•å¯†ç ã€æ“ä½œç³»ç»Ÿç”¨æˆ·å¯†ç ã€‚

## è´¦å•

* âœ… __æ‰“å¼€ Billing Alertsï¼Œæ‰èƒ½åœ¨ CloudWatch ä¸­çœ‹åˆ° Billing æŒ‡æ ‡ã€‚__ ä¼šæœ‰æå°‘é‡è´¹ç”¨ã€‚
  * __æ— æ³•å…³é—­ã€‚__ æ­¤è®¾ç½®æ‰“å¼€ä¹‹åå°†æ— æ³•å…³é—­ã€‚
  * å¦‚æœåœ¨ Consolidated Billing ä¹‹å‰æœªæ‰“å¼€ï¼Œåˆ™æ— æ³•å†æ“ä½œï¼Œåªæœ‰ä»˜æ¬¾è´¦å·èƒ½ç»Ÿä¸€æ‰“å¼€ã€‚

## Availability Zoneï¼ˆAZï¼‰/ Region

_ã€Œå…¨çƒåŸºå»ºï¼Œé«˜é€Ÿäº’è”ï¼ŒåŒåŸå®¹ç¾ã€‚ã€_

### æ¦‚å†µ

* __AZ æŒ‡è¿‘è·ç¦»ã€åˆ†å¸ƒå¼æ•°æ®ä¸­å¿ƒé›†ç¾¤ã€‚__ ä¸€ä¸ª AZ åŒ…å« 2+ ä¸ªæ•°æ®ä¸­å¿ƒï¼Œæ•°æ®ä¸­å¿ƒä¹‹é—´é‡‡ç”¨é«˜é€Ÿå…‰çº¤ç›´è¿ï¼Œå¦æœ‰å†—ä½™çš„ç½‘ç»œé›†çº¿ä¸­å¿ƒç¡®ä¿ AZ å†…æ•°æ®ä¸­å¿ƒä¹‹é—´çš„é«˜é€Ÿã€ä¸é—´æ–­ç½‘ç»œäº’é€šã€‚
  * ğŸ‡¨ğŸ‡³ ä¸­æ–‡ä¿—ç§°ã€Œå¯ç”¨åŒºã€ã€‚
* __Region æŒ‡å•ä¸ªåŸå¸‚èŒƒå›´å†…çš„ AZ é›†ç¾¤ã€‚__ å¤§éƒ¨åˆ† Region åŒ…å« 3+ ä¸ª AZï¼Œå°‘éƒ¨åˆ†åŒ…å« 2 ä¸ª AZï¼Œæå°‘éƒ¨åˆ†ä»…æœ‰ 1 ä¸ª AZã€‚
  * ğŸ‡¨ğŸ‡³ ä¸­æ–‡ä¿—ç§°ã€ŒåŒºåŸŸã€ï¼Œä½†å®¹æ˜“æ··æ·†ï¼Œæ‰€ä»¥æœ¬æ‰‹å†Œä»ç„¶ä½¿ç”¨ã€ŒRegionã€ã€‚
  * ğŸ‡¨ğŸ‡³ ä¸­å›½å®å¤ Region ä»¥çœå‘½åè€Œä¸æ˜¯åŸå¸‚ã€‚
* __Region å†… AZ ä¹‹é—´è·ç¦»æ•°åå…¬é‡Œã€‚__ å¹¶ä¸”æ°´ã€ç”µã€ç½‘ç»œã€å®‰ä¿å‡ä¸ºå„è‡ªç‹¬ç«‹ï¼Œç¡®ä¿èƒ½åšåˆ°åŒåŸç¾å¤‡ã€‚
* __ç›¸é‚» Region ä¹‹é—´æœ‰äºšé©¬é€Šå®˜æ–¹é“ºè®¾å…‰çº¤ç›´è¿ã€‚__ ç¡®ä¿ä½“ç³»å†…æœ‰è¶³å¤Ÿç½‘é€Ÿå’Œååã€‚
  * ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºé™¤å¤–ã€‚


## IAM

_ã€Œäº‘ä¸Šçš„è®¿é—®æƒé™ç®¡ç†ä½“ç³»ã€‚ã€_

> [æ‰‹å†Œ](https://docs.aws.amazon.com/IAM/latest/UserGuide/introduction.html)

### æ¦‚å†µ

* __Identity-Based Policyï¼ˆIBPï¼‰æ˜¯é™„åœ¨ç”¨æˆ·ã€è§’è‰²èº«ä¸Šçš„è®¿é—®æƒé™ã€‚__ å¦‚æœæ²¡æœ‰ IBP ç”¨æˆ·æ— æ³•è®¿é—®èµ„æºã€‚
* __Resource-Based Policyï¼ˆRBPï¼‰æ˜¯é™„åœ¨èµ„æºèº«ä¸Šçš„è®¿é—®æƒé™ã€‚__ åªæœ‰éƒ¨åˆ†èµ„æºæœ‰ RBPã€‚
* __Policy åŒ…å«å¤šä¸ª Statementã€‚__
  * Statement å¿…é¡»åŒ…å«ï¼šEffectï¼ˆå…è®¸ / æ‹’ç»ï¼‰ã€Actionã€Resourceã€‚
  * Statement å¯é€‰åŒ…å«ï¼šConditionã€‚
  * RBP çš„ Statement è¿˜åŒ…å« Principalï¼ˆè®¿é—®è€…ï¼‰ã€‚å¯ä»¥æ˜¯åˆ«çš„è´¦å·ä¸‹çš„ IAM Userã€‚
* __è´¦æˆ·æœ‰ Master Account å’Œ IAM User ä¸¤ç§ã€‚__ ä¸€ä¸ªç”¨é‚®ä»¶ç™»å½•ï¼Œä¸€ä¸ªè¿˜éœ€è¦è¾“å…¥ Account IDã€‚
  * ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºæ²¡æœ‰ Master Accountï¼Œåªæœ‰ IAM Userã€‚

### Root Account

* __Root Account æ˜¯ AWS è´¦å·ä½“ç³»ä¸‹æœ€é«˜ç®¡ç†è€…è´¦å·ã€‚__ å³æ³¨å†Œæ—¶çš„ç¬¬ä¸€ä¸ªè´¦å·ï¼Œåªéœ€ä½¿ç”¨é‚®ç®±ã€å¯†ç ç™»å½•ï¼Œå…·å¤‡å®Œæ•´æƒé™ã€‚
  * ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºæ²¡æœ‰ Root Account æ¦‚å¿µï¼Œæ‰€æœ‰è´¦å·å‡ä¸º IAM Userï¼Œç™»å½•æ—¶éœ€è¦åŒæ—¶è¾“å…¥ Account ID ä»¥åŠé‚®ç®±ã€å¯†ç ã€‚
  * ğŸ’¢ æ³¨æ„ IAM User æ‹¥æœ‰åˆ é™¤è‡ªå·±çš„æƒé™ï¼Œåˆ é™¤åè¦æ¢å¤éå¸¸éº»çƒ¦ã€‚
  * ğŸˆ² __å¼ºçƒˆå»ºè®®ä¸ä½¿ç”¨ Root Account è¿›è¡Œæ—¥å¸¸æ“ä½œã€‚__

### IAM User / Group

* __å¯ä»¥åˆ›å»ºå¤šä¸ª IAM User å¹¶ç½®å…¥ Group ä¹‹ä¸­ã€‚__ 
  * âœ… åº”è¯¥ä¸ºæ¯ä¸ªèµ„æºä½¿ç”¨è€…åˆ›å»º IAM Userã€‚
  * âœ… åº”å°½é‡é¿å…ä¸ºå•ä¸ª IAM User èµ‹æƒï¼Œè€Œæ˜¯ä¸º Group èµ‹æƒå¹¶å°† IAM User åŠ å…¥ï¼Œæ–¹ä¾¿ç®¡ç†ã€‚
* __IAM User ç™»å½•æ—¶éœ€è¦æä¾› Account ID ä»¥åŠé‚®ç®±ã€å¯†ç ã€‚__
  * ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸“å±ç™»å½•é¡µé¢é“¾æ¥ã€‚

### Role

* __Role å°±æ˜¯å¸¦æƒé™çš„è§’è‰²ã€‚__ å…¶ä»– IAM Userã€AWS æœåŠ¡æˆ–è€…å¤–éƒ¨çš„å·²è®¤è¯ç”¨æˆ·å‡å¯ä»¥æ‹…ä»» Role å¹¶ä¸”è·å¾—ç›¸åº”æƒé™ã€‚
  * ğŸ’¢ __æ‹…ä»» Role æ—¶è®¿é—®è€…åŸæ¥çš„èº«ä»½æ¶ˆå¤±ã€‚__ è¿™åœ¨ A æ¡¶å¤åˆ¶å¯¹è±¡åˆ° B æ¡¶è¿™æ ·çš„åœºæ™¯ä¸‹ä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥é€šå¸¸è·¨èµ„æºæ“ä½œæ—¶ä¼šä½¿ç”¨ RBPã€‚
  * è·¨è´¦å·ä½¿ç”¨ Role æ—¶ï¼Œä¼šå…ˆå°† Role æˆæƒç»™ç›®æ ‡è´¦å·ï¼Œç„¶åç”±ç›®æ ‡è´¦å·å†è‡ªå·±æˆæƒç»™å•ä¸ª IAM Userã€‚
  * æƒé™åç§°ä¸º `sts:AssumeRole`ï¼Œå› ä¸ºæ‹…ä»» Role å®é™…ä¸Šæ˜¯ AWS Simple Token Service å‡ºå…·äº†ä¸€ä¸ªä¸´æ—¶ Token æ¥ç»™è®¿é—®è¯·æ±‚ç­¾åã€‚

### Policy

* ğŸš¥ __ä½¿ç”¨ `simulate-custom-policy` å¯ä»¥æ¨¡æ‹Ÿè¯¥ Policy çš„æ•ˆæœã€‚__ è§ [Link](https://docs.aws.amazon.com/cli/latest/reference/iam/simulate-custom-policy.html)ã€‚

### MFAï¼ˆMulti-Factor Authenticationï¼‰

* âœ… __MFAï¼ˆå¤šå› å­èº«ä»½éªŒè¯ï¼‰è¦æ±‚ç”¨æˆ·åœ¨ç™»å½•æ—¶ä½¿ç”¨é¢å¤–çš„ä¸€æ¬¡æ€§å¯†ç ã€‚__ æ¨èä½¿ç”¨ï¼Œè‡³å°‘åº”è¯¥åœ¨ Root Account æˆ–ç®¡ç†å‘˜è´¦å·ä¸Šå¯ç”¨ã€‚
* __ä¹Ÿå¯ä½¿ç”¨ MFA æ¥ä¿æŠ¤ API è°ƒç”¨ã€‚__
  * ğŸ“ __`AssumeRole` å’Œ [`GetSessionToken`](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_mfa_sample-code.html#MFAProtectedAPI-example-getsessiontoken) å‡å¯[ä¼ é€’ MFA ä¿¡æ¯](https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_mfa_configure-api-require.html)ã€‚__

### æµ‹è¯• Policy

* __ä½¿ç”¨ [`SimulateCustomPolicy`](https://docs.aws.amazon.com/cli/latest/reference/iam/simulate-custom-policy.html) å‘½ä»¤å¯ä»¥æµ‹è¯• Policyã€‚__
* __éœ€è¦æä¾› Context Keysã€‚__ æ¯”å¦‚ IP åœ°å€ã€æ—¥æœŸã€‚
  * ä¸ºåœ¨ `Condition` ä¸­çš„åˆ¤æ–­æ¡ä»¶æä¾›æµ‹è¯•å€¼ã€‚

## S3ï¼ˆSimple Storage Serviceï¼‰

_ã€ŒåŠŸèƒ½ä¸°å¯Œçš„å¯¹è±¡å­˜å‚¨ã€‚ã€_

> [æ‰‹å†Œ](https://docs.aws.amazon.com/AmazonS3/latest/dev/Welcome.html) | [CLI](https://docs.aws.amazon.com/cli/latest/reference/s3/index.html) | [FAQ](https://www.amazonaws.cn/en/s3/faqs/) | [ä»·æ ¼](https://www.amazonaws.cn/en/s3/pricing/)

### æ¦‚å†µ

* __ç¬¬ä¸€ä¸ª AWS æœåŠ¡ã€‚__ 2006 å¹´ 3 æœˆ 14 æ—¥ä¸Šçº¿ã€‚
* __3 AZ å¤šå‰¯æœ¬ã€‚__ 11 ä¸ª 9 çš„æ•°æ®è€ä¹…åº¦ï¼›3 ä¸ª 9 çš„ SLAã€‚
* __äº‹ä»¶è§¦å‘ã€‚__ ä½¿ç”¨ __Events__ æœºåˆ¶å¯ä»¥åœ¨æ–‡ä»¶ä¸Šä¼ ã€æ–‡ä»¶ä¿®æ”¹ç­‰äº‹ä»¶å‘ç”Ÿæ—¶è§¦å‘ __Lambda__ã€‚
* __æ”¯æŒä½¿ç”¨ Service Gateway ä¸èµ°å…¬ç½‘è®¿é—®ã€‚__ Service Gateway ä¸é¢å¤–æ”¶è´¹ï¼Œæ¨èä½¿ç”¨ã€‚
* __æ‰å¹³åŒ–å­˜å‚¨ã€‚__ æ²¡æœ‰æ–‡ä»¶å¤¹çš„æ¦‚å¿µï¼Œä½†æ˜¯å¯¹ç»“å°¾ä¸º `/` çš„æ–‡ä»¶åšäº†ç‰¹æ®Šå¤„ç†ï¼Œå¯ä»¥å½“åšæ–‡ä»¶å¤¹ä½¿ç”¨ã€‚
  * è¿™ç§ `/` ç»“å°¾çš„ç‰¹æ®Šæ–‡ä»¶è¢«ç§°ä½œ Prefixã€‚

### Bucket

* __S3 æ˜¯ Global æœåŠ¡ï¼Œä½† Bucket æœ‰åŒºåŸŸä¹‹åˆ†ã€‚__ åŒºåŸŸé€‰æ‹©ä¼šå½±å“è®¿é—®é€Ÿåº¦ã€‚
  * ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºé™¤å¤–ã€‚ä¸­å›½åŒºçš„ S3 æ— æ³•çœ‹åˆ° Global çš„ Bucketã€‚
* __å¿…é¡»ä½¿ç”¨ Region-specific Endpointï¼ˆ`bucket-name.s3.region-name.amazonaws.com`ï¼‰æ¥è®¿é—®ã€‚
  * å¦‚æœä¸ä½¿ç”¨æ­£ç¡®çš„ Endpointï¼Œ2019 å¹´ 3 æœˆä¹‹å‰å»ºç«‹çš„æ¡¶å°†ä¼šæ”¶åˆ° `307 Permanently Moved` ä»¥åŠæ­£ç¡®çš„ Endpointã€‚
  * 2019 å¹´ 3 æœˆåå»ºç«‹çš„æ¡¶å°†ä¸æ”¯æŒä¸å¸¦ `region-name` çš„ Endpointï¼Œå¹¶ç›´æ¥è¿”å› `400 Bad Request` é”™è¯¯ã€‚
* __ä¸åŒåŒºåŸŸçš„ Bucket å¯ä»¥é€šè¿‡ Cross-Region Replicationï¼ˆCRRï¼‰è‡ªåŠ¨åŒæ­¥ã€‚__  
  * ğŸ‡¨ğŸ‡³ __CRR ä¸æ”¯æŒåŒæ­¥å‡ºã€å…¥ä¸­å›½åŒºã€‚__ ä¸­å›½åŒºçš„ CRR ä»…èƒ½åœ¨ä¸­å›½åŒº Region ä¹‹é—´è¿›è¡Œï¼ŒGlobal Region çš„ CRR æ— æ³•åŒæ­¥è‡³ä¸­å›½åŒºã€‚

### æƒé™

* __æœ‰ Access Control Listï¼ˆACLï¼‰ã€RBP ä¸¤ç§æƒé™æ§åˆ¶ä½“ç³»ã€‚__ âœ… é€šå¸¸ä½¿ç”¨ RBPã€‚
* ğŸˆ² __ACL ä»¥è´¦å·ä¸ºå•ä½æ¥èµ‹äºˆæƒé™ã€‚__ éœ€è¦ä½¿ç”¨ S3 ä¸“ç”¨çš„ Canonical ID æ¥æŒ‡ä»£è´¦å·ï¼Œåœ¨ Bucket çš„ ACL é¡µé¢å¯ä»¥æ‰¾åˆ°ã€‚
  * __ACL é»˜è®¤èµ‹äºˆ Bucket æ‹¥æœ‰è€…å…¨éƒ¨æƒé™ã€‚__ æ‰€ä»¥æ‹¥æœ‰è€…ä¸å†éœ€è¦é¢å¤–è®¾ç½® RBP å³å¯è®¿é—®æ–°å»ºçš„ Bucketã€‚
  * __ACL éœ€è¦åœ¨ Bucket å’Œæ¯ä¸ªæ–‡ä»¶ä¸Šè®¾ç½®ã€‚__ éå¸¸ä¸æ–¹ä¾¿ã€‚
  * __ACL åªæœ‰è¯»ã€å†™ã€è¯»å–æƒé™ã€å†™å…¥æƒé™ã€å®Œå…¨æ§åˆ¶å‡ ç§æƒé™è®¾ç½®ã€‚__ é‡‡ç”¨ XML å½¢å¼å­˜å‚¨ã€‚
  * __ACL ä¹Ÿæ”¯æŒã€Œå·²ç™»å½•ç”¨æˆ·ã€ã€ã€Œæ‰€æœ‰äººã€ä»¥åŠã€Œæ—¥å¿—ç»„ã€å‡ ä¸ªåˆ†ç»„ã€‚__ ä¸å»ºè®®ä½¿ç”¨ã€‚
  * __ACL ä¸­çš„ã€Œæ‰€æœ‰äººã€æŒ‡çš„æ˜¯å…¨ä¸–ç•Œã€‚__ å³å…¨å¤©ä¸‹çš„äººéƒ½å¯ä»¥è®¿é—®ã€‚
* __é Bucket æ‹¥æœ‰è€…éœ€è¦åœ¨æ¡¶ä¸Šè®¾ç½® RBP å¹¶æŒæœ‰å¯¹åº”çš„ IBP æ‰èƒ½è®¿é—®ã€‚__ é™¤éåœ¨ ACL é‡Œé¢ä¸“é—¨å…è®¸ã€‚
* __æœ‰ã€ŒBlock Public Accessã€çš„è®¾ç½®ã€‚__ é’ˆå¯¹ Bucket çš„è®¾ç½®ã€‚
  * âœ… å¼ºçƒˆå»ºè®®æ‰“å¼€ã€‚
  * é˜²æ­¢æ–°ä¸Šä¼ å¯¹è±¡å…¬å¼€è®¿é—®ï¼Œå¼€å¯åä¼šæŠ›å¼ƒæ–°ä¸Šä¼ å¯¹è±¡çš„å…¬å¼€è®¿é—®æƒé™ã€‚
  * é˜²æ­¢æ‰€æœ‰å¯¹è±¡å…¬å¼€è®¿é—®ï¼Œå¼€å¯åä¼šå¿½ç•¥å¯¹è±¡æ‰€é™„ç€çš„å…¬å¼€è®¿é—®æƒé™ã€‚
  * ğŸ’¢ __éœ€è¦ç‰¹åˆ«æ³¨æ„è¯¥é€‰é¡¹ä»…ä¼šé˜»æ­¢å®Œå…¨å…¬å¼€çš„ Bucket Policyã€‚__ ä¸€æ—¦åŠ ä¸Š `Condition` è¯­å¥ï¼Œå³ä¾¿æ˜¯éå¸¸å…¬å¼€çš„æ¡ä»¶è¯­å¥ï¼Œä¹Ÿä¸ä¼šè¢«é˜»æ­¢ã€‚
  * ğŸ’¢ __æ¯”å¦‚ `aws:SourceIp: 52.0.0.0/*` ç­‰æå…¶å®½æ³›çš„ Bucket Policy ä¹Ÿä¸ä¼šè¢«é˜»æ­¢ã€‚__

### å¹¶å‘

* ğŸ’¢ __S3 ä¸æ˜¯ä¸ºå¤§å¹¶å‘è®¾è®¡ã€‚__ æ¯ä¸ª Prefix ä¸‹çš„æ‰€æœ‰æ–‡ä»¶[ä»…æ”¯æŒ 5500 æ¬¡/ç§’çš„ `GET` æ€»å¹¶å‘](https://docs.aws.amazon.com/AmazonS3/latest/dev/optimizing-performance.html)ï¼Œä»¥åŠ 3500 æ¬¡/ç§’çš„ `PUT` å¹¶å‘ã€‚
  * S3 å¯¹ Prefix æ•°é‡æ²¡æœ‰é™åˆ¶ï¼Œæ‰€ä»¥ç†è®ºä¸Šå¹¶å‘æ€»æ•°æ²¡æœ‰é™åˆ¶ã€‚
  * è¶…è¿‡ 5500 æ¬¡/ç§’çš„å¹¶å‘éœ€æ±‚éœ€è¦åœ¨æ¶æ„ä¸Šè¿›è¡Œè°ƒæ•´ï¼Œæˆ–è€…ä½¿ç”¨ CloudFrontã€‚
* ğŸ’¢ __S3 ä¼šé™åˆ¶å• IP å¹¶å‘è¯·æ±‚ã€‚__ å½“å•å¹¶å‘è¯·æ±‚æ•°åˆ°è¾¾ 95 å·¦å³æ—¶ï¼Œä¼šå‡ºç°æµé‡æ§åˆ¶çš„æƒ…å†µã€‚

### Endpoint

* __Global / Local Endpointã€‚__
  * ğŸ‡¨ğŸ‡³ __ä¸­å›½åŒºä¸æ”¯æŒ Global Endpointã€‚__ åœ¨ä¸­å›½åŒºå¿…é¡»ä½¿ç”¨ Regional Endpointï¼Œå¦åˆ™ä¼šè¿”å› `404`ã€‚

### S3 Events

* __åœ¨ä¸Šä¼ ã€ä¿®æ”¹ç­‰äº‹ä»¶æ—¶è§¦å‘ Lambdaã€‚__
  * ğŸ’¢ __ä¸ç¡®ä¿åŠæ—¶ã€å‡†ç¡®æ€§ã€‚__ å³å¯èƒ½ä¼šæœ‰ 1 åˆ†é’Ÿä»¥ä¸Šçš„å»¶æ—¶ï¼Œå¯èƒ½ä¼šæœ‰é‡å¤çš„äº‹ä»¶ï¼Œå¯èƒ½ä¼šæ¼å‘äº‹ä»¶ã€‚ï¼ˆè§ [Link](http://www.hydrogen18.com/blog/aws-s3-event-notifications-probably-once.html?ck_subscriber_id=527212891)ï¼‰
  * ğŸˆ² __ä¸æ¨èç”¨æ¥å¤„ç†æœ‰å¼ºä¸€è‡´æ€§éœ€æ±‚çš„ä»»åŠ¡ã€‚__ âœ… å¯ä»¥ç”¨äºåšä¸€äº›ç®€å•çš„ç»Ÿè®¡ï¼Œç‰¹åˆ«æ˜¯å¯è€å—å°‘é‡ä¿¡æ¯å†—ä½™ã€ç¼ºå¤±çš„ã€‚

### S3 Select

* __ç›´æ¥å¯¹ S3 ä¸Šå­˜å‚¨çš„åŠç»“æ„åŒ–æ•°æ®è¿›è¡Œè§†å›¾è¿‡æ»¤ã€‚__ åŸºäº PartiQL è¯­è¨€ã€‚

### Batch Operations

> [æ‰‹å†Œ](https://docs.aws.amazon.com/AmazonS3/latest/dev/batch-ops-basics.html)

* __ä½¿ç”¨ Inventory æ¥[åˆ›å»ºæ¡¶å†…å¯¹è±¡åˆ—è¡¨å¿«ç…§](https://docs.aws.amazon.com/AmazonS3/latest/dev/storage-inventory.html)ã€‚__ å¯é€‰æ‹©åŒ…å«æ–‡ä»¶å°ºå¯¸ã€ä¿®æ”¹æ—¶é—´ç­‰ã€‚
  * å¯å¯¼å‡ºä¸º CSV / Parque / ORC ç­‰æ ¼å¼ã€‚
  * å¯ä»¥æ–¹ä¾¿åœ°åœ¨ Amazon Athena ä¸­æŸ¥è¯¢ã€‚
* __ä½¿ç”¨å¯¹è±¡åˆ—è¡¨ä½œä¸ºè¾“å…¥æ¥æ‰§è¡Œæ‰¹é‡æ“ä½œã€‚__

### ä¸Šä¼ 

* __ä½¿ç”¨ `PUT` å¯ä¸Šä¼ æœ€å¤§ 5GB çš„æ–‡ä»¶ã€‚__ ä½¿ç”¨ Multipart Upload å¯ä¸Šä¼ æœ€å¤§ 5TB çš„æ–‡ä»¶ã€‚
* __Multipart Upload æ”¯æŒæ–‡ä»¶å—ä¸²è¡Œã€å¹¶è¡Œä¸Šä¼ ã€‚__ âœ… ç½‘ç»œä¸å¥½æ—¶å¯ä»¥é™ä½ä¸Šä¼ å¤±è´¥é£é™©ï¼Œç½‘ç»œå¥½æ—¶å¯ä»¥æœ€å¤§é™åº¦åˆ©ç”¨å¸¦å®½ã€‚
* ğŸ’¢ __å°šæœªå®Œæˆçš„ Multipart Upload æ–‡ä»¶å—ä¸ä¼šè‡ªåŠ¨åˆ é™¤ï¼Œä½†æ˜¯ä¼šå ç”¨ç©ºé—´å¹¶äº§ç”Ÿè´¹ç”¨ã€‚__ å¯ä½¿ç”¨ Bucket Lifecycle Policy åˆ é™¤ä¸€å®šå¤©æ•°åä»æœªå®Œæˆçš„æ–‡ä»¶å—ï¼Œè§ [Link](https://docs.aws.amazon.com/AmazonS3/latest/dev/mpuoverview.html#mpuploadpricing)ã€‚

### æ•°æ®æ¹–

* __æ•°æ®æ¹–æ ¸å¿ƒã€‚__ S3 æ˜¯ AWS æ•°æ®æ¹–çš„æ ¸å¿ƒå­˜å‚¨æœºåˆ¶ï¼Œä¹Ÿæ˜¯æ•°æ®æ¹–çš„ã€Œæ¹–ã€æœ¬ä½“ï¼Œå¤§éƒ¨åˆ†åˆ†æç±»æœåŠ¡çš„æŒä¹…åŒ–å­˜å‚¨ç”± S3 æä¾›ã€‚

### S3 Analytics

* __å¯ä½¿ç”¨ S3 Analytics åˆ†ææ¡¶å†…å¯¹è±¡å­˜å‚¨çš„è§„å¾‹ã€‚__ ç‰¹åˆ«æ˜¯ä¸å¸¸è®¿é—®çš„å¯¹è±¡ã€‚

### é™åˆ¶

* æ¯ä¸ª Prefix [3500 å†™ / 5500 è¯»](https://docs.aws.amazon.com/AmazonS3/latest/dev/optimizing-performance.html)ã€‚

### è¸©å‘

* ğŸšš __RegionalDomainNameã€‚__ åœ¨ CFn ä¸­åˆ›å»º Bucket ä¹‹åå¦‚æœè¯»å– `DomainName` å±æ€§ä¼šè¿”å› Global Endpointï¼Œéœ€è¦æ”¹ç”¨ `RegionalDomainName`ã€‚
* ğŸš¥ __æ— æ³•ä» CLI è·å¾— ARNã€‚__ S3 çš„ CLI æ²¡æœ‰æä¾›ä»»ä½•è·å¾— ARN çš„æ–¹æ³•ï¼Œç”¨æˆ·åªèƒ½ä» Console å¤åˆ¶ï¼Œæˆ–è€…è‡ªå·±ç»„æˆ ARNï¼Œéœ€è€ƒè™‘ä¸­å›½åŒºæˆ– GovCloud çš„åç§°å·®å¼‚é—®é¢˜ã€‚
* ğŸ‘€ __`BucketSizeBytes` å’Œ `NumberOfObject` çš„æ•°å­—åŒ…æ‹¬æ‰€æœ‰ç‰ˆæœ¬ä»¥åŠæš‚æ—¶æœªå®Œæˆçš„ Multipart Upload æ–‡ä»¶å—ã€‚__ å³è¿™äº› CloudWatch Metrics ä½“ç°çš„æ•°å­—ä¼šå¤§äº S3 Console ä¸­ä½“ç°çš„æ•°å­—ï¼Œè§ [Link](https://docs.aws.amazon.com/AmazonS3/latest/dev/cloudwatch-monitoring.html)ã€‚
* __`PUT` æ“ä½œæ—¢ç”¨äºä¸Šä¼ æ–‡ä»¶ï¼Œåˆç”¨äºä¿®æ”¹ç°æœ‰æ–‡ä»¶çš„å±æ€§ã€‚__ è§ [Link](https://docs.aws.amazon.com/cli/latest/reference/s3api/put-object.html)ã€‚


## Storage Gateway

_ã€ŒåŸºäº S3 çš„æœ¬åœ°å­˜å‚¨å¤‡ä»½å»¶å±•æœºåˆ¶ã€‚ã€_

* __å°†æœ¬åœ°æ•°æ®å¤‡ä»½ã€å»¶å±•è‡³ S3ã€‚__
* __é€šè¿‡åœ¨æœ¬åœ°å®‰è£… VMï¼Œæˆ–ä½¿ç”¨ç¡¬ä»¶æ¥å®ç° Gateway åŠŸèƒ½ã€‚__

### ä¸‰ç§ç•Œé¢

* __File Gatewayã€‚__ å°† S3 æŒ‚è½½æˆ NAS ç›˜ã€‚
  * é€šè¿‡ NFS æˆ– SMB æ¥è®¿é—® S3 ä¸Šçš„æ–‡ä»¶ã€‚
  * å­˜å‚¨çš„æ–‡ä»¶å¯ä»¥ç›´æ¥åœ¨ S3 ä¸Šè®¿é—®ã€‚
* __Volume Gatewayã€‚__ å°† S3 æŒ‚è½½æˆ SAN ç›˜ã€‚
  * é€šè¿‡ iSCSI åè®®ã€‚
* __Tape Gatewayã€‚__ å°† Glacier æŒ‚è½½æˆ SAN ç›˜ã€‚

### Stored vs. Cached Volume

* __Volume Gateway å‡ä¼šåœ¨ S3 ä¸Šå­˜å‚¨å…¨é‡æ•°æ®ã€‚__
* __Volume Gateway å‡å¯ä»¥å¯ä»¥å®šæœŸç”Ÿæˆ EBS å¿«ç…§ã€‚__
* __Stored Volume å°†æ‰€æœ‰æ–‡ä»¶å­˜åœ¨æœ¬åœ°ã€‚__ ä¸»è¦ç”¨äºå¤‡ä»½æœ¬åœ°æ•°æ®åˆ° S3ã€‚
* __Cached Volume å°†å¸¸ç”¨æ–‡ä»¶å­˜åœ¨æœ¬åœ°ã€‚__ ä¸»è¦ç”¨äºä¸ºæœ¬åœ°æä¾›ä½å»¶è¿Ÿæ•°æ®è®¿é—®ã€‚
* __Volume ä¸ŠæŒ‚è½½çš„æœ¬åœ°ç£ç›˜åˆ†ä¸ºä¸åŒåŠŸèƒ½ã€‚__
  * __Cache Storage ç£ç›˜ç”¨äºå­˜å‚¨å¸¸ç”¨æ–‡ä»¶ä»¥åŠä¸Šä¼ ä¸­çš„æ–‡ä»¶çš„å‰¯æœ¬ã€‚__ Stored Volume ä¼šå­˜å‚¨æ‰€æœ‰æ–‡ä»¶åœ¨æœ¬åœ°ï¼Œæ‰€ä»¥æ²¡æœ‰ Cache Storageã€‚
  * __Upload Buffer ç£ç›˜ç”¨äºå­˜å‚¨ä¸Šä¼ ä¸­çš„æ–‡ä»¶ã€‚__


## Athena

_ã€ŒServerless ç‰ˆçš„ Hiveã€‚ã€_

* ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºæš‚æ—¶ä¸æ”¯æŒã€‚
* ğŸ’¢ __[ä»…æ”¯æŒ `EXTERNAL` è¡¨](https://docs.aws.amazon.com/athena/latest/ug/creating-tables.html)ã€‚__ ä¸”æ•°æ®éœ€å­˜å‚¨åœ¨ S3ã€‚

## EC2ï¼ˆElastic Cloud Computeï¼‰

_ã€Œäº‘ä¸Šè™šæ‹Ÿæœºã€‚ã€_

### æ€»è§ˆ

* âœ… __é»˜è®¤ä½¿ç”¨ SSH å¹¶ä»¥ Key Pairs éªŒè¯ã€‚__ ğŸˆ² è‹¥è¦å¯†ç ç™»å½•è™šæ‹Ÿæœºï¼Œéœ€è¦è¿›è¡Œé¢å¤–çš„æ“ä½œã€‚

### è´­ä¹°æ–¹å¼

* __On-Demandï¼ˆODï¼‰ï¼ŒæŒ‰éœ€ã€‚__
  * __æ”¶è´¹ç²¾ç¡®åˆ°ç§’ã€‚__ ã€ŒStopã€ä¹‹åå°±ä¸æ”¶æ—¶é—´è´¹ç”¨ã€‚
* __Reserved Instanceï¼ˆRIï¼‰ï¼Œé¢„ç•™ã€‚__
  * __Zonal RIã€‚__
  * __Regional RIã€‚__
* __Spot Instanceï¼Œé—²ç½®ã€‚__

### ç§Ÿæˆ·ç±»å‹

* __Standardï¼Œå…±äº«å‹ã€‚__
* __Dedicatedï¼Œç‹¬å å‹ã€‚__

### å®ä¾‹ç±»å‹

* __åç§°æ ¼å¼ï¼šï¼ˆä¸»ç±»å‹ï¼‰ï¼ˆä»£ï¼‰.ï¼ˆç‰¹æ®Šæœºèƒ½ï¼‰ã€‚__
* __ä¸»ç±»å‹ã€‚__
  * __M = Most Workloadsï¼Œé€šç”¨å‹ã€‚__
  * __T = Turboï¼Œå¯è¶…é¢‘ã€‚__
  * __C = Computeï¼Œé«˜ç®—åŠ›ã€‚__
  * __R = RAMï¼Œå¤§å†…å­˜ã€‚__
  * __G / P = GPUï¼Œå¤§æ˜¾å¡ã€‚__
  * __I__
  * F
  * X
* __ç‰¹æ®Šæœºèƒ½ã€‚__
  * __n = Networking Enhancedï¼Œç½‘ç»œåŠ å¼ºã€‚__
  * __AMDã€‚__
  * __metal = Bare Metalã€‚__

### Nitro

* __Nitro æ˜¯ AWS è‡ªç ”è™šæ‹Ÿæœºç¡¬ä»¶è½½ä½“å¡ã€‚__
  * __èŠ¯ç‰‡è§£å†³æ–¹æ¡ˆç”± A å…¬å¸æä¾›ï¼Œå·²è¢«äºšé©¬é€Šæ”¶è´­ã€‚__
* __Nitro æ‰¿æ‹…äº†ç½‘ç»œç¼–ç ä¼ è¾“ã€è¯»å†™ã€åŠ è§£å¯†ç­‰å·¥ä½œã€‚__ è™šæ‹Ÿæœºå¯ä»¥ä½¿ç”¨åˆ°æ›´å®Œæ•´çš„ç®—åŠ›ã€‚

### Windows

* __ç®¡ç†å‘˜è´¦å·è·Ÿ Windows é»˜è®¤è¯­è¨€æœ‰å…³ã€‚__ æ¯”å¦‚ï¼Œå¯èƒ½æ˜¯ `Adminstrator`ï¼Œä¹Ÿå¯èƒ½æ˜¯ `Adminstrateur`ã€‚
* __éœ€è¦ä» Console è·å–é»˜è®¤ç®¡ç†å‘˜å¯†ç ã€‚__ é’ˆå¯¹ Windows å®ä¾‹ï¼Œé€‰æ‹©ã€ŒActions > Get Windows Passwordã€ï¼Œéœ€è¦æä¾› SSH Private Keyã€‚
  * âœ… å»ºè®®é¦–æ¬¡ç™»å½•åä½¿ç”¨ Ctrl + Alt + Delete ä¿®æ”¹é»˜è®¤å¯†ç ã€‚
  * ğŸ’¢ åœ¨ OS X ä¸Šè¯·æŒ‰ Fn + Ctrl + Option + Deleteã€‚
* ğŸ“ __EC2Rescue æ˜¯ä¸€ä¸ª Instance è¯Šæ–­å·¥å…·ã€‚__ å¯ä»¥[ç¦»çº¿è¯Šæ–­ Windows å®ä¾‹](https://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/ec2rw-gui.html)ã€‚
  * æ–¹æ³•æ˜¯åœ¨å¦ä¸€å°è¯Šæ–­å®ä¾‹ä¸Šå®‰è£… EC2Rescueï¼ŒæŠŠæ— å“åº”/æ— æ³•è¿æ¥çš„ Windows å®ä¾‹çš„ç›˜æŒ‚è½½åˆ°è¯Šæ–­å®ä¾‹ä¸Šï¼Œè¿è¡Œè¯¥å·¥å…·ã€‚
  * ä¹Ÿæœ‰ Linux ç‰ˆæœ¬ä½†æ˜¯åŠŸèƒ½è¾ƒå¼±ã€‚

### SSH

* __SSH å¡æ­»æ—¶è¯·ä½¿ç”¨ `~` å¤§æ³•ã€‚__ å…ˆæŒ‰ `Enter`ï¼Œç„¶åæŒ‰ `~`ï¼Œç„¶åæŒ‰ `.`ï¼Œå³å¯å¼ºåˆ¶ç»ˆæ­¢ SSHã€‚
* __ä¸åŒç³»ç»Ÿçš„é»˜è®¤ SSH ç”¨æˆ·åä¸åŒã€‚__ Amazon Linux ç³»åˆ—æ˜¯ `ec2-user`ï¼ŒCentOS æ˜¯ `centos`ï¼Œä¹Ÿæœ‰ä¸€äº›æ˜¯ `root`ã€‚

### Instance Metadata

* __åœ¨å®ä¾‹ä¸Šé€šè¿‡ `http://169.254.169.254/latest/meta-data/` å¯ä»¥è·å¾— Instance Metadataã€‚__ åŒ…æ‹¬ AMI-IDã€IP åœ°å€ã€MAC åœ°å€ç­‰ç­‰ã€‚
  * æ­¤é¡¹åŠŸèƒ½ç”± EC2 æä¾›ï¼Œæ— è®ºå®ä¾‹ä¸Šè¿è¡Œçš„æ˜¯å“ªç§ç³»ç»Ÿéƒ½å¯ä»¥è·å–ã€‚

### EC2 Instance Connect

* __å®‰è£… `ec2-instance-connect` åŒ…ä¹‹åæ”¯æŒé’ˆå¯¹åˆ¶å®šç”¨æˆ·ä¸Šä¼ ä¸´æ—¶å…¬é’¥è¿›è¡Œç™»å½•ã€‚__ 60 ç§’å†…æœ‰æ•ˆã€‚
  * è¯¥åŒ…ä¼šä¿®æ”¹ sshd daemon å¹¶åœ¨ç”¨æˆ·è¿œç¨‹ç™»å½•æ—¶ä»¥ instance metadata é‡Œé¢çš„ä¸´æ—¶å…¬é’¥æ¥åšéªŒè¯ã€‚
  * EC2 Instance Connect æœåŠ¡åœ¨ instance metadata ä¸­å½•å…¥ä¸´æ—¶å…¬é’¥å¹¶åœ¨ 60 ç§’ååˆ é™¤ã€‚
  * ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºæš‚æ—¶æ²¡æœ‰ EC2 Instance Connect æœåŠ¡æ‰€ä»¥æ­¤é¡¹åŠŸèƒ½æ— æ³•ä½¿ç”¨ã€‚
  * ğŸ’¢ __Amazon Linux 2 é»˜è®¤å®‰è£…å¹¶å¼€å¯ `ec2-instance-connect`ã€‚__
  * __Ubuntu ä¹Ÿæ”¯æŒå®‰è£…ã€‚__ å…¶ä½™ç³»ç»Ÿä¸æ”¯æŒã€‚

### RIï¼ˆReserved Instanceï¼‰

* __RI æ˜¯ä¸€ä¸ªè´¦å•æœºåˆ¶ä¸æ˜¯äº§å“æœºåˆ¶ã€‚__ æ‰€ä»¥æ— æ³•åœ¨äº§å“ä¸­çœ‹åˆ°æŸä¸ª EC2 æ˜¯å¦ä½¿ç”¨äº† RIã€‚
  * å¯ä»¥åœ¨ Cost Explorer ä¸­[æŸ¥çœ‹ä½¿ç”¨æƒ…å†µç»Ÿè®¡](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/usage-reports.html)ã€‚ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºæš‚æ—¶æ²¡æœ‰ã€‚
  * ä¹Ÿå¯ä»¥åœ¨è´¦å•ä¸­æŸ¥çœ‹ RI å°æ—¶æ•°å’Œé RI å°æ—¶æ•°ã€‚


## Auto Scaling

__ã€ŒEC2 çš„å¼¹æ€§ä¼¸ç¼©ã€‚ã€__

* __å¼¹æ€§ä¼¸ç¼©ç›®æ ‡ç»„å«åš Auto Scaling Groupï¼ˆASGï¼‰ã€‚__

### Scale In

* __[ç¼©å®¹æ—¶ç»ˆæ­¢æœºå™¨çš„ä¼˜å…ˆçº§](https://docs.aws.amazon.com/autoscaling/ec2/userguide/as-instance-termination.html#default-termination-policy)ï¼šæ— ä¿æŠ¤çš„ > å®ä¾‹æ•°é‡å¤šçš„ AZ çš„ > æ»¡è¶³æœºå‹é…æ¯”çš„ > Launch Template æœ€è€çš„ > éš”ä¸‹ä¸€ä¸ªè®°è´¦å°æ—¶æœ€è¿‘çš„ > éšæœºã€‚__ 
  * æŒ‰ä¸Šè¿°é¡ºåºæ£€æŸ¥ï¼Œç›´åˆ°æœ€åå‰© 1 å°è™šæœºï¼Œå…³é—­å®ƒï¼Œå†é‡å¤æ­¤æµç¨‹ç›´åˆ°ç¼©å®¹å®Œæ¯•ã€‚
  * è¯¥ä¼˜å…ˆçº§ä»…é’ˆå¯¹ç¼©å®¹æ—¶ç»ˆæ­¢æœºå™¨ï¼Œå¦‚æœåœ¨ä¸éœ€è¦ç¼©å®¹æ—¶ä¿®æ”¹ Launch Configuration æˆ–è€… Launch Templateï¼Œ[ä¸ä¼šè‡ªåŠ¨ç»ˆæ­¢å¹¶æ–°å¼€æœºå™¨](https://docs.aws.amazon.com/autoscaling/ec2/userguide/change-launch-config.html)ã€‚

### Lifecycle Events

* __[ç”Ÿå‘½å‘¨æœŸ](https://docs.aws.amazon.com/autoscaling/ec2/userguide/AutoScalingGroupLifecycle.html)ï¼šPending > InService / Standby > Terminating > Terminatedã€‚__
  * __Detached = æ‹¿å‡º ASGã€‚__ å¯ä»¥åŠ å…¥å…¶å®ƒ ASGã€‚
  * __[StandBy](https://docs.aws.amazon.com/autoscaling/ec2/userguide/as-enter-exit-standby.html) = ä»ç„¶åœ¨ ASG å†…ä½†æ˜¯ä¸æä¾›æœåŠ¡ï¼Œæ–¹ä¾¿ä¸´æ—¶è°ƒè¯•ç„¶åé‡æ–°ä¸Šçº¿ã€‚__ ä¹Ÿä¼š[ä» ELB ä¸­ç§»é™¤](https://amazonaws-china.com/blogs/aws/auto-scaling-update-lifecycle-standby-detach/)ã€‚

### Scaling Suspension

* __Auto Scaling çš„å¼¹æ€§åŠŸèƒ½æ˜¯æŒ‰ç…§ã€Œè¿›ç¨‹ã€æ¥ç®¡ç†ã€‚__ å¯ä»¥[æš‚åœæŸäº›è¿›ç¨‹æ¥è°ƒæ•´å¼¹æ€§åŠŸèƒ½](https://docs.aws.amazon.com/autoscaling/ec2/userguide/as-suspend-resume-processes.html)ã€‚
* __æ ¸å¿ƒè¿›ç¨‹æ˜¯ `Launch` å’Œ `Terminate`ã€‚__ æš‚åœå‰è€…åˆ™ä¸èƒ½æ‰©å®¹ï¼Œæš‚åœåè€…ä¸èƒ½ç¼©å®¹ã€‚
  * `AddToLoadBalancer` = åˆ›å»ºä½†ä¸åŠ å…¥ ASGã€‚
  * `AZRebalance` = é€šè¿‡ `Launch` å’Œ `Terminate` è®©ä¸åŒ AZ ä¸­çš„å®ä¾‹æ•°é‡å°½é‡å‡ç­‰ã€‚
  * `HealthCheck` = æ ‡è®°å®ä¾‹ä¸º Unhealthy çŠ¶æ€ã€‚

### Health Check

* __è®¾ç½® Grace Period æ¥å®‰è£…åº”ç”¨ã€‚__ å¥åº·æ£€æŸ¥ä¼šåœ¨ Grace Period ä¹‹åå†æ‰§è¡Œã€‚
  * __ä¹Ÿå¯ä»¥ä½¿ç”¨ Lifecycle Hook æ¥æš‚ç¼“å®ä¾‹è¿›å…¥ InService çŠ¶æ€ã€‚__
* __å¦‚æœæ£€æŸ¥ç»“æœä¸º Unhealthy åˆ™ä¼šç«‹å³å¯åŠ¨æ›¿æ¢æµç¨‹ã€‚__
* __å¯ä»¥ä½¿ç”¨ `set-instance-health` æ¥æ‰‹åŠ¨è®¾ç½®å¥åº·çŠ¶æ€ã€‚__
  * __ä»…é€‚ç”¨äºå·²ç»æš‚åœç¼©å®¹çš„ Auto Scaling ç»„ï¼Œå› ä¸ºè‡ªåŠ¨ç¼©å®¹æ˜¯ç¬é—´å‘ç”Ÿï¼Œé€šå¸¸æ— æ³•æ¥å¾—åŠæ‰‹åŠ¨è®¾ç½®ã€‚__

### Launch Configuration / Launch Template

* __äºŒè€…ç±»ä¼¼ï¼Œéƒ½æ˜¯å¯åŠ¨ EC2 å®ä¾‹æ—¶çš„é…ç½®ã€‚__ æ–¹ä¾¿ Auto Scaling è‡ªåŠ¨å¼€æœºå™¨ä»¥åŠå¤ç”¨ã€‚
* __Template æ”¯æŒç‰ˆæœ¬ï¼Œæ”¯æŒé»˜è®¤å‚æ•°å’Œä¼ å…¥å‚æ•°ã€‚__ å¹¶ä¸”å¯ä»¥åœ¨ Auto Scaling ä¸­é€‰æ‹©ä½¿ç”¨é»˜è®¤ç‰ˆæœ¬ã€æœ€æ–°ç‰ˆæœ¬æˆ–è€…ç‰¹å®šç‰ˆæœ¬çš„ Templateã€‚

## EBSï¼ˆElastic Block Storageï¼‰

_ã€Œå—å­˜å‚¨æœåŠ¡ã€‚ã€_

* __æ”¯æŒåœ¨çº¿æ‰©å®¹ã€‚__ ä¸èƒ½ç¼©å®¹ã€‚

### å®‰å…¨

* âœ… __æ”¯æŒå…¨ç›˜åŠ å¯†ã€‚__ ä¸å½±å“ I/O æ€§èƒ½ã€‚
  * ä¿¡å°åŠ å¯†ç”± KMS æä¾›ã€‚
  * ä»…èƒ½åœ¨åˆ›å»ºæ—¶é€‰æ‹©æ˜¯å¦åŠ å¯†ï¼Œåˆ›å»ºåæ— æ³•ä¿®æ”¹ã€‚
  * å¦‚éœ€åŠ å¯†éœ€åˆ›å»ºå¤‡ä»½ç„¶åæ¢å¤åˆ°æ–°çš„ã€å¼€å¯åŠ å¯†çš„å·ã€‚

### å¤‡ä»½

* __ä¸æä¾›å®šæœŸå¤‡ä»½æœºåˆ¶ï¼Œéœ€è¦æ‰‹åŠ¨å¤‡ä»½ã€‚__ æˆ–ä½¿ç”¨è„šæœ¬ã€‚
* __å¤‡ä»½å¿«ç…§åŸºäºç”¨é‡ã€‚__ å¿«ç…§çš„å°ºå¯¸ç­‰äºå®é™…æ•°æ®ä½¿ç”¨é‡ã€‚
* __å¤‡ä»½ä¸ºå¢é‡ã€‚__ å¯¹å·è¿›è¡Œé¦–æ¬¡å¿«ç…§åï¼Œåç»­æ–°å¢å¿«ç…§ä»…ä¼šå­˜å‚¨å˜åŠ¨çš„éƒ¨åˆ†ã€‚
* __åŸç›˜å¼€å¯åŠ å¯†æ—¶ï¼Œå¤‡ä»½å³å¼€å¯åŠ å¯†ã€‚__ åä¹‹äº¦ç„¶ã€‚
  * åŠ å¯†è®¾ç½®ä¸å¯ä¿®æ”¹ã€‚
  * å¯ä»¥å¤åˆ¶å¤‡ä»½ï¼ŒåŒæ—¶å¼€å¯åŠ å¯†ã€‚
* __æ¢å¤å¤‡ä»½æ—¶å¯é€‰æ‹©æ–°ç›˜æ˜¯å¦åŠ å¯†ã€‚__

### è¸©å‘

* __`growpart` åœ¨ CentOS ä¸Šå¯èƒ½æ‰§è¡ŒæˆåŠŸä½†æ˜¯ä»ç„¶æŠ¥é”™ã€‚__ ç”¨æˆ·å¯å°è¯•ç›´æ¥é‡å¯æœºå™¨å†çœ‹æ•ˆæœã€‚
* __`st1` å’Œ `sc1` [ä¸èƒ½ç”¨ä½œå¯åŠ¨ç›˜](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EBSVolumeTypes.html)ã€‚__

## EFSï¼ˆElastic File Systemï¼‰

_ã€Œæ‰˜ç®¡çš„ NASã€‚ã€_

> [FAQ](https://amazonaws-china.com/efs/faq/)

### å®¹é‡

* __æ— éœ€è®¾ç½®å®¹é‡ï¼Œè‡ªåŠ¨æ‰©å®¹ç¼©å®¹ã€‚__
* __å¯å­˜å‚¨ PB çº§çš„æ•°æ®ã€‚__

### è¿æ¥

* __æ”¯æŒæ•°åƒå®¢æˆ·ç«¯åŒæ—¶è¿æ¥ã€‚__
* __éœ€è¦åœ¨ VPC ä¸­ä½¿ç”¨ Endpoint æ¥è¿æ¥ EFSã€‚__ å¯ä½¿ç”¨å®‰å…¨ç»„æ¥æ§åˆ¶å¯¹ Endpoint çš„è®¿é—®ã€‚
  * __é€šè¿‡ VPC Peering å¯ä»¥æ”¯æŒ[è·¨ VPC çš„è®¿é—®](https://docs.aws.amazon.com/efs/latest/ug/manage-fs-access-vpc-peering.html)ã€‚

### Performance Modes

* __General Purpose é€‚åˆ[éœ€è¦ä½å»¶è¿Ÿçš„åœºæ™¯](https://docs.aws.amazon.com/efs/latest/ug/performance.html)ã€‚__ ååç›¸å¯¹ä½ã€‚
* __Max I/O é€‚åˆååè¦æ±‚é«˜çš„åœºæ™¯ã€‚__ ååç›¸å¯¹é«˜ã€‚

### Throughout Modes

* __Bursting Throughputï¼Œååæ ¹æ®æ–‡ä»¶ç³»ç»Ÿå°ºå¯¸æ¥å¢å‡ã€‚__
  * ä½¿ç”¨ Burst Credits æ¥å®ç°çªå¢è®¿é—®ã€‚å¯çªå¢æ—¶é—´ä¸æ–‡ä»¶ç³»ç»Ÿå°ºå¯¸æœ‰å…³ã€‚
* __Provisioned Throughputï¼Œç›´æ¥é¢„ç½®ååé‡ã€‚__

## ELBï¼ˆElastic Load Balancingï¼‰

_ã€Œæ‰˜ç®¡çš„ 4/7 å±‚è´Ÿè½½å‡è¡¡å™¨ã€‚ã€_

### ALBï¼ˆApplication Load Balancerï¼‰

* __OSI 7 å±‚è´Ÿè½½å‡è¡¡ã€‚__ ç±»ä¼¼ Nginxã€‚
  * __æ”¯æŒæŒ‰ Host è½¬å‘ã€‚__ éœ€è¦å…ˆåˆ›å»º ALB å†è®¾ç½®è½¬å‘è§„åˆ™ã€‚
  * __æ”¯æŒèº«ä»½éªŒè¯ã€‚__ åœ¨è½¬å‘è§„åˆ™ä¸­è®¾ç½®ã€‚ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºä¸æ”¯æŒã€‚
* __å®é™…ä¸Šæ˜¯å¼¹æ€§é›†ç¾¤ã€‚__ ä¸€ä¸ª ALB å¯¹åº”å¤šä¸ªèŠ‚ç‚¹ï¼Œè‡ªåŠ¨ä¼¸ç¼©ï¼Œé€šè¿‡ DNS è®°å½•æ¥æŒ‡å‘ä¸åŒèŠ‚ç‚¹ã€‚
* âœ… __å¯ä»¥è®°å½•è®¿é—®æ—¥å¿—åˆ° S3ã€‚__ ğŸ’° ä¼šäº§ç”Ÿè´¹ç”¨ã€‚

### NLBï¼ˆNetwork Load Balancerï¼‰

* __OSI 4 å±‚è´Ÿè½½å‡è¡¡ã€‚__ åŸºäº HyperPlaneï¼Œ10 å¾®ç§’çº§è¯·æ±‚è½¬å‘é€Ÿåº¦ã€‚
* __é™æ€ IPã€‚__ æ”¯æŒå†…éƒ¨é™æ€ IPï¼Œæ¯ä¸ª Subnet ä¸€ä¸ªã€‚
* ğŸ’¢ __å®ä¾‹æ— æ³•é€šè¿‡ NLB è®¿é—®è‡ªå·±ã€‚__ ç½‘ç»œåŒ…å¯ä»¥æˆåŠŸå‘å‡ºï¼Œä½†æ˜¯å› ä¸º NLB ä¼šä¿ç•™æºåœ°å€å’Œç›®æ ‡åœ°å€ï¼Œå¯¼è‡´ä¸¤ä¸ªåœ°å€ä¸€è‡´ï¼Œè¢«ç½‘å¡åˆ¤æ–­æ˜¯æ— æ•ˆåŒ…ï¼Œä»è€Œè®¿é—®å¤±è´¥ã€‚
  * ç”±äº ALB ä¼šæ›¿æ¢æºåœ°å€ï¼Œæ‰€ä»¥ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜ã€‚
* __æ¯é€‰æ‹© 1 ä¸ª AZï¼Œå³ä¼šåœ¨è¿™ä¸ª AZ ä¸­ç½®å…¥ä¸€ä¸ª NLB å¹¶é™„å¸¦ä¸€ä¸ª IP åœ°å€ã€‚__ é¢å‘ Internet çš„ NLB å¯ä»¥é€‰æ‹© EIP æˆ–éšæœºåˆ†é…åœ°å€ï¼Œå†…éƒ¨çš„ NLB åªèƒ½éšæœºåˆ†é…ã€‚
  * __NLB é»˜è®¤åªä¼šå‘è‡ªå·± AZ ä¸­çš„ç›®æ ‡ã€‚__ âœ… æ¯é€‰æ‹©ä¸€ä¸ª AZï¼Œéƒ½åº”è¯¥ç¡®ä¿ AZ ä¸­æœ‰å¥åº·çš„ç›®æ ‡ã€‚
  * ğŸ’¢ __å¦‚æœæŸä¸ª NLB æ‰€å¤„çš„ AZ ä¸­æ²¡æœ‰ç›®æ ‡ï¼Œè€Œç”¨æˆ·æ­£å¥½è®¿é—®åˆ°äº†è¿™ä¸ª NLBï¼Œå°±ä¼šå¯¼è‡´ NLB æ— æ³•è®¿é—®ã€‚__ NLB ä¾é  DNS è®°å½•åšè´Ÿè½½å‡è¡¡ï¼Œè€Œå®¢æˆ·ç«¯å¯èƒ½ä¼šç¼“å­˜è¿™ä¸ªè®°å½•ï¼Œå¯¼è‡´åå¤è®¿é—®åŒä¸€ä¸ªæ²¡æœ‰ç›®æ ‡çš„ NLBï¼Œå¯¼è‡´å¤±è´¥ã€‚
  * __å¦‚æœæƒ³è®© NLB èƒ½è½¬å‘æµé‡åˆ°ä»»æ„ AZ ä¸­çš„ç›®æ ‡ï¼Œå¯ä»¥å¼€å¯ Cross-Zone Load Balancingã€‚__

### Classic Load Balancer

* __å‰ VPC æ—¶ä»£çš„è´Ÿè½½å‡è¡¡å™¨ã€‚__ åŒæ—¶æ”¯æŒ TCP å’Œ HTTP å±‚çš„è´Ÿè½½å‡è¡¡ã€‚

### è¸©å‘

* __å¿…é¡»ç½®äºå…¬å¼€ Subnetã€‚__ ALB å¿…é¡»ç½®äºå…¬å¼€ Subnetï¼Œå¤–éƒ¨æ‰èƒ½è®¿é—®ã€‚

## AMIï¼ˆAmazon Machine Imageï¼‰

_ã€Œè™šæ‹Ÿæœºé•œåƒã€‚ã€_

### Amazon Linux

* __åŸºäº RHEL çš„å¼€æº Linuxã€‚__ ä½¿ç”¨ `yum` åŒ…ç®¡ç†å·¥å…·ã€‚
* __ç»è¿‡å®¡æ ¸ã€å¼ºåŒ–å¹¶é¢„è£… AWS å·¥å…·åŒ…ã€‚__
* __RHEL å¯¹åº”çš„ [EPEL](https://access.redhat.com/solutions/3358) å·¥å…·åŒ…æ˜¯ Amazon Linux Extrasã€‚__ è§ [Link](https://amazonaws-china.com/amazon-linux-2/faqs/#Amazon_Linux_Extras)ã€‚
* âœ… __å¯ä»¥æ‰“å¼€ TCP BBR é˜»å¡ç®—æ³•å¢åŠ ç½‘ç»œååã€‚__ è§ [Link](https://aws.amazon.com/amazon-linux-ami/2017.09-release-notes/)ã€‚

## VPCï¼ˆVirtual Private Cloudï¼‰

_ã€Œäº‘ä¸Šçš„è™šæ‹Ÿä¸“å±ç½‘ç»œã€‚ã€_

### æ€»è§ˆ

* __é€»è¾‘éš”ç¦»ã€‚__ VPC ä¹‹é—´ä¸äº’é€šï¼Œé™¤éé¢å¤–ä½¿ç”¨ VPC Peering ç­‰ä¸“é—¨çš„å¯¹æ¥æ–¹å¼ã€‚
* __IP åœ°å€ä¿ç•™ã€‚__ VPC CIDR çš„ 1 å· IP åœ°å€æ˜¯ VPC è·¯ç”±å™¨ï¼ˆé»˜è®¤ç½‘å…³ï¼‰ï¼Œ2 å·æ˜¯ DNSï¼Œ3 å·é¢„ç•™æœªæ¥ä½¿ç”¨ï¼Œ255 å·å› ä¸ºä¸æ”¯æŒ Broadcasting è€Œåšäº†ä¿ç•™ã€‚
  * æ¯ä¸ª Subnet CIDR çš„ç¬¬ 1 ä¸ªå’Œæœ€å 1 ä¸ª IP åœ°å€ä¹Ÿä¼šä¿ç•™ï¼Œä¸å‡†ä½¿ç”¨ã€‚
  * å®é™…ä¸Šä¼šåªæœ‰æ•´ä¸ª VPC CIDR çš„ 2 å·ä¼šé¢„ç•™åš DNSï¼Œä½†å…¶ä»– Subnet CIDR çš„ 2 å·ä¹Ÿéƒ½ä¼šä¿ç•™ã€‚
* __ä¸æ”¯æŒ Broadcastingã€‚__ æš‚æ—¶ä¹Ÿä¸æ”¯æŒ Multicastingã€‚
* __ä¸æ”¯æŒç›‘å¬æ¨¡å¼ã€‚__ ä¸æ”¯æŒ Promiscus æ¨¡å¼ï¼Œé¿å…äº†åŒ…å—…æ¢çš„é—®é¢˜ã€‚
* __Network ACL æ˜¯é’ˆå¯¹æ•´ä¸ª VPC çš„æ— çŠ¶æ€ç«¯å£é˜²ç«å¢™ã€‚__ å¿…é¡»è®¾ç½®åŒå‘å…è®¸ï¼Œç½‘ç»œåŒ…æ‰èƒ½åŒå‘æµåŠ¨ã€‚
* __Security Group æ˜¯é’ˆå¯¹èµ„æºçš„æœ‰çŠ¶æ€ç«¯å£é˜²ç«å¢™ã€‚__ ä¹Ÿå¯ä»¥ç”¨æ¥ä»£æ›¿ IP åœ°å€ã€åœ°å€æ®µï¼Œä½œä¸ºé˜²ç«å¢™æ¡ç›®ä¸­çš„ã€Œæºåœ°å€ã€ã€‚
* __Elastic Network Interfaceï¼ˆENIï¼‰ã€‚__ è™šæ‹Ÿç½‘å¡ã€‚
* __Elastic IP Addressï¼ˆEIPï¼‰ã€‚__ è™šæ‹Ÿå…¬ç½‘ IPã€‚

### Subnet

* __å• AZ è™šæ‹Ÿå­ç½‘ã€‚__ Subnet ä¸èƒ½è·¨ AZã€‚
* __ç›¸äº’è”é€šã€‚__ åŒä¸€ä¸ª VPC ä¸‹çš„ Subnet ä¹‹é—´å¯ä»¥äº’é€šï¼Œä½†éœ€è¦è®¾ç½®è·¯ç”±ã€‚
* __å¿…é¡»ä» VPC çš„ CIDR ä¸­é€‰æ‹©å­é›†ã€‚__ å¹¶ä¸”åŒä¸€ VPC ä¸‹ Subnet ä¹‹é—´ä¸èƒ½é‡å ã€‚
* __æ¯ä¸ª Subnet è‡³å°‘å¸¦ä¸€ä¸ªè·¯ç”±è¡¨ã€‚__ è·¯ç”±æ¡ç›®ä¸­çš„è§„åˆ™è¶Šå…·ä½“ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚

### Gateway

* __Internet Gatewayï¼ˆIGWï¼‰ã€‚__ åŒå‘äº’è”ç½‘ç½‘å…³ï¼Œæ¯ä¸ª VPC ä¸€ä¸ªã€‚
  * __Subnet è·¯ç”±è¡¨ä¸­æœ‰è®°å½•æŒ‡å‘ IGW åˆ™ä¸º Public Subnetã€‚__ å¦åˆ™å°±æ˜¯ Privateã€‚
* __NAT Gatewayï¼ˆNAT-GWï¼‰ã€‚__ å‡ºå£å‘äº’è”ç½‘ç½‘å…³ï¼ˆIPv4ï¼‰ï¼Œéœ€ç½®äº Public Subnet ä¸­ã€‚
  * è®¾ç½®è·¯ç”±åï¼ŒPrivate Subnet çš„å®ä¾‹å¯ä»¥é€šè¿‡ NAT-GW å•å‘è®¿é—®äº’è”ç½‘ï¼Œç”¨äºä¸‹è½½æ›´æ–°åŒ…ç­‰ã€‚
* __Ingress / Egress Gatewayã€‚__ å…¥å£ / å‡ºå£å‘äº’è”ç½‘ç½‘å…³ï¼ˆIPv6ï¼‰ã€‚

### EIPï¼ˆElastic IPï¼‰

* __åŒæ—¶å›ºå®šå…¬ç½‘å’Œç§ç½‘ IPã€‚__ å…¬ç½‘ IP ä» AWS è‡ªæœ‰ IP æ± å­ä¸­éšæœºé€‰å–ã€‚
* __é»˜è®¤æ¯ Region å¯ä»¥æœ‰ 5 ä¸ª EIPã€‚__
* __åœ¨è¿è¡Œä¸­çš„å®ä¾‹ä¸Šä½¿ç”¨å•ä¸ª EIP ä¸æ”¶è´¹ã€‚__ ç”³è¯·äº†ä½†é—²ç½®ä¸ç”¨åè€Œæ”¶è´¹ã€‚
  * åœ¨å®ä¾‹ä¸Šä½¿ç”¨è¶…è¿‡ 1 ä¸ª EIPï¼Œå¤šå‡ºéƒ¨åˆ†æŒ‰ä¸ªæ”¶è´¹ã€‚

### NACL

* __æ— çŠ¶æ€çš„åŒå‘ç«¯å£é˜²ç«å¢™ã€‚__
* __æ¯ä¸ª NACL åªå¯¹åº”ä¸€ä¸ª VPCï¼Œä½†å¯ä»¥å¯¹åº”å¤šä¸ª Subnetã€‚__

### ENIï¼ˆElastic Network Interfaceï¼‰

* __è™šæ‹Ÿç½‘å¡ã€‚__
* ğŸ’¢ __é Amazon Linux ä½¿ç”¨åŒ ENI éœ€è¦è‡ªå·±é…ç½®æ“ä½œç³»ç»Ÿè·¯ç”±ã€‚__ å¦åˆ™å¯èƒ½å‡ºç°æ— æ³•è®¿é—®çš„æƒ…å†µã€‚

### Flow Logs

* __è®°å½• VPCã€Subnet å†…æ‰€æœ‰ ENI ä¸Šç½‘ç»œ Packet çš„æµåŠ¨ã€‚__ ä¹Ÿå¯åªé’ˆå¯¹å•ä¸ª ENI åšè®°å½•ã€‚
* __æœ‰ ACCEPT / REJECT ä¸¤ç§çŠ¶æ€ã€‚__ ACCEPT æ˜¯æ­£å¸¸æ”¾è¡Œçš„æµé‡ï¼ŒREJECT æ˜¯è¢« Security Group / ACL é˜»æŒ¡çš„æµé‡ã€‚
* __å¯ä¿å­˜è‡³ CloudWatch Logs æˆ– S3 Bucketã€‚__ å¹¶è‡ªåŠ¨åˆ›å»ºæ‰€éœ€æƒé™ã€‚ 
  * ğŸ‡¨ğŸ‡³ __S3 Bucket å¦‚æœ‰åŸæ¥å¸¦æœ‰ `aws-cn` çš„æƒé™ä¼šå‡ºé”™ã€‚__ `aws-cn` ä¸­é—´çš„ `-` ä¼šè¢«ä¸¢æ‰ï¼Œå¯¼è‡´ã€ŒMalformedPolicy - Invalid principal in policyã€é”™è¯¯ã€‚
  * å¯ä»¥åˆ° CloudTrail ä¸­æ‰¾åˆ°è¯¥æ¡ API è°ƒç”¨ï¼Œå°† Bucket Policy éƒ¨åˆ†å¤åˆ¶å‡ºæ¥ï¼ŒåŠ ä¸Š `-`ï¼Œæ‰‹åŠ¨è¦†ç›–åŸæƒé™ã€‚
* __å¿˜è®°æ‰“å¼€ Flow Logs ä½†æ˜¯äº§ç”Ÿå¤§æµé‡è´¦å•æ—¶å¯é€šè¿‡ CloudWatch ç®€å•æ’æŸ¥æµé‡å¤§å¤´ã€‚__ ä½¿ç”¨ NetworkOut ç­‰ Metricã€‚

### Traffic Miroring

* __åœ¨ä¸å®‰è£… agent çš„æƒ…å†µä¸‹å°†ä¸€å°è™šæœºçš„è¿›å‡ºå£æµé‡é•œåƒåˆ°å¦ä¸€å°è™šæœºä¸Šã€‚__ ç”¨äºè°ƒè¯•å’Œç›‘æ§ã€‚

### Site-to-Site VPN

* __AWS æä¾›æ‰˜ç®¡ VPN æ–¹æ¡ˆæ‰“é€šå¤šä¸ªéš”ç¦»ç½‘ç»œã€‚__
* __VGWï¼ˆVirtual Gatewayï¼‰ æ˜¯ AWS ä¾§çš„ VPN ç½‘å…³ã€‚__ Customer Gateway æ˜¯å®¢æˆ·ä¾§çš„ç½‘å…³ã€‚
  * ğŸ’¢ __åªèƒ½ç”± Customer Gateway ä¸€ä¾§å‘èµ·è¯·æ±‚å»ºç«‹ VPN ç®¡é“ã€‚__ AWS ä¾§æ— æ³•å‘èµ·è¯·æ±‚ï¼Œä½†è¯·æ±‚å‘èµ·åç½‘ç»œåŒ…å¯ä»¥åŒå‘å‘é€ã€‚ï¼ˆè§ [Link 1](https://docs.aws.amazon.com/vpc/latest/adminguide/Introduction.html)ã€[Link 2](https://forums.aws.amazon.com/thread.jspa?threadID=106147)ï¼‰
  * ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºæš‚æ—¶ä¸æ”¯æŒ Customer Gatewayï¼Œå¯ä½¿ç”¨ Openswanã€‚
* __ç”¨æˆ·éœ€è‡ªè¡Œå‡†å¤‡ Customer Gateway ç¡¬ä»¶æˆ–è½¯ä»¶ã€‚__ åœ¨ AWS ä¸Šã€Œåˆ›å»º Customer Gatewayã€æŒ‡çš„æ˜¯ã€Œç”Ÿæˆ Customer Gateway å¯¹åº”çš„é…ç½®ã€ã€‚
  * __AWS æä¾›å·²ç»æµ‹è¯•è¿‡å¯ç”¨çš„è½¯ç¡¬ä»¶è·¯ç”±åˆ—è¡¨ã€‚__
* __Tunnel 1 æ˜¯ä¸»ç®¡é“ï¼ŒTunnel 2 æ˜¯å¤‡ç”¨ç®¡é“ã€‚__ è§ [Link](https://community.spiceworks.com/how_to/143768-how-to-set-up-a-site-to-site-vpn-for-aws)ã€‚

### Amazon DNS Server

* __VPC CIDR çš„ç¬¬ 2 ä¸ª IP åœ°å€æ˜¯ AWS å®˜æ–¹æä¾›çš„ DNS æœåŠ¡å™¨ã€‚__ ä¹Ÿå¯ä»¥ä½¿ç”¨ `169.254.169.253`ï¼Œè§ [Link](https://docs.aws.amazon.com/vpc/latest/userguide/vpc-dns.html)ã€‚
* __å®˜æ–¹ DNS æœåŠ¡å™¨å¯ä»¥è§£æ `.internal` ç§æœ‰åŸŸåï¼Œä¹Ÿå¯ä»¥è§£æ Route 53 Private Hosted Zone ä¸­çš„åœ°å€ã€‚__


## R53ï¼ˆRoute 53ï¼‰

### `ALIAS` è®°å½•

* __`ALIAS` æ˜¯ R53 å¯¹ DNS çš„[ç§æœ‰æ‰©å±•](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/resource-record-sets-choosing-alias-non-alias.html)ã€‚__
  * ğŸ“ åªèƒ½æŒ‡å‘å¸¦å…¬å¼€è®¿é—®åœ°å€çš„ AWS èµ„æºï¼Œæ¯”å¦‚ ELBã€Beanstalk ç¯å¢ƒã€S3 æ¡¶ç­‰ã€‚
  * æ”¯æŒè£¸åŸŸåï¼ˆzone apexï¼‰æŒ‡å‘ã€‚DNS åŸç”Ÿä¸æ”¯æŒåœ¨è£¸åŸŸåä¸Šåˆ›å»º `CNAME` æŒ‡å‘å…¶ä»–åŸŸåï¼Œ[ä½¿ç”¨ `ALIAS` + `A` è®°å½•çš„æ–¹å¼](https://stackoverflow.com/questions/22053472/how-do-i-redirect-a-naked-apex-domain-to-www-using-route-53)å¯ä»¥æŒ‡å‘ä½¿ç”¨å…¶ä»–åŸŸåçš„ AWS èµ„æºã€‚
  * ğŸ’¢ `ALIAS` ä¹Ÿ[ä¸æ”¯æŒåœ¨è£¸åŸŸåä¸Šåš `CNAME`](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/resource-record-sets-values-alias.html)ï¼Œå› ä¸º `ALIAS` ä¸å…¶å¯¹åº”çš„è®°å½•ï¼Œåå­—å’Œç±»å‹éƒ½å¿…é¡»ç›¸åŒï¼Œè€Œè£¸åŸŸåä¸Šæœ¬èº«å°±ä¸æ”¯æŒ `CNAME`ã€‚
  * ä¼šåœ¨èµ„æº IP åœ°å€æ›´æ–°æ—¶è‡ªåŠ¨åŒæ­¥è®°å½•ã€‚
  * ğŸ“ ä¹Ÿå¯æ”¯æŒæŒ‡å‘å…¶ä»–è´¦å·å†…çš„ AWS èµ„æºã€‚
  * ğŸ“ ä¸æ”¶è´¹ï¼Œå¯¹æ¯” `CNAME` è®°å½•ä¼šæ”¶å–è¯·æ±‚è´¹ã€‚


## Lambda

_ã€Œæ— æœåŠ¡å™¨è®¡ç®—èµ„æºã€‚ã€_

> [æ–‡æ¡£](https://docs.aws.amazon.com/lambda/latest/dg/welcome.html) | [ä»·æ ¼](https://www.amazonaws.cn/en/lambda/pricing/) | [FAQ](https://www.amazonaws.cn/en/lambda/faqs/)

### æ¦‚å†µ

* __é‡‡ç”¨ Firecracker Micro-VM å†…æ ¸ã€‚__
* __ä»¥ã€Œå†…å­˜/100msã€ä¸ºå•ä½æ¥æ”¶è´¹ã€‚__
* __é»˜è®¤ä¸æ”¾åœ¨ VPC å†…ã€‚__

### Function

* __æ”¯æŒå¤šç§è¯­è¨€ç¯å¢ƒã€‚__
* __å¯ä½¿ç”¨ Layers æ¥é™„åŠ ç¨‹åºæ‰€éœ€çš„åº“ã€‚__
* __ç»è¿‡ç¨‹åºè§¦å‘ã€‚__ ä¸èƒ½ç›´æ¥è§¦å‘ï¼Œéœ€ç»è¿‡ç¨‹åºè§¦å‘ï¼Œæ¯”å¦‚ S3 Eventsã€API Gateway ç­‰ã€‚
* __å¯ä»¥é€šè¿‡ Environment å˜é‡ä¼ å…¥å‚æ•°ã€‚__ Function å°†å¯ä»¥è®¿é—®è¿™äº›å‚æ•°ã€‚
  * ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºæš‚æ—¶ä¸æ”¯æŒã€‚

### Layer

* __å¯ä»¥å¤ç”¨çš„ä¾èµ–ã€‚__ ä¸ç”¨æ¯ä¸ªå‡½æ•°å»æ‰“åŒ…ä¾èµ–ã€‚
* __ä¸Šä¼  zip åŒ…æ¥åˆ›å»º Layerã€‚__
* ğŸ’¢ __æ‰“åŒ…æœ‰å›ºå®šæ ¼å¼ã€‚__ ä¸æŒ‰æ ¼å¼åˆ™æ— æ³•æ­£å¸¸å¼•å…¥ä¾èµ–ã€‚ï¼ˆè§ [Link](https://docs.aws.amazon.com/lambda/latest/dg/configuration-layers.html)ï¼‰
  * æ¯”å¦‚ Node.js çš„ä¾èµ–ç›®å½•å¿…é¡»æ˜¯ `nodejs/node_modules`ã€‚

### å¼‚æ­¥è°ƒç”¨

* __æ”¯æŒå¼‚æ­¥è°ƒç”¨ã€‚__ å®é™…ä¸Šæ˜¯ Lambda è‡ªå·±ç®¡ç†äº†ä¸€ä¸ªäº‹ä»¶é˜Ÿåˆ—æ¥åšå¼‚æ­¥è°ƒç”¨ã€‚
  * ğŸ’¢ __ç”¨æˆ·æ— æ³•è·å–å¼‚æ­¥è°ƒç”¨çš„å‡½æ•°çš„è¿”å›å€¼ã€‚__ æš‚æ—¶[æ²¡æœ‰ç›¸å…³API](https://docs.aws.amazon.com/lambda/latest/dg/invocation-async.html)ã€‚
  * ğŸ’¢ __Lambda å¼‚æ­¥è°ƒç”¨ä¸ç¼–ç¨‹è¯­è¨€è‡ªå·±çš„ `async` è¡Œä¸ºæ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„ä¸œè¥¿ã€‚__ åè€…ä»ç„¶å¯ä»¥æ˜¯åŒæ­¥è°ƒç”¨ï¼ŒLambda ä¼šç­‰å¾…å‡½æ•°æ‰€æœ‰å¼‚æ­¥æ‰§è¡Œå®Œæ¯•åå†è¿”å›ã€‚
* __å¼‚æ­¥è°ƒç”¨çš„å‡½æ•°è¿”å›é”™è¯¯æ—¶ä¼šé‡è¯• 2 æ¬¡ã€‚__ åˆ†åˆ«é—´éš” 1ã€2 åˆ†é’Ÿã€‚
  * å¦‚æœå‡å¤±è´¥åˆ™ä¼šå°è¯•æŠŠäº‹ä»¶[å‘é€è‡³ Dead Letter Queue](https://docs.aws.amazon.com/lambda/latest/dg/invocation-async.html#dlq)ï¼Œå¦‚æœæœ‰è®¾ç½®ã€‚
  * å¦‚æœå› ä¸ºè§¦åŠå¹¶è¡Œé™é¢è€Œè¢«é™æµï¼Œäº‹ä»¶ä¼šè¢«æ”¾å›åˆ°é˜Ÿåˆ—ä¸­[åœ¨ 6 å°æ—¶å†…è‡ªåŠ¨é‡è¯•](https://docs.aws.amazon.com/lambda/latest/dg/invocation-async.html#dlq)ã€‚
* ğŸ’¢ __å¼‚æ­¥è°ƒç”¨çš„é˜Ÿåˆ—æ˜¯æœ€ç»ˆä¸€è‡´çš„ã€‚__ å³åŒæ ·çš„äº‹ä»¶å¯èƒ½è¢«å‘é€ä¸¤æ¬¡ï¼Œä¹Ÿå¯èƒ½å› ä¸ºå‡½æ•°å¤„ç†ä¸åŠè€Œäº‹ä»¶å·²ç»è¿‡æœŸæ‰€ä»¥è¿˜æ²¡å‘é€ç»™å‡½æ•°å°±è¢«åˆ æ‰ã€‚
  * âœ… å‡½æ•°åº”è¯¥èƒ½å¾ˆå¥½åœ°å¤„ç†é‡å¤äº‹ä»¶ã€‚
  * âœ… åº”è¯¥é…ç½® Dead Letter Queue æ¥é¿å…äº‹ä»¶ä¸¢å¤±ã€‚

### Version

* __ä¸€ä¸ªå‡½æ•°å¯ä»¥åŒæ—¶å­˜åœ¨å¤šä¸ªç‰ˆæœ¬ã€‚__ `$LATEST` æ˜¯é»˜è®¤çš„ã€æœ€æ–°çš„ç‰ˆæœ¬ã€‚
* __ç‰ˆæœ¬å¯ä»¥å‘½åï¼Œä½†åœ¨ ARN ä¸­ä»…ä»¥è‡ªå¢æ•°å­—æ¥æŒ‡ä»£ã€‚__

### Alias

* __ä¸€ä¸ªç‰ˆæœ¬å¯ä»¥æœ‰å¤šä¸ªåˆ«åã€‚__ 

### ARN

* __[Qualified Function ARN](https://docs.aws.amazon.com/lambda/latest/dg/versioning-aliases-permissions.html) æŒ‡çš„æ˜¯ ARN æœ«å°¾å¸¦æ•°å­—ç‰ˆæœ¬æˆ– `$LATEST` çš„å‡½æ•° ARNã€‚__
* __Unqualified Function ARN æŒ‡çš„æ˜¯ ARN æœ«å°¾ä»€ä¹ˆéƒ½ä¸å¸¦çš„ ARNã€‚__
* __Alias ARN æŒ‡çš„æ˜¯ ARN æœ«å°¾å¸¦ Alias åå­—çš„ ARNã€‚__
* __åœ¨ IAM ä¸­ä½¿ç”¨ä»»æ„ä¸€ç§ ARNï¼Œåˆ™æƒé™éƒ½åªé’ˆå¯¹è¯¥ ARNã€‚__ 
  * __æƒé™æ²¡æœ‰ä¼ é€’æ€§ã€‚__ å³ IAM ä¸­æ€ä¹ˆå†™çš„ï¼Œæƒé™å°±åªé’ˆå¯¹è¿™ä¸ª ARNï¼Œä¸ä¼šä¼ é€’ç»™ Alias æˆ–è€… `$LATEST` å¯¹åº”çš„å‡½æ•°ï¼Œåä¹‹äº¦ç„¶ã€‚

### æµé‡åˆ†ç¦»

* __å¯ä»¥é€šè¿‡ Alias æ¥[æŒ‰æƒé‡åˆ†ç¦»æµé‡](https://docs.aws.amazon.com/lambda/latest/dg/lambda-traffic-shifting-using-aliases.html)ã€‚__ æŸä¸ª Alias åŒæ—¶æŒ‡å‘ä¸¤ä¸ªç‰ˆæœ¬ï¼Œåˆ†åˆ«è®¾å®šæƒé‡ï¼Œåˆ™å¯ä»¥è¾¾åˆ°æµé‡åˆ†ç¦»ã€‚
  * ä¸èƒ½æŒ‡å‘ `$LATEST` ç‰ˆæœ¬ã€‚
* __åªæ”¯æŒä¸¤ä¸ªç‰ˆæœ¬ä¹‹é—´çš„æµé‡åˆ†ç¦»ã€‚__
* __CloudWatch æ—¥å¿—å’Œå“åº”ä¸­çš„ `x-amz-executed-version` ä¼šæœ‰ç‰ˆæœ¬ä¿¡æ¯ã€‚__

### è¸©å‘

* ğŸšš __Log Group æ— æ³•åœ¨ Stack åˆ é™¤æˆ–å›é€€æ—¶è‡ªåŠ¨åˆ é™¤ã€‚__ Lambda æ‰€é™„å¸¦çš„ Log Group æ˜¯è‡ªåŠ¨åˆ›å»ºçš„ï¼Œä¸åœ¨ Stack èµ„æºä¹‹åˆ—ï¼Œæ‰€ä»¥ä¸ä¼šåœ¨ Stack åˆ é™¤æ—¶è‡ªåŠ¨åˆ é™¤ã€‚ï¼ˆè§ [Link](https://blog.rowanudell.com/cleaning-up-lambda-logs-with-cloudformation/)ï¼‰
  * å¯æ‰‹åŠ¨åˆ›å»ºåä¸º `/aws/lambda/${lambdaFunctionName}` çš„ Log Groupï¼Œå³å¯è‡ªåŠ¨åˆ é™¤ã€‚
* ğŸšš __æ³¨æ„ Lambda å‡½æ•° Role éœ€è¦æœ‰è¶³å¤Ÿæƒé™ã€‚__ ç‰¹åˆ«æ³¨æ„å¯¹ Log Group çš„æ“ä½œï¼Œä»¥åŠå¯¹å„é¡¹èµ„æºçš„æ“ä½œã€‚
  * ğŸ’¢ å¦‚æœæ²¡æœ‰ Log Group åˆ›å»ºæƒé™åˆ™ä¸ä¼šè‡ªåŠ¨åˆ›å»º Log Groupï¼Œå¦‚æœæ²¡æœ‰å†™å…¥ Log Group Stream æƒé™åˆ™ä¸ä¼šè‡ªåŠ¨å†™å…¥ï¼Œä½†äºŒè€…å‡ä¸ä¼šæŠ¥é”™ã€‚
  * âœ… å¯ä½¿ç”¨éƒ¨åˆ† Managed Policyï¼Œæ¯”å¦‚ AWSLambdaBasicExecutionRoleã€‚
  * ğŸšš æ³¨æ„ Managed Policy åå­—æœ‰çš„å‰é¢æœ‰å‰ç¼€ï¼ˆæ¯”å¦‚ `service-role/`ã€`job-role/`ï¼‰ï¼Œæœ‰çš„æ²¡æœ‰å‰ç¼€ã€‚åœ¨ Console ä¸­ä¸ä¼šæ˜¾ç¤ºå‰ç¼€ï¼Œä½†åœ¨ CDK ä¸­ä½¿ç”¨ `fromAwsManagedPolicyName()` æ—¶éœ€è¦æŠŠå‰ç¼€åŠ ä¸Šã€‚
* ğŸˆ² __è¯·å‹¿åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å†…ç½®çš„åŒ…ã€‚__ è™½ç„¶å¯ä»¥åœ¨å‡½æ•°ä¸­ç›´æ¥ `import boto3`ï¼Œä½†æ˜¯å†…ç½®çš„åŒ…æ— æ³•ä¿è¯ç‰ˆæœ¬ä¸”éšæ—¶å¯èƒ½æ›´æ–°ï¼Œå¯¼è‡´è«åé”™è¯¯ã€‚
  * âœ… åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¯·ä½¿ç”¨ Layer å¼•å…¥å¤–éƒ¨ä¾èµ–ã€‚
* __å‡½æ•°å¯¹åº”çš„ IAM æƒé™ä¿®æ”¹åå¹¶ä¸ä¸€å®šä¼šç«‹åˆ»ç”Ÿæ•ˆã€‚__ å› å‡½æ•°çš„ IAM æƒé™å®é™…æ˜¯é™„ç€äºå®¹å™¨ä¸Šï¼Œè€Œå®¹å™¨çš„é‡Šæ”¾æ—¶é—´ä¸å®šã€‚
  * âœ… æ›´æ–° IAM æƒé™ååº”å°è¯•ä¿®æ”¹å‡½æ•°å†…å®¹æˆ–é…ç½®å¹¶ä¿å­˜ï¼Œå¼ºè¡Œä½¿å®¹å™¨é‡Šæ”¾æ›´æ–°ï¼Œä»¥åº”ç”¨æ–°çš„ IAM æƒé™ã€‚
* __Lambda å…·å¤‡[è‡ªåŠ¨é‡è¯•](https://docs.aws.amazon.com/lambda/latest/dg/retries-on-errors.html)æœºåˆ¶ã€‚__ éœ€è¦æ³¨æ„ã€‚

## ESSï¼ˆElasticsearch Serviceï¼‰

_ã€Œæ‰˜ç®¡çš„ Elasticsearch + Kibana åº”ç”¨ã€‚ã€_

> [æ‰‹å†Œ](https://docs.aws.amazon.com/elasticsearch-service/latest/developerguide/what-is-amazon-elasticsearch-service.html)

### æ¦‚å†µ

* __ä¸¤ç§ç½‘ç»œæ¨¡å¼ã€‚__ ç½®äºå…¬ç½‘ï¼Œæˆ–è€…ç½®äº VPC å†…ã€‚
* __è®¿é—®ç­–ç•¥ã€‚__ éœ€è¦åœ¨è®¿é—®ç­–ç•¥ä¸­å…è®¸ä¹‹åï¼Œæ‰å¯è®¿é—®ã€‚

### è¸©å‘

* __ç½®äº VPC ä¸­çš„ Domain æ— æ³•ä»å…¬ç½‘è®¿é—®ã€‚__ å› ä¸º VPC å†…çš„ ES ä»…æœ‰ç§æœ‰ IP åœ°å€ï¼Œæ²¡æœ‰å…¬ç½‘ IP åœ°å€ã€‚ï¼ˆè§ [Link](https://forums.aws.amazon.com/thread.jspa?threadID=279437)ï¼‰
* __è®¿é—®ç­–ç•¥çš„ Resource éœ€åŠ å…¥è·¯å¾„ã€‚__ æ”¯æŒç¡®å®šçš„è·¯å¾„æˆ– `*`ï¼Œå¦‚æ²¡æœ‰è·¯å¾„ä¼šæŠ¥é”™ã€‚æ­£ç¡®ç¤ºèŒƒï¼š`arn:aws-cn:es:cn-northwest-1:1234567890:domain/my-es/*`ï¼Œæ³¨æ„æœ€åçš„ `/*`ã€‚
* __å¾ªç¯æƒé™ä¾èµ–ã€‚__ è¦è®¿é—® ESï¼Œéœ€è¦åˆ›å»º Roleï¼Œéœ€è¦çŸ¥é“ ES çš„ ARNï¼›è€Œåˆ›å»º ES çš„æ—¶å€™ï¼Œéœ€è¦è®¾ç½®è®¿é—®ç­–ç•¥ï¼Œéœ€è¦çŸ¥é“ Role çš„ ARNã€‚è§£å†³æ–¹æ¡ˆè§ CloudFormation è¸©å‘éƒ¨åˆ†ã€‚
* ğŸšš __CFn ä»…æ”¯æŒ 1-AZ å’Œ 2-AZã€‚__ `ZoneAwarenessEnabled: True` ä»£è¡¨ 2-AZï¼Œä½†ç®¡ç†æ§åˆ¶å°ä¸­æ”¯æŒ 3-AZã€‚ï¼ˆè§ [ElasticsearchClusterConfig.ZoneAwarenessEnabled](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-elasticsearch-domain-elasticsearchclusterconfig.html)ï¼‰

## CFnï¼ˆCloudFormationï¼‰

_ã€ŒåŸºå»ºå³ä»£ç å·¥å…·ã€‚ã€_

> [æ‰‹å†Œ](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/Welcome.html) | [èµ„æº](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_EC2.html) | [CLI](https://docs.aws.amazon.com/cli/latest/reference/cloudformation/index.html#cli-aws-cloudformation)

* __Template å¿…é¡»ä¸Šä¼ åˆ° S3 æ¡¶ä¸­ã€‚__ é€‰æ‹©æœ¬åœ°æ–‡ä»¶[ä¹Ÿä¼šè‡ªåŠ¨ä¸Šä¼ åˆ° S3](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html)ã€‚

### Parameter

* ğŸ“ __ä½¿ç”¨å•ä¸ª Template æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ Parameter æ¥å¢åŠ å¤ç”¨æ€§ã€‚__

### Nested Stack

* __éœ€è¦å¤ç”¨å±€éƒ¨æ¶æ„æ—¶ï¼Œå¯åµŒå¥—å…¶ä»– Templateï¼Œå½¢æˆ Nested Stackã€‚__

### CLI

* __`package` å‘½ä»¤å¯ä»¥ä¸Šä¼  Assets åˆ° S3 æ¡¶ï¼Œå¹¶è‡ªåŠ¨å°† Template ä¸­æŒ‡å‘æœ¬åœ°æ–‡ä»¶çš„éƒ¨åˆ†ä¿®æ”¹ä¸ºæŒ‡å‘ S3 çš„åœ°å€ã€‚__

### è„šæœ¬

* __å¯åœ¨ User Data ä¸­ç›´æ¥ä½¿ç”¨ã€‚__
* __`cfn-init` åœ¨å®ä¾‹[å¯åŠ¨æ—¶æ‰§è¡Œè„šæœ¬](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-init.html)ã€‚__
  * è„šæœ¬æ‰€éœ€çš„å…ƒæ•°æ®ï¼ˆæ¯”å¦‚ `configset`ï¼‰å†™åœ¨ CFn æ¨¡æ¿ `Instance` å…ƒç´ ä¸‹çš„ `Metadata` å…ƒç´ ä¸‹çš„ `AWS::CloudFormation::Init` å…ƒç´ ä¸­ã€‚
* __`cfn-signal` ç”¨äº[å‘é€ `CreationPolicy` æˆ– `WaitCondition` æ‰€éœ€çš„ä¿¡å·](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-signal.html)ã€‚__
* `cfn-get-metadata`
* [`cfn-hup`](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-hup.html)
  * post.update / post.add / post.remove

### è¸©å‘

* __å¾ªç¯æƒé™ä¾èµ–ã€‚__ é€šå¸¸å‘ç”Ÿåœ¨å…·å¤‡ Resource-Base Policy çš„èµ„æºä¸Šï¼Œèµ„æºéœ€è¦çŸ¥é“è§’è‰²çš„ ARN æ‰èƒ½å¼€æ”¾æƒé™ï¼Œè€Œè§’è‰²åˆ™éœ€è¦çŸ¥é“èµ„æºçš„ ARN æ‰èƒ½è®¾ç½®æƒé™ï¼Œå¯¼è‡´å¾ªç¯ä¾èµ–ã€‚ è§£å†³åŠæ³•å¦‚ä¸‹ã€‚
  * âœ… æŠŠ ARN æˆ–èµ„æºåç§°å†™æˆå¸¸é‡ã€‚
  * å†™ä¸€ä¸ª Custom Resourceï¼Œç”¨ Lambda æ¥å¢åŠ ã€è°ƒæ•´æœ‰ä¾èµ–çš„éƒ¨åˆ†ã€‚
* __éç©º Bucket æ— æ³•åˆ é™¤ã€‚__ S3 Bucket å¦‚æœå·²ç»æ”¾äº†ä¸œè¥¿ï¼Œåˆ™æ— æ³•åœ¨å›æ»šã€åˆ é™¤ Stack æ—¶è‡ªåŠ¨åˆ é™¤ï¼Œéœ€æ‰‹åŠ¨æ“ä½œã€‚
  * å¯ä»¥è‡ªè¡Œå†™ Shell è„šæœ¬è¿›è¡Œåˆ é™¤ã€‚
* __å•å‘åŒæ­¥ã€‚__ CFn æ¨¡æ¿ä¿®æ”¹åï¼Œèµ„æºä¼šåŒæ­¥ï¼Œä½†æ˜¯èµ„æºåˆ›å»ºå®Œæˆåå†è¿›è¡Œä¿®æ”¹ï¼Œä¸ä¼šä½“ç°åœ¨æ¨¡æ¿ä¸Šã€‚
  * __æœ‰ Drift Detection å¯ä»¥ç›‘æµ‹æ¨¡æ¿ä¸èµ„æºä¹‹é—´çš„å·®å¼‚ã€‚__ ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºæš‚æ—¶æ²¡æœ‰ã€‚

## SAMï¼ˆServerless Application Modelï¼‰

_ã€ŒCloudFormation çš„ Serverless æ‰©å±•ç‰ˆã€‚ã€_

* ğŸ“ __CFn æ”¯æŒçš„ SAM éƒ½æ”¯æŒã€‚__
* ğŸ“ __SAM ç‰¹åˆ«ä¸º API Gatewayã€Lambda å’Œ DynamoDB åšäº†[ä¼˜åŒ–å’Œæ‰©å±•](https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-template.html#serverless-sam-template-simpletable)ã€‚__

## CDKï¼ˆCloud Development Kitï¼‰

_ã€Œå°è£…æˆç¨‹åºä»£ç çš„ CFnã€‚ã€_

> [API](https://docs.aws.amazon.com/cdk/api/latest/versions.html)

### æ€»è§ˆ

* __åŸºäº Node å’Œ TypeScriptã€‚__ å‘½ä»¤è¡Œå·¥å…·åŸºäº Nodeã€‚ä»£ç å¦æ”¯æŒ JavaScriptã€Pythonã€Javaã€CSharp ç­‰è¯­è¨€ã€‚
* __è½¬è¯‘æˆ CFn æ¨¡æ¿ã€‚__ CDK ä»£ç ä»ç„¶ä¼šè½¬è¯‘æˆ CFn æ¨¡æ¿è¿›è¡Œéƒ¨ç½²ã€‚
* __åŠ©æ‰‹å‡½æ•°ã€‚__ CDK æä¾›åŠ©æ‰‹å‡½æ•°æ¥ç®€åŒ–æ¨¡æ¿ç¼–å†™ã€‚

### æ¦‚å¿µ

* __Constructã€‚__ å³å°è£…å¥½çš„èµ„æºå’Œé…ç½®ã€‚
  * ğŸ’¢ __å¾ˆå¤šæœåŠ¡è¿˜æ²¡æœ‰ Constructã€‚__ å¯é€€å›åˆ°ä½¿ç”¨ `Cfn-` å‰ç¼€çš„åŸå§‹ç±»ã€‚
* __ä½¿ç”¨ JavaScript å¼€å‘ã€‚__ ä½¿ç”¨ [jsii](https://github.com/aws/jsii) æ¡†æ¶æ¥æ¥å…¥å…¶ä»–è¯­è¨€ã€‚

### å‘½ä»¤

* `cdk bootstrap` = åˆ›å»ºç”¨äºå­˜æ”¾ CFn æ¨¡æ¿å’Œææ–™çš„ S3 Bucket
* `cdk synth` = å°† CDK ä»£ç è½¬è¯‘æˆ CFn æ¨¡æ¿
* `cdk deploy` = éƒ¨ç½²è½¬è¯‘å¥½çš„ CFn æ¨¡æ¿
  * ğŸ’¢ éƒ¨ç½²ä¹‹å‰è®°å¾—å…ˆè¿è¡Œ `cdk synth`ã€‚

### è¸©å‘

* ğŸ‡¨ğŸ‡³ __`cdk bootstrap` ä¸­ä½¿ç”¨çš„ CFn è¿”å› Bucket çš„ Endpoint é”™è¯¯ï¼Œå¯¼è‡´ä¸å¯åˆ›å»º ChangeSetã€‚__ CFn ä¸­çš„è¿”å›å€¼ä¸º `DomainName` è€Œä¸æ˜¯ `RegionalDomainName`ï¼Œè€Œä¸­å›½åŒºçš„ CloudFormation æ— æ³•è¿”å›æ­£ç¡® Endpointï¼Œå¯¼è‡´é”™è¯¯ã€‚è§£å†³åŠæ³•å¦‚ä¸‹ã€‚ï¼ˆç‰ˆæœ¬ï¼šv1.2.0ï¼Œè§ [#1459](https://github.com/aws/aws-cdk/issues/1459)ï¼‰
  * ä¿®æ”¹ `node_modules/aws-cdk/lib/api/bootstrap-environment.js` ä¸­çš„ `"StagingBucket", "DomainName"` ä¸º `"StagingBucket", "RegionalDomainName"`ã€‚
* ğŸ‡¨ğŸ‡³ __ä¸­å›½åŒº Service Principal / ARN æ ¼å¼é”™è¯¯ã€‚__ Global åŒºåŸŸç ”å‘è€…å¯¹ä¸­å›½åŒºå‘½åè§„åˆ™è¯¯åˆ¤ï¼Œå†™é”™è§„åˆ™ï¼Œå¯¼è‡´ CDK åŸºæœ¬æ— æ³•ä½¿ç”¨ã€‚ï¼ˆè§ [Link](https://github.com/aws/aws-cdk/issues/2198)ï¼‰
  * å¯è°ƒç”¨å†…éƒ¨æ¥å£è‡ªè¡Œè¦†ç›–å†…ç½®è§„åˆ™ä¸´æ—¶è§£å†³ã€‚ï¼ˆè§ [Link](https://gist.github.com/bnusunny/090e65be682b4703b72b41e4f648c51c)ï¼‰
* __S3ã€LogGroup èµ„æºé»˜è®¤ `UpdatePolicy` / `DeletionPolicy` ä¸º `Retain`ã€‚__ æ­¤é¡¹ä¸ CFn çš„é»˜è®¤è¡Œä¸ºç›¸åã€‚ï¼ˆç‰ˆæœ¬ï¼šv1.2.0ï¼Œè§ [#2601](https://github.com/aws/aws-cdk/issues/2601)ï¼‰
* __éƒ¨åˆ†èµ„æºç¼ºä¹ `DeletionPolicy` æŠ½è±¡ã€‚__ éƒ¨åˆ†èµ„æºéœ€è¦ç›´æ¥è°ƒç”¨åº•å±‚çš„æ¥å£æ‰èƒ½ä¿®æ”¹ï¼Œè€Œä¸”åº•å±‚æ¥å£åå­—æ··ä¹±ï¼Œæ–¹æ³•åå­—æ˜¯ `RemovalPolicy`ï¼Œå€¼åˆæ˜¯ `DESTROY`ã€‚
  * âœ… å¯¹äº Constructï¼Œå¯ä»¥åœ¨ä¼ å…¥å‚æ•°æ—¶ç›´æ¥å¸¦ `removalPolicy: cdk.RemovalPolicy.DESTROY`

## IoT Greengrass

_ã€Œè¾¹ç¼˜è®¡ç®—æ§åˆ¶å™¨ã€‚ã€_

## AppSync

_ã€Œæ‰˜ç®¡çš„ GraphQLã€‚ã€_

## RDSï¼ˆRelational Database Serviceï¼‰

_ã€Œæ‰˜ç®¡çš„å…³ç³»å‹æ•°æ®åº“ã€‚ã€_

* __æ”¯æŒ Multi-AZã€‚__ é«˜å¯ç”¨å‰¯æœ¬ï¼Œå®æ—¶åŒæ­¥ã€‚
  * å¯è¯»å†™ã€‚
  * å¹³æ—¶ä¸å¯ç”¨ï¼Œå½“ä¸»å®ä¾‹å¤±æ•ˆæ—¶è‡ªåŠ¨å¯ç”¨å¹¶æ›´æ–°åŸŸåæŒ‡å‘ã€‚
* __æ”¯æŒ Read Replicaã€‚__ åªè¯»å‰¯æœ¬ï¼Œéå®æ—¶åŒæ­¥ã€‚

### ç³»ç»Ÿç»´æŠ¤

* ğŸ“ __[ç”± RDS è´Ÿè´£](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_UpgradeDBInstance.Maintenance.html)æ“ä½œç³»ç»Ÿã€æ•°æ®åº“çš„è¡¥ä¸åŠç‰ˆæœ¬å‡çº§ã€‚__
* __å¯ä»¥è®¾ç½® Maintenace Windowã€‚__ RDS å°†åœ¨è¯¥ç»´æŠ¤çª—å£æœŸå¯¹æ‰§è¡Œç»´æŠ¤ã€‚
  * é‡åˆ°éƒ¨åˆ†é«˜å±é—®é¢˜æ—¶è¡¥ä¸ä¼šç«‹å³åº”ç”¨ã€‚
* __éƒ¨åˆ†è¡¥ä¸éœ€è¦æ•°æ®åº“ä¸‹çº¿ä¸€æ®µæ—¶é—´ã€‚__ æ¯”å¦‚éœ€è¦æ“ä½œç³»ç»Ÿé‡å¯ã€‚
* __ä½¿ç”¨ Multi-AZ å¯ä»¥é™ä½å¯¹å¯ç”¨æ€§çš„å½±å“ã€‚__
  * å…ˆåœ¨ Standby ä¸Šæ‰§è¡Œç»´æŠ¤ï¼Œå°† Standby å‡çº§ä¸º Primaryï¼Œç„¶ååœ¨åŸ Primaryï¼ˆç° Standbyï¼‰ä¸Šæ‰§è¡Œç»´æŠ¤ã€‚
  * ğŸ’¢ Multi-AZ ä¹Ÿ[ä¸ä¸€å®šèƒ½è§£å†³](https://amazonaws-china.com/blogs/database/best-practices-for-upgrading-amazon-rds-for-mysql-and-amazon-rds-for-mariadb/)å‡çº§å¸¦æ¥çš„å®•æœºé—®é¢˜ã€‚

### Automated Backup

* __æ”¯æŒè‡ªåŠ¨å¤‡ä»½ã€‚__ åœ¨é€‰å®šçš„æ—¶é—´çª—å£è¿›è¡Œå¤‡ä»½ã€‚
* ğŸˆ² __å¯ä»¥ç¦ç”¨ã€‚__ è®¾ç½® Rentention Period ä¸º 0 æ—¶å¯ä»¥ç¦ç”¨ã€‚
  * ä¸æ¨èç¦ç”¨ã€‚
* __å¤‡ä»½å°ºå¯¸å°äºé¢„ç•™æ•°æ®åº“æ—¶[ä¸æ”¶è´¹](https://amazonaws-china.com/rds/mysql/pricing/?pg=pr&loc=2)ã€‚__ è¶…è¿‡æ—¶æ‰æ”¶è´¹ã€‚

## Auroraï¼ˆRDS Auroraï¼‰

_ã€Œæ‰˜ç®¡çš„äº‘åŸç”Ÿæ•°æ®åº“ã€‚ã€_

* __æœ‰å‘è¡¨ä¸“é—¨çš„è®ºæ–‡ã€‚__

### Endpoint ç±»å‹

* __Cluster Endpoint æ˜¯å”¯ä¸€å¯æ‰§è¡Œå†™æ“ä½œçš„èŠ‚ç‚¹ã€‚__ è¿æ¥åˆ°æ•°æ®åº“ä¸»å®ä¾‹ã€‚
  * ä¹Ÿå¯ä»¥è¯»ã€‚
  * æ¯ä¸ªé›†ç¾¤å›ºå®šæœ‰ 1 ä¸ªã€‚
  * Aurora ç®¡ç†ï¼Œä¸å¯è‡ªå»ºã€‚
* __Reader Endpoint æ˜¯åªè¯»èŠ‚ç‚¹ã€‚__ è¿æ¥åˆ°æ•°æ®åº“çš„ Read Replicaã€‚
  * æœ‰è¿æ¥è´Ÿè½½å‡è¡¡ï¼Œæ— æŸ¥è¯¢è´Ÿè½½å‡è¡¡ã€‚
  * æ¯ä¸ª
* __Custom Endpoint æ˜¯è‡ªé€‰èŠ‚ç‚¹ã€‚__ è¿æ¥åˆ°ä½ åˆ¶å®šçš„ä¸€ç»„å®ä¾‹ä¸­çš„ä¸€ä¸ªã€‚æœ‰è¿æ¥å¸¦è´Ÿè½½å‡è¡¡ã€‚
* __Instance Endpoint æ˜¯å®ä¾‹èŠ‚ç‚¹ã€‚__ è¿æ¥åˆ°å•ä¸ªå®ä¾‹ã€‚æ¯ä¸ªå®ä¾‹å‡æœ‰è‡ªå·±çš„ä¸“å± Instance Endpointã€‚

### Global Database

* ğŸ‡¨ğŸ‡³ ä¸­å›½ä¸æ”¯æŒã€‚
* __æ”¯æŒå…¨åŒºåŸŸ[äºšç§’çº§åŒæ­¥](https://amazonaws-china.com/rds/aurora/global-database/)ã€‚__

## Redshift

_ã€Œæ‰˜ç®¡çš„æ•°æ®ä»“åº“ã€‚ã€_

* __å…¬å¼€æœåŠ¡ã€‚__ Redshift é»˜è®¤èµ°å…¬ç½‘è·¯å¾„ã€‚

### åŠ å¯†

* __åˆ›å»ºé›†ç¾¤çš„æ—¶å€™å¯ä»¥å¼€å¯åŠ å¯†ã€‚__ ä¹Ÿå¯åˆ›å»ºåå¼€å¯ã€‚
* __åˆ›å»ºåå¼€å¯åŠ å¯†ï¼Œä¼šè‡ªåŠ¨è¿ç§»æ•°æ®åˆ°åŠ å¯†çš„é›†ç¾¤ã€‚__ 
  * è¿ç§»æ—¶é›†ç¾¤ä¼šè¿›å…¥åªè¯»çŠ¶æ€ã€‚
  * æ§åˆ¶å°çŠ¶æ€æ˜¾ç¤ºä¸º `resizing`ã€‚

### Enhanced VPC Routing

* __å¼€å¯å `COPY` å’Œ `UNLOAD` å‘½ä»¤å°†èµ° VPC è€Œéå…¬ç½‘ã€‚__
  * å¯é€šè¿‡ Endpoint è®¿é—® S3 ä¸Šçš„æ•°æ®ã€‚
* __å¼€å¯åå¯ä½¿ç”¨ VPC ç›¸å…³çš„åŠŸèƒ½ï¼Œå¦‚å®‰å…¨ç»„ã€NACL ç­‰ã€‚__

### Snapshot

* __å¯æŠŠè®¾ç½®å°† Snapshot å¤åˆ¶åˆ°ç¬¬äºŒä¸ª Regionã€‚__

### Spectrum

* __ç›´æ¥ä» S3 ä¸­æ‰«æåŠç»“æ„åŒ–æ•°æ®è¿›è¡Œåˆ†æã€‚__ è·Ÿ Athena çš„åŠŸèƒ½é›·åŒã€‚

### è¸©å‘

* __æ²¡æœ‰ã€ŒStopã€è¿™ä¸€è¯´æ³•ã€‚__ è™½ç„¶å¸¸å¬è¯´ã€Œåœæœºå°±ä¸æ”¶è´¹ï¼Œè¦ç”¨æ—¶å†æ‰“å¼€ã€ï¼Œä½†æ˜¯ Redshift æ²¡æœ‰ã€ŒStopã€ï¼Œåªæœ‰ã€ŒDeleteã€ã€‚

## CloudWatch

_ã€Œäº‘ä¸Šç›‘æ§å¹³å°ã€‚ã€_

### æ€»è§ˆ

* __Metrics æ˜¯åº”ç”¨æŒ‡æ ‡ã€‚__
* __Dashboard ä¸åˆ†åœ°åŒºã€‚__
* __è‡ªå®šä¹‰ Metric æ”¯æŒ [High-Resolution](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/publishingMetrics.html#high-resolution-metrics)ã€‚__ é»˜è®¤æ•°æ®æ”¶é›†é¢‘ç‡ 1 åˆ†é’Ÿ 1 æ¬¡ï¼ŒHigh-Resolution æ•°æ®æ”¶é›†é¢‘ç‡ä¸º 1 ç§’é’Ÿ 1 æ¬¡ã€‚
  * __åŒºåˆ«äº EC2 [Detail Monitoring](https://docs.amazonaws.cn/en_us/AWSEC2/latest/UserGuide/using-cloudwatch.html)ã€‚__ EC2 æœåŠ¡æ¯ 5 åˆ†é’Ÿå‘é€ä¸€æ¬¡å®ä¾‹æŒ‡æ ‡ç»™ CloudWatchï¼Œå¼€å¯ Detailed Monitoring ä¹‹åæ¯ 1 åˆ†é’Ÿå‘é€ä¸€æ¬¡ã€‚

### Eventsï¼ˆCloudWatch Eventsï¼‰

* __Events æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ã€‚__ æœ‰ç›¸å¯¹ç‹¬ç«‹çš„ ARN å’Œ API åå­—ï¼ˆeventsï¼‰ã€‚
  * __åç»­å‘å±•æˆäº† EventBridgeã€‚__ ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºæš‚æ—¶æ²¡æœ‰ã€‚

### Logsï¼ˆCloudWatch Logsï¼‰

* __Logs æ˜¯æ—¥å¿—æ”¶é›†å’ŒæŸ¥çœ‹å™¨ã€‚__ æœ‰ç›¸å¯¹ç‹¬ç«‹çš„ ARN å’Œ API åå­—ï¼ˆlogsï¼‰ã€‚
  * __æœ‰ Logs Insights å¯ä»¥ç›´æ¥å¯¹æ—¥å¿—è¿›è¡ŒæŸ¥è¯¢ã€‚__ ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºæš‚æ—¶æ²¡æœ‰ã€‚
* __å¯ä»¥æŠŠæ—¥å¿—è½¬å‘åˆ° Lambdaã€‚__
  * ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºæš‚ä¸æ”¯æŒã€‚
* __å¯ä»¥æŠŠæ—¥å¿—è½¬å‘åˆ° Elasticsearchã€‚__ ä»…é™ AWS æ‰˜ç®¡çš„ Elasticsearchã€‚
  * ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºæš‚ä¸æ”¯æŒã€‚

### Alarms

* __æœ‰ OKã€INSUFFICIENT_DATA å’Œ ALARM ä¸‰ç§çŠ¶æ€ã€‚__
* __æœ‰ Periodã€Evaluation Period å’Œ Datapoints to Alarm ä¸‰ä¸ªå‚æ•°ã€‚__
  * Period = éš”å¤šå°‘æ—¶é—´æ”¶é›†ä¸€æ¬¡æ•°æ®ã€‚
  * Evalution Period = ç»Ÿè®¡æœ€è¿‘å‡ æ¬¡çš„æ•°æ®ã€‚
  * Datapoints to Alarm = ç»Ÿè®¡ç»“æœè¦è¶…æ ‡å¤šå°‘æ¬¡æ‰è§¦å‘è­¦æŠ¥ã€‚
* __Regular Alarmï¼ŒPeriod = 60 ç§’ã€‚__ High-Resolution Alarmï¼ŒPeriod = 10 / 30 ç§’ã€‚

### CloudWatch Agent

* __åœ¨ EC2 å’Œæœ¬åœ°æœºå™¨ä¸Šå®‰è£… Agent å¯ä»¥å‘ CloudWatch æ‰“æ•°æ®å’Œæ—¥å¿—ã€‚__
* __ç³»ç»Ÿçº§æ—¥å¿—æ¯”å¦‚å†…å­˜å ç”¨æƒ…å†µéœ€è¦ Agent å‘é€ã€‚__ AWS æ— æƒè®¿é—®æ­¤ç±»æ•°æ®ã€‚

## CloudTrail

_ã€Œå®˜æ–¹çš„ API è®¿é—®æ—¥å¿—ã€‚ã€_

### æ€»è§ˆ

* __é»˜è®¤æ‰“å¼€ã€‚__

### Event

* __åŒºåˆ† Management Event å’Œ Data Event ç±»å‹ã€‚__ 
  * __Management Event æŒ‡çš„æ˜¯ç®¡ç†ç±»æ“ä½œã€‚__ é€šå¸¸æŒ‡çš„æ˜¯é…ç½®æˆ–æƒé™çš„ä¿®æ”¹ã€‚
  * __Data Event æŒ‡çš„æ˜¯å¯¹èµ„æºçš„æ“ä½œã€‚__ æ¯”å¦‚ä¸Šä¼ æ–‡ä»¶åˆ° S3ã€‚
  * ğŸ’¢ __é»˜è®¤ä¸è®°å½• Data Eventã€‚__

### Event History

* __é»˜è®¤ä¼šæŠŠ API æ—¥å¿—è®°å½•åˆ° Event Historyã€‚__ Event History ä¸­çš„æ—¥å¿—ä¼š[ä¿å­˜ 90 å¤©](https://docs.aws.amazon.com/awscloudtrail/latest/userguide/view-cloudtrail-events.html)ã€‚

### Trail

* __Trail å¯ä»¥å°†æ—¥å¿—[ä¿å­˜åˆ° S3](https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-getting-started.html)ã€‚__
* __Trail é’ˆå¯¹æ‰€æœ‰ Regionã€‚__

### å®‰å…¨

* __æ¯ä¸ªæ—¥å¿—æ–‡ä»¶[éƒ½æœ‰å¯¹åº”çš„ Hash ç­¾å](https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-log-file-validation-intro.html)ã€‚__ æ¯å°æ—¶ä¼šä¼ è¾“ä¸€ä¸ªç­¾ååˆé›†æ–‡ä»¶ã€‚
  * ç­¾åä½¿ç”¨ CloudTrail ç§é’¥åŠ å¯†ï¼Œå¯ä»¥ä½¿ç”¨å…¬é’¥è§£å¯†éªŒè¯æ—¥å¿—å®Œæ•´ã€æ­£ç¡®ã€‚

## Kinesis

_ã€Œæ‰˜ç®¡çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚ã€_

### Data Streams

> [æ‰‹å†Œ](https://docs.aws.amazon.com/streams/latest/dev/introduction.html) | [é™åˆ¶](https://docs.amazonaws.cn/en_us/streams/latest/dev/service-sizes-and-limits.html) | [ä»·æ ¼](https://www.amazonaws.cn/en/kinesis/data-streams/pricing/) | [FAQ](https://www.amazonaws.cn/en/kinesis/data-streams/faqs/)

* ğŸ’¢ __é»˜è®¤æŒ‰æ”¶å–æ—¶é—´æ¥ä¸ºæ¶ˆæ¯æ’åºï¼Œ[ä¸ç¡®ä¿ç²¾å‡†](https://docs.aws.amazon.com/kinesis/latest/APIReference/API_PutRecord.html)ã€‚__ å¦‚éœ€ç²¾å‡†æ’åºï¼Œéœ€åœ¨æ¶ˆæ¯å‘é€æ—¶æ‰‹åŠ¨æä¾› `SequenceNumberForOrdering` å‚æ•°ï¼Œæ¶ˆæ¯ä¼šæŒ‰æ­¤å‚æ•°ä»å°åˆ°å¤§æ’åºã€‚
  * å¦‚ä¸æä¾›ï¼ŒSequence Number ä¼šè‡ªå¢å¹¶ä¿æŒå”¯ä¸€ã€‚
* ğŸ’¢ __æ’åºä»…é’ˆå¯¹å•ä¸ª Shardã€‚__ Sequence Number ä¹Ÿ[ä»…åœ¨å•ä¸ª Shard å†…å”¯ä¸€](https://docs.aws.amazon.com/streams/latest/dev/key-concepts.html)ã€‚
* ğŸ’¢ __æ¶ˆæ¯ä¸èƒ½æ‰‹åŠ¨åˆ é™¤ã€‚__ åªèƒ½ç­‰è‡ªåŠ¨è¿‡æœŸã€‚
  * åœ¨å–æ•°æ®æ—¶[æä¾› Sequence Number](https://docs.aws.amazon.com/kinesis/latest/APIReference/API_GetRecords.html) æ¥ç¡®ä¿åªå– Sequence Number ä¹‹åçš„æ–°æ¶ˆæ¯ã€‚
* ğŸ’¢ __ä¼ é€’å»¶è¿Ÿè¾ƒé«˜ã€‚__ ç›®å‰ä»…æ”¯æŒäºšç§’çº§çš„ä¼ é€’å»¶è¿Ÿï¼ˆ200-1000msï¼‰ã€‚ï¼ˆè§ [Link](https://aws.amazon.com/about-aws/whats-new/2015/03/amazon-kinesis-propagation-delay-reduction/)ã€[Link](https://docs.amazonaws.cn/en_us/streams/latest/dev/building-consumers.html)ï¼‰
  * å¦‚éœ€æœ€å¤§é™åº¦é™ä½å»¶è¿Ÿï¼Œè¿˜åº”åœ¨å®¢æˆ·ç«¯å¤„é™ä½è½®è¯¢é—´éš”ã€‚ï¼ˆè§ [Link](https://docs.amazonaws.cn/en_us/streams/latest/dev/kinesis-low-latency.html)ï¼‰
  * ä½¿ç”¨ Enhanced Fan-Out æ¨é€æœºåˆ¶å¯ä»¥é™ä½åˆ°çº¦ 75msã€‚ï¼ˆè§ [Link](https://docs.amazonaws.cn/en_us/streams/latest/dev/building-consumers.html)ï¼‰
  * ä¸ä¹‹ç›¸å¯¹çš„ï¼Œæ˜¯ Apache Kafka å¯ä»¥ä¼˜åŒ–åˆ°ä¸ªä½æ•° ms çº§çš„ä¼ é€’å»¶è¿Ÿã€‚ï¼ˆè§ [Link](https://engineering.linkedin.com/kafka/benchmarking-apache-kafka-2-million-writes-second-three-cheap-machines)ï¼‰

#### é™åˆ¶

* __æ¶ˆæ¯å°ºå¯¸é™åˆ¶ 1MBã€‚__
* __æ¶ˆæ¯å­˜å‚¨æœ€é•¿ 24 å°æ—¶ã€‚__

#### KCLï¼ˆKinesis Client Libraryï¼‰

* __KCL æ˜¯ Kinesis Data Stream çš„[å®˜æ–¹é«˜é˜¶ SDK](https://docs.aws.amazon.com/streams/latest/dev/developing-consumers-with-kcl.html)ã€‚__ æ¯”åŸå§‹ API æ›´æŠ½è±¡ä¸€å±‚ã€‚
* ğŸ“ __å¯ä½¿ç”¨ KCL çš„ [`checkpoint`](https://docs.aws.amazon.com/streams/latest/dev/kinesis-record-processor-implementation-app-java.html) æ–¹æ³•æ¥è®¾ç½®æ•°æ®æŒ‡é’ˆã€‚__ ç±»ä¼¼ä¹¦ç±çš„é¡µç ï¼Œç”¨äºæŒ‡ç¤ºç›®å‰å·²è¯»å–å¹¶å¤„ç†åˆ°è¯¥ Shard çš„å“ªä¸€æ¡è®°å½•ã€‚
  * åœ¨åŸå§‹ API ä¸­ï¼Œæ•°æ®æŒ‡é’ˆè¢«ç§°ä½œ [Shard Iterator](https://docs.aws.amazon.com/kinesis/latest/APIReference/API_GetShardIterator.html)ã€‚

#### Sharding

* __æ¶ˆæ¯ä¼šæŒ‰ Parition Key è¢«é€åˆ°ä¸åŒçš„ Shardã€‚__ æ¯ä¸ª Shard æä¾›æ¯ç§’ 1MB è¾“å…¥ï¼Œ2MB è¾“å‡ºï¼Œ1000 æ¬¡ `PUT`ã€‚
* ğŸ“ __Consumer çš„æ•°é‡ä¸åº”è¶…è¿‡ Shard æ•°é‡ã€‚__ è™½ç„¶æ²¡æœ‰æ˜ç¡®é™åˆ¶ï¼Œä½†æ˜¯åœ¨æ‰‹å†Œé’ˆå¯¹ KCL ä¸­æœ‰[æ˜ç¡®å»ºè®®](https://docs.aws.amazon.com/streams/latest/dev/kinesis-record-processor-scaling.html)å’Œ[è¯´æ˜](https://docs.aws.amazon.com/streams/latest/dev/troubleshooting-consumers.html#records-belonging-to-the-same-shard)ã€‚
  * __å¯ç†è§£ä¸º 1 Shard æœ€å¤šæ”¯æŒ 1 Consumerã€‚__ ä½† 1 Consumer å¯ä»¥å¤„ç†å¤šä¸ª Shardã€‚

#### è‡ªåŠ¨é‡è¯•

* __æœ‰ Producer é‡è¯•å’Œ Consumer é‡è¯•ä¸¤ç§[æƒ…å†µ](https://docs.aws.amazon.com/streams/latest/dev/kinesis-record-processor-duplicates.html)ã€‚__

#### vs. SQS

* __å•æ¡ä¿¡æ¯çš„ ACK/FAILï¼Œå°±ç”¨ SQSã€‚__ Kinesis éœ€è¦ç”¨æˆ·æ‰‹åŠ¨ç»´æŠ¤ä½ç½®æŒ‡é’ˆï¼Œè€Œ SQS ä¼šè‡ªåŠ¨åˆ é™¤ ACK åçš„æ•°æ®ï¼Œè‡ªåŠ¨é‡å‘ FAIL çš„æ•°æ®ã€‚
* __SQS å¯ä»¥é’ˆå¯¹å•æ¡ä¿¡æ¯åšå»¶è¿Ÿã€‚__
* __SQS å¯ä»¥åŠ¨æ€å¢åŠ æ›´å¤š Readerã€‚__ Kinesis éœ€è¦ç”¨æˆ·æå‰è§„åˆ’ Shard æ•°é‡ã€‚
* __SQS ä¸ä¿è¯é¡ºåºã€‚__ Kinesis ä¿è¯å•ä¸ª Shard å†…æ¶ˆæ¯çš„é¡ºåºã€‚
  * ä¹Ÿå¯ä»¥ä½¿ç”¨ [SQS FIFO Queue](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/FIFO-queues.html) æ¥ç¡®ä¿é¡ºåºã€‚
* __Kinesis é€šè¿‡ Sharding æ¥æä¾›æ›´å¥½çš„å¹¶è¡Œæ¶ˆè´¹èƒ½åŠ›ã€‚__

### Data Firehose

> [æ‰‹å†Œ](https://docs.aws.amazon.com/firehose/latest/dev/what-is-this-service.html)

* __è¾“é€æ•°æ®ä¸“ç”¨ã€‚__ æ¶ˆæ¯é˜Ÿåˆ—å¸¸ä¼šå……å½“ä¼ è¾“æ•°æ®æ—¶çš„ç¼“å­˜ï¼Œæ‰€ä»¥ä¸“é—¨æä¾›äº†è¿™ä¸ªåŠŸèƒ½ã€‚
  * æ”¯æŒå¾€ S3ã€Lambdaã€Elasticsearch ç­‰ç›®æ ‡ä½ç½®è¾“é€æ•°æ®ã€‚
* __æ”¯æŒæ•°æ®è½¬æ¢ã€‚__ è¾“é€æ•°æ®ä¹‹å‰å¯ä»¥ç”¨ Lambda è¿›è¡Œæ ¼å¼è½¬æ¢ã€‚
* __[æ”¯æŒ SSE é™æ€åŠ å¯†](https://docs.aws.amazon.com/firehose/latest/dev/encryption.html)ã€‚__
  * __æ•°æ®æºæ˜¯ Kinesis Data Stream æ—¶ Firehose ä¸å­˜å‚¨æ•°æ®åˆ°ç¡¬ç›˜ã€‚__ åŠ å¯†ç”± Kinesis Data Stream æ‰§è¡Œï¼Œè§£å¯†ä¼ è¾“åˆ° Firehose ç¼“å­˜å…¥å†…å­˜ï¼Œç„¶åç›´æ¥å­˜è‡³ç›®æ ‡ã€‚
  * __æ•°æ®æºæ˜¯ `PUT` æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `StartDeliveryStreamEncryption` æ‰“å¼€ Firehose çš„ SSE åŠ å¯†åŠŸèƒ½ã€‚

### Video Streams

* ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºæš‚æœªä¸Šçº¿ã€‚

### Data Analytics

* ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºå’±æœªä¸Šçº¿ã€‚
* __ä½¿ç”¨ SQL è¯­å¥å¯¹é˜Ÿåˆ—ä¸­çš„æ•°æ®è¿›è¡Œæµå¤„ç†å¹¶è¾“å‡ºç»“æœã€‚__ ä¹Ÿå¯ä»¥ä½¿ç”¨ Javaã€‚

## ElastiCache

_ã€Œæ‰˜ç®¡çš„ Redis/Memcached æ•°æ®åº“ã€‚ã€_

* __ä»…ä¾›äº‘ä¸Šè®¿é—®ã€‚__ é»˜è®¤ä¸èƒ½ä» AWS ä¹‹å¤–è®¿é—®ã€‚
  * ğŸˆ² é™¤é[ä½¿ç”¨ NAT](https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/accessing-elasticache.html)ï¼Œä½†ä¸å®‰å…¨ä¸”é…ç½®éº»çƒ¦ã€‚
* ğŸ‡¨ğŸ‡³ __ä¸­å›½[æš‚æ—¶ä¸æ”¯æŒå­˜å‚¨å’Œä¼ è¾“åŠ å¯†](https://docs.amazonaws.cn/en_us/aws/latest/userguide/elasticache.html)ä»¥åŠä½¿ç”¨ `AUTH` è®¾å®šå¯†ç ã€‚__

## ECSï¼ˆElastic Container Serviceï¼‰

_ã€Œæ‰˜ç®¡çš„ Docker é›†ç¾¤æ²»ç†å·¥å…·ã€‚ã€_

### ECS Container Agent

* __EC2 åœ¨å®‰è£… Agent ä¹‹åæ‰èƒ½æ¥å…¥ ECS é›†ç¾¤ã€‚__ ECS ç®¡ç†çš„ EC2 å®ä¾‹æˆ– ECS-Optimized å‹å®ä¾‹å·²ç»è‡ªå¸¦ ECS Container Agentã€‚
  * Agent ä¹Ÿ[æ”¯æŒ Windows](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ECS_Windows.html)ã€‚
* __ECS Container Agent æ˜¯å¼€æºçš„ã€‚__ è§ [Link](https://github.com/aws/amazon-ecs-agent)ï¼Œç›®å‰ä»…æ”¯æŒ EC2ã€‚

## ECRï¼ˆElastic Container Repositoryï¼‰

_ã€Œæ‰˜ç®¡çš„ Docker é•œåƒå­˜å‚¨æœåŠ¡ã€‚ã€_

* ğŸ“ __ä½¿ç”¨ `docker` å‘½ä»¤ä¹‹å‰ï¼Œå…ˆè¿è¡Œ `aws ecr get-login` å¹¶[æ‰§è¡Œå…¶è¾“å‡ºçš„å†…å®¹](https://docs.aws.amazon.com/AmazonECR/latest/userguide/ECR_AWSCLI.html#AWSCLI_push_image)ã€‚__ è¿™å¯ä»¥è®©ä½ ç™»å½•åˆ° ECR è€Œä¸æ˜¯ Docker å®˜æ–¹çš„é•œåƒå­˜å‚¨æœåŠ¡ã€‚

## EKSï¼ˆElastic Kubernetes Serviceï¼‰

_ã€Œæ‰˜ç®¡çš„ K8s Master Nodeã€‚ã€_

### è¸©å‘

* ğŸ‡¨ğŸ‡³ __æ²¡æœ‰å®˜æ–¹é•œåƒã€‚__ ä¸­å›½åŒºæ— æ³•è®¿é—® Google èŠ‚ç‚¹ï¼Œæ‰€ä»¥æ— æ³•ä»å®˜æ–¹æ¸ é“ä¸‹è½½ K8s åº”ç”¨ã€‚
* __è´£ä»»å…±æ‹…æ¨¡å‹å˜åŒ–ã€‚__

## EMRï¼ˆElastic MapReduceï¼‰

_ã€Œæ‰˜ç®¡çš„ Hadoop ç”Ÿæ€ã€‚ã€_

> [ä»·æ ¼](https://www.amazonaws.cn/en/elasticmapreduce/pricing/)

## SageMaker

_ã€Œæ‰˜ç®¡çš„ Jupyter Notebookã€‚ã€_

## Shield

_ã€Œäº‘çš„ 4 å±‚é˜²ç«å¢™ã€‚ã€_

### æ€»è§ˆ

* __é€šè¿‡ Shield Basic å…è´¹æä¾› 4 å±‚ DDoS é˜²æŠ¤ã€‚__
  * ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºæš‚æ—¶æ²¡æœ‰ Shield æœåŠ¡ï¼Œä½†æœ‰ 4 å±‚ DDoS é˜²æŠ¤ã€‚

## WAFï¼ˆWeb Application Firewallï¼‰

_ã€Œäº‘çš„ 7 å±‚é˜²ç«å¢™ã€‚ã€_

## DynamoDB

_ã€Œæ‰˜ç®¡çš„äº‘åŸç”Ÿ NoSQL æ•°æ®åº“ã€‚ã€_

> [æ‰‹å†Œ](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Introduction.html) | [API](https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB.html)

* __ä» Amazon.com è´­ç‰©è½¦éœ€æ±‚å‘å±•è€Œæ¥ã€‚__
  * æœ‰[è®ºæ–‡](https://www.dynamodbguide.com/the-dynamo-paper/)ï¼Œåé‡‡ç”¨äº† [Paxos ç®—æ³•](https://en.wikipedia.org/wiki/Paxos_%28computer_science%29)ã€‚
* __DynamoDB Acceleratorï¼ˆDAXï¼‰æŒ‡çš„æ˜¯å†…å­˜ç¼“å­˜å±‚ã€‚__ æ‰“å¼€ DAX å³å¯ä½¿ç”¨å†…å­˜ç¼“å­˜æå‡æ•ˆç‡ã€‚
* __è¯»å†™å‡æœ‰ä½“é‡é™åˆ¶ã€‚__ æ¯å•ä½è¯» = 4KB/æ¡ç›®/ç§’ï¼Œæ¯å•ä½å†™ = 1KB/æ¡ç›®/ç§’ã€‚
  * ä½¿ç”¨æœ€ç»ˆä¸€è‡´æ€§è¯»å–æ—¶ï¼Œæ¯å•ä½è¯» = 2 Ã— 4KB/æ¡ç›®/ç§’ã€‚
* __æ•°æ®é»˜è®¤åŠ å¯†ã€‚__ å¯ä»¥åœ¨åˆ›å»ºæ—¶[é€‰æ‹©](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/EncryptionAtRest.html) DynamoDB ç®¡ç†å¯†é’¥ï¼ˆå…è´¹ï¼‰ï¼Œæˆ– KMS ç®¡ç†å¯†é’¥ã€‚
  * ä¹Ÿå¯ä»¥åˆ›å»ºåä¿®æ”¹ã€‚

### Partition

* __æ•°æ®è¡¨ä¼šæ ¹æ® Partition Key è€Œ[åˆ†æˆ 10GB å¤§å°çš„ Partition](https://amazonaws-china.com/blogs/database/choosing-the-right-dynamodb-partition-key/)ã€‚__

### DynamoDB Streams

* ğŸ“ __DynamoDB çš„æ—¶åºå¢åˆ æ”¹æŸ¥äº‹ä»¶åˆé›†ã€‚__
* __æœ‰å‡ ç§ View Typeã€‚__ ä»£è¡¨ Stream ä¸­çš„é€šçŸ¥æ•°æ®ç»“æ„ã€‚
  * `KEYS_ONLY`ï¼Œåªè®°å½•æ¡ç›®çš„ Keyã€‚
  * `NEW_IMAGE`ï¼Œåªè®°å½•æ¡ç›®ä¿®æ”¹åçš„å€¼ã€‚
  * `OLD_IMAGE`ï¼Œåªè®°å½•æ¡ç›®ä¿®æ”¹å‰çš„å€¼ã€‚
  * `NEW_AND_OLD_IMAGES`ï¼ŒåŒæ—¶è®°å½•æ¡ç›®ä¿®æ”¹å‰åçš„å€¼ã€‚

### Capacity Unit

* ğŸ“ __åˆ† Read Capacity Unitï¼ˆRCUï¼‰å’Œ Write Capacity Unitï¼ˆWCUï¼‰ã€‚__ æ—¶é—´å•ä½ä¸ºç§’ã€‚
  * 1 RCU = 1 æ¬¡è¯»å–è¯·æ±‚ï¼ˆå¼ºä¸€è‡´æ€§ï¼‰ï¼Œæˆ– 2 æ¬¡è¯»å–è¯·æ±‚ï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰ï¼Œæ¯æ¬¡è¯·æ±‚å¯è¯»å–æœ€å¤š 4KB æ•°æ®ã€‚
  * 1 WCU = 1 æ¬¡å†™å…¥è¯·æ±‚ï¼Œæœ€å¤š 1KB æ•°æ®ã€‚
* __RCU å’Œ WCU å‡å‘ä¸Šèˆå…¥ã€‚__ å³ä¸è¶³ 1 Unit çš„æŒ‰ 1 Unit è®¡ç®—ã€‚
* __ä½¿ç”¨ `ReadItem` å’Œ `BatchReadItem`ï¼Œ æ¯è¯»å–ä¸€ä¸ª Item å³ç®—ä¸€ä¸ªè¯»å–æ“ä½œã€‚__ å³ 1.5KB çš„ Item ä¼šå‘ä¸Šèˆå…¥æˆ 4KBï¼Œ6.5KB çš„ Item ä¼šå‘ä¸Šèˆå…¥åˆ° 8KBã€‚
* __è¯»å–ä¸å­˜åœ¨çš„ Item ä¹Ÿä¼šæ¶ˆè€—è¯»å–æ“ä½œã€‚__ å’Œæ­£å¸¸çš„è¯»å–ä¸€è‡´ã€‚

### ç´¢å¼•

* __Primary Key æ˜¯æ•°æ®å”¯ä¸€æ€§çš„ä¾æ®ã€‚__ å¯ä»¥æ˜¯å• Partition Keyï¼Œæˆ–è€…æ˜¯ Partition Key + Sort Keyã€‚
  * ğŸ“ __Partition Key æ˜¯æ•°æ®åˆ†åŒºçš„ä¸€å¥ï¼Œåº”å°½é‡é€‰æ‹©é«˜å”¯ä¸€æ€§çš„å­—æ®µã€‚__
  * __Sort Key ä¸å‚ä¸æ•°æ®åˆ†åŒºï¼Œä½†å¯ä»¥ç”¨äº Queryã€‚__
* ğŸ“ __Secondary Index æ˜¯å•å¼ è¡¨çš„[ç¬¬äºŒå¥— Primary Key](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/SecondaryIndexes.html)ã€‚__ åŒ…å« Global å’Œ Local ä¸¤ç§ã€‚
  * __å¯ä»¥ç†è§£ä¸ºåˆ›å»ºäº†ä¸€å¼ å­è¡¨ã€‚__
  * ğŸ’¢ __Secondary Index [çš„å€¼å¯ä»¥é‡å¤](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/GSI.html)ã€‚__ æ²¡æœ‰å”¯ä¸€æ€§è¦æ±‚ã€‚
* __Global Secondary Index = ä¸åŸæ¥å®Œå…¨ä¸åŒçš„ Primary Keyã€‚__ 
  * å¯éšæ—¶æ·»åŠ å’Œåˆ é™¤ã€‚
  * ä¸æ”¯æŒå¼ºä¸€è‡´æ€§æŸ¥è¯¢ã€‚
  * æ¯ä¸ª Global Secondary Index è‡ªå¸¦ RCU å’Œ WCUã€‚
  * ä¸å¯è¯·æ±‚ä¸åœ¨ Index ä¸­çš„å­—æ®µã€‚
* __Local Secondary Index = ä¸åŸæ¥çš„ Primary Key å…±äº« Partition Keyï¼Œä½†æå‡ºæ–°çš„ Sort Keyã€‚__
  * åªèƒ½åœ¨è¡¨åˆ›å»ºæ—¶åˆ›å»ºã€‚
  * å¼ºä¸€è‡´æ€§æˆ–æœ€ç»ˆä¸€è‡´æ€§ã€‚
  * ä¸è¡¨å…±äº« RCU å’Œ WCUã€‚
  * å¯è¯·æ±‚ä¸åœ¨ Index ä¸­çš„å­—æ®µã€‚

### æŸ¥è¯¢

* ğŸ“ __ä¸»è¦æœ‰ Query å’Œ Scan ä¸¤ç§æŸ¥è¯¢æ–¹å¼ã€‚__
  * Query é’ˆå¯¹ Indexã€‚
  * Scan é’ˆå¯¹å…¨è¡¨æˆ– Secondary Indexã€‚
* ğŸ“ __Query æŒ‰ç…§è¿”å›æ•°æ®æ¶ˆè€— RCUï¼Œè€Œ Scan æŒ‰ç…§æ‰«ææ•°æ®é‡æ¶ˆè€— RCUã€‚__
  * äºŒè€…çš†æœ‰è¿‡æ»¤ç»“æœçš„æ–¹å¼ï¼Œä½†æ˜¯ Scan çš„è¿‡æ»¤åªæ˜¯æŠŠ[å·²ç»å–å›çš„ç»“æœæ‰”æ‰](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Scan.html#Scan.FilterExpression)ã€‚
* __å–å•æ¡æ•°æ®æ—¶å¯ä½¿ç”¨ Getã€‚__ éœ€æä¾› Primary Keyã€‚
  * __Primary Key å¦‚æœæ˜¯ Paritition Key + Sort Keyï¼Œåˆ™æ„å‘³ç€åœ¨ `getItem` æ—¶å¿…é¡»åŒæ—¶æä¾›äºŒè€…ã€‚__
  * å¦åˆ™ä¼šæŠ¥ã€ŒThe provided key element does not match the schemaã€é”™è¯¯ã€‚
  * å¦‚æœåªæƒ³æŒ‰ç…§ Partition Key æ¥æŸ¥è¯¢ï¼Œå¯ä»¥ä½¿ç”¨ Queryã€‚
* __æ ¹æ® Primary Key æ¥å–å¤šæ¡æ•°æ®æ—¶å¯ä»¥ä½¿ç”¨ BatchGetã€‚__

### Global Tables

* __å¯åœ¨æŒ‡å®š Region åˆ›å»º Replica å¹¶ç»Ÿä¸€ç®¡ç†ã€‚__ è‡ªåŠ¨åŒæ­¥æ•°æ®ï¼Œä¸€èˆ¬[æ•°ç§’å†…](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/globaltables_HowItWorks.html)å¯åŒæ­¥ã€‚
  * __éœ€æ‰“å¼€ DynamoDB Streamsã€‚__
* __æ¯ä¸ª Replica å‡æ”¯æŒè¯»å†™ã€‚__ å†™å†²çªæ—¶åè€…è¦†ç›–å‰è€…ã€‚
* __ä¸åŒ Region çš„ Replica ä¹‹é—´æ²¡æœ‰å¼ºä¸€è‡´æ€§é€‰é¡¹ã€‚__ ä»…ä¿è¯æœ€ç»ˆä¸€è‡´æ€§ã€‚

### è¸©å‘

* __DynamoDB ä½¿ç”¨ç‰¹å®šæ•°æ®æ ¼å¼ã€‚__ å¦‚ `{ id: { 'N': 100 } }`ï¼Œå…¶ä¸­çš„ `N` ä»£è¡¨æ•°æ®æ˜¯æ•°å­—æ ¼å¼ã€‚
  * åœ¨ SDK ä¸­å¯ä½¿ç”¨ `AWS.DynamoDB.Converter.unmarshall()` / `marshall()` å‡½æ•°åœ¨ DynamoDB æ ¼å¼ä¸åŸç”Ÿæ ¼å¼ä¹‹é—´åšè½¬æ¢ã€‚
* __ç´¢å¼•ä¸ç­‰äºå”¯ä¸€ã€‚__ DynamoDB çš„ç´¢å¼•å¯¹å”¯ä¸€æ€§æ²¡æœ‰è¦æ±‚ã€‚


## HyperPlane

* __AWS å†…éƒ¨çš„è´Ÿè½½å‡è¡¡æœåŠ¡ã€‚__
* __ä» S3 å‘å±•è€Œæ¥ã€‚__

## KMSï¼ˆKey Management Serviceï¼‰

_ã€Œæ‰˜ç®¡çš„å¯†é’¥ç®¡ç†æœåŠ¡ã€‚ã€_

> [æ‰‹å†Œ](https://docs.aws.amazon.com/kms/latest/developerguide/overview.html) | [FAQ](https://www.amazonaws.cn/en/kms/faqs/) | [ä»·æ ¼](https://www.amazonaws.cn/en/kms/pricing/)

* __KMS ä¸ºå¤šä¸ª AWS æœåŠ¡æä¾›åŠ å¯†æœºåˆ¶ã€‚__
* __Master Key ç”Ÿæˆæˆ–å¯¼å…¥åç›´æ¥è¿›å…¥ç¡¬ä»¶åŠ å¯†æœºæ— æ³•å–å‡ºã€‚__
* __ç¡¬ä»¶åŠ å¯†æœºä½¿ç”¨å¤–éƒ¨ææ–™ç”ŸæˆåŸºäº Master Key + åŠ å¯†ææ–™çš„å¯†æ–‡ã€‚__

### åŠ è§£å¯†

* __åŠ å¯†æ“ä½œéœ€æä¾› Key IDã€‚__
* __åŠ å¯†æ“ä½œæœ€å¤šåªèƒ½åŠ å¯† 4KB æ•°æ®ã€‚__
* __è§£å¯†æ“ä½œæ— éœ€æä¾› Key IDã€‚__ å¯†æ–‡ä¸­å·²ç»åŒ…å« Key IDã€‚
* __ä½¿ç”¨ `GenerateDataKey` å‘½ä»¤æ¥è¿”å›éšæœºæ˜æ–‡ Key + å¯†æ–‡ Keyã€‚__ æ˜æ–‡ Key ç”¨æ¥åŠ å¯†æ•°æ®ï¼Œå¯†æ–‡ Key å’Œæ•°æ®å­˜ä¸€èµ·ï¼Œå–å‡ºæ•°æ®æ—¶å…ˆè§£å¯† Keyï¼Œç„¶åè§£å¯†æ•°æ®ã€‚
* __ä½¿ç”¨ `GenerateDataKeyWithoutPlainText` å‘½ä»¤åªè¿”å›éšæœºå¯†æ–‡ Keyã€‚__ é€‚ç”¨äºéœ€è¦å»¶è¿Ÿä¸€æ®µæ—¶é—´å†åŠ å¯†çš„æƒ…å†µï¼Œå±Šæ—¶éœ€å…ˆè§£å¯† Keyï¼Œç„¶åå†ç”¨æ¥åŠ å¯†ã€‚
  * ä¹Ÿå¯ç”¨äºæƒé™éš”ç¦»ï¼Œæ¯”å¦‚ A ç»„ä»¶è´Ÿè´£å­˜æ”¾å¯¹åº”çš„å¯†æ–‡ Keyï¼ŒB ç»„ä»¶è´Ÿè´£è§£å¯† Key ç”¨æ¥åŠ å¯†æ•°æ®ã€‚å³ A ç»„ä»¶æ— éœ€çŸ¥é“å¯†æ–‡ Keyã€‚

### ä¿¡å°åŠ å¯†

* __KMS åªæ”¯æŒ 4KB æ•°æ®åŠ å¯†ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥åŠ å¯†å¤§é‡æ•°æ®ã€‚__ é€šå¸¸åŠ å¯†å¤§é‡æ•°æ®ä½¿ç”¨ä¸“é—¨çš„ Data Keyï¼Œç„¶åç”¨ KMS æ¥åŠ å¯† Data Keyã€‚
  * ç›¸å½“äºæŠŠ Data Key æ”¾åˆ°äº†ä¸€ä¸ªå®‰å…¨çš„ä¿¡å°ä¸­ï¼Œæ‰€ä»¥å«ä¿¡å°åŠ å¯†ã€‚
  * ç”±äº KMS çš„ Master Key åœ¨ç¡¬ä»¶åŠ å¯†æœºä¸­æ— æ³•å–å‡ºï¼Œæ‰€ä»¥ç›¸å¯¹å®‰å…¨ã€‚

### CMKï¼ˆCustomer-Managed Keysï¼‰

### Key Rotation

* __å¯å¼€å¯è‡ªåŠ¨è½®æ¢ã€‚__ 
  * __åªä¼šè½®æ¢åŠ å¯†ææ–™ï¼Œä¸ä¼šè½®æ¢ Master Keyã€‚__
  * __åªèƒ½ä»¥å¹´ä¸ºå‘¨æœŸã€‚__

## CLIï¼ˆCommand Line Interfaceï¼‰

_ã€Œå‘½ä»¤è¡Œç•Œé¢ã€‚ã€_

* âœ… __å¯ä½¿ç”¨å†…ç½® Autocompleter æå‡ä½“éªŒã€‚__ å‚è€ƒ [Link](https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-completion.html)ã€‚
  * ğŸˆ² åŸæ¥çš„ AWS-Shell å·¥å…·å·²ç»æ²¡æœ‰åœ¨æ´»è·ƒå¼€å‘ï¼Œä¸”é›†æˆä¸ä¾¿ï¼Œä¸æ¨èä½¿ç”¨ã€‚

### è¸©å‘

* ğŸˆ² __å¦‚æœè‡ªè¡Œ `export AWS_DEFAULT_REGION=xxx` è€Œ `xxx` ä¸å­˜åœ¨ï¼Œåˆ™åç»­æ‰€æœ‰çš„å‘½ä»¤éƒ½å¯èƒ½æŠ¥é”™ã€‚__ é”™è¯¯ä¿¡æ¯ï¼š`botocore.exceptions.ProfileNotFound: The config profile (xxx) could not be found`ã€‚

## Beanstalkï¼ˆElastic Beanstalkï¼‰

_ã€Œæ‰˜ç®¡çš„ PaaSã€‚ã€_

* __å¯ç›´æ¥ä¸Šä¼ ä»£ç å½¢æˆåº”ç”¨ã€‚__ å¯é€‰æ‹©å¤šç§ç¼–ç¨‹è¯­è¨€è¿è¡Œç¯å¢ƒï¼Œä»¥åŠ Web å’Œ Worker ä¸¤ç§æ¨¡æ¿ã€‚
* __æ”¯æŒå¤šç§éƒ¨ç½²æ–¹å¼ã€‚__
  * Canaryã€‚
  * Green-Blueã€‚é€šè¿‡ Swap Environment URL ç›´æ¥æ”¯æŒã€‚
* __ä¼šä½¿ç”¨ S3 æ¡¶æ¥å­˜å‚¨åº”ç”¨é…ç½®ã€‚__ æ¯ä¸ªéƒ¨ç½²åº”ç”¨çš„ Region ä¼šæ”¾ä¸€ä¸ªæ¡¶ã€‚
  * ğŸ’¢ é»˜è®¤ä¸åšå­˜å‚¨åŠ å¯†ï¼Œéœ€è‡ªè¡Œå¼€å¯åŠ å¯†ã€‚
* __ä½¿ç”¨ `.ebextensions` æ–‡ä»¶å¤¹ä¸­çš„ `*.config` æ–‡ä»¶æ¥å®šåˆ¶ç¯å¢ƒã€‚__ æ”¯æŒå¤šç§å®šåˆ¶ï¼Œæ¯”å¦‚å®‰è£…æŸäº›åŒ…ï¼Œåˆ›å»ºç”¨æˆ·ã€ç”¨æˆ·ç»„ç­‰ç­‰ã€‚
  * `commands` ç”¨äºï¼ˆåœ¨éƒ¨ç½²å‰ï¼‰æ‰§è¡Œå‘½ä»¤ã€‚
  * `files` ç”¨äºç”Ÿæˆæ–‡ä»¶ã€‚
  * è¿˜å¯ä»¥[ä¿®æ”¹å„ç§é…ç½®](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/command-options.html#configuration-options-recommendedvalues)ã€‚
* __ä½¿ç”¨ [Saved Configuration](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/environment-configuration-savedconfig.html) å¯ä»¥å°†å½“å‰é…ç½®å­˜ä¸º `.yml` æ–‡ä»¶ã€‚__ å¯ä»¥ç”¨äºåˆ›å»ºå¤šä¸ªç±»ä¼¼çš„ç¯å¢ƒï¼Œæ¯”å¦‚ DEV / PRODã€‚
  * é»˜è®¤å­˜æ”¾åœ¨ Beanstalk åˆ›å»ºçš„ S3 æ¡¶ä¸­ã€‚

### éƒ¨ç½²æ–¹å¼

* __All-at-once = å…¨éƒ¨æœºå™¨åŒæ—¶éƒ¨ç½²ã€‚__ æœåŠ¡ä¼šä¸­æ–­ã€‚
* __Rolling Updates = é€å°æ›´æ–°ã€‚__
* __Rolling with Additional Batch = åˆ›å»º n å°æ–°æœºå™¨æ›´æ–°ã€‚__ å¥åº·æ£€æŸ¥æˆåŠŸåå…³æ‰ n å°æ—§æœºå™¨ï¼Œå¦‚æ­¤å¾€å¤ç›´åˆ°å…¨éƒ¨æ›´æ–°å®Œæ¯•ã€‚
* __Immutable Updates = å¼€ä¸€ä¸ªæ–°çš„ ASG ç„¶åå¼€æ–°æœºå™¨ã€‚__ å…¨éƒ¨å¥åº·æ£€æŸ¥é€šè¿‡åï¼Œæœºå™¨è½¬ç§»åˆ°åŸæ¥çš„ ASGï¼Œåˆ æ‰ç©ºçš„ ASGï¼Œåœæ‰æ—§æœºå™¨ã€‚
* __[Blue/Green Deployment](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/using-features.CNAMESwap.html) = [å…‹éš†æ–°ç¯å¢ƒ](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/using-features.CNAMESwap.html)å¹¶éƒ¨ç½²åˆ°æ–°æœºå™¨ã€‚__ æˆåŠŸååˆ‡æ¢ CNAME åˆ°æ–°çš„ç¯å¢ƒã€‚

### VPC

* ğŸ’¢ __å®ä¾‹éœ€è¦[é€šè¿‡å…¬ç½‘](https://forums.aws.amazon.com/thread.jspa?threadID=164178)ä¸ Beanstalk é€šè®¯ã€‚__
  * å¦‚æœå®ä¾‹åœ¨ Public Subnetï¼Œåˆ™éœ€è¦è®¾ç½® Public IPã€‚
  * å¦‚æœå®ä¾‹åœ¨ Private Subnetï¼Œåˆ™éœ€è¦[è®¾ç½® NAT](https://aws.amazon.com/premiumsupport/knowledge-center/elastic-beanstalk-instance-failure/)ã€‚
* ğŸ’¢ __å®ä¾‹éœ€è¦[æ‰“å¼€ UDP 123](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/vpc.html) ç«¯å£æ¥åŒæ­¥æ—¶é’Ÿã€‚__ å¦åˆ™å¥åº·æ£€æŸ¥ä¼šå¤±æ•ˆã€‚

### ELB

* ğŸ“ __ELB çš„ç±»å‹[åªèƒ½åœ¨åˆ›å»ºç¯å¢ƒæ—¶é€‰æ‹©](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/using-features.managing.elb.html)__ã€‚å¦‚æœè¦ä¿®æ”¹ ELBï¼Œä¸èƒ½é€šè¿‡ä¿®æ”¹ç¯å¢ƒã€å…‹éš†ç¯å¢ƒæ¥è¾¾æˆï¼Œå¿…é¡»æ–°å»ºç¯å¢ƒã€‚
* ğŸ’¢ __Classic Load Balancer ä¹Ÿéœ€è¦ VPCã€‚__ è™½ç„¶ Classic Load Balancer [ä¸å¿…é¡»ä½¿ç”¨ VPC](https://docs.aws.amazon.com/elasticloadbalancing/latest/classic/elb-getting-started.html)ï¼Œä½†æ˜¯åœ¨ Beanstalk ä¸­åˆ›å»º Classic Load Balancer æ—¶éœ€è¦é€‰æ‹© VPC æˆ–è€…åœ¨è¯¥åŒºåŸŸæœ‰é»˜è®¤ VPCï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚

### Docker

* ğŸ“ __Multi Container Docker ç¯å¢ƒåº•å±‚[ä½¿ç”¨äº† ECS](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_docker_ecs.html)ã€‚__
  * é…ç½®æ–¹å¼ä¸ ECS ä¸€è‡´ï¼Œä½¿ç”¨ Task Definitionï¼Œé…ç½®åŒ…å«åœ¨ `Dockerrun.aws.json` æ–‡ä»¶ä¸­ã€‚
  * Single Container Docker å°±æ˜¯æ™®é€š Docker ç¯å¢ƒã€‚å¯ä½¿ç”¨ Dockerfile / `Dockerrun.aws.json` æˆ–è€… Task Definition æ¥é…ç½®ã€‚
  * `Dockerrun.aws.json` åŒ…å« v1ï¼ˆå• Docker ç¯å¢ƒï¼‰å’Œ v2ï¼ˆå¤š Docker ç¯å¢ƒï¼‰[ä¸¤ä¸ªç‰ˆæœ¬](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_docker_ecs.html#create_deploy_docker_ecs_dockerrun)ï¼ŒäºŒè€…å·®å¼‚å¾ˆå¤§ã€‚
* __ä½¿ç”¨ `container_commands` ä¸‹çš„ `leader_only` å¯ä»¥è®©å‘½ä»¤åªåœ¨ä¸€ä¸ªå®ä¾‹ä¸Šè¿è¡Œã€‚__

### Hooks

* ğŸ“ __ä½¿ç”¨ `/opt/elasticbeanstalk/hooks/appdeloy` ç›®å½•å¯ä»¥åœ¨[éƒ¨ç½²å‰åæ‰§è¡Œè„šæœ¬](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/custom-platform-hooks.html)ã€‚__ æ¯”å¦‚ `pre/`ã€`post/` ç­‰ã€‚
  * è¿˜æœ‰ `configdeploy` ç­‰ã€‚

### EB CLI

* __Beanstalk æä¾›ç±»ä¼¼ `git` çš„å·¥å…· `eb`ã€‚__

### `.ebextensions`

* ğŸ“ __æ³¨æ„[ä¼˜å…ˆçº§é—®é¢˜](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/command-options.html#configuration-options-recommendedvalues)ã€‚__
* ğŸ“ å¦‚æœé€šè¿‡ CLI å’Œ Console åˆ›å»ºç¯å¢ƒï¼Œåˆ™ `InstanceType` å‚æ•°[æ— æ³•](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/command-options-general.html)åœ¨ `.ebextensions` ä¸­ä¿®æ”¹ã€‚
  * ??? éœ€è¦éªŒè¯ï¼šæ˜¯ä¸æ˜¯ç”¨ API å°±å¯ä»¥

### è¸©å‘

* __Beanstalk æ˜¯ä¸€ç§éƒ¨ç½² + è¿è¡Œæ—¶æœåŠ¡ã€‚__ ä¸å¯¹æ¥ CodeDeployï¼Œè€Œæ˜¯ç›´æ¥å¯¹æ¥ CodeBuild çš„äº§å‡ºç‰©ã€‚
  * åœ¨ CodePipeline é‡Œé¢ä¹Ÿä»¥éƒ¨ç½²æœåŠ¡çš„å½¢å¼ä¾›é€‰æ‹©ã€‚
* __å®‰å…¨ç»„åœ¨ Beanstalk ä¹‹å¤–è¢«å…³è”å¯èƒ½å¯¼è‡´ç¯å¢ƒæ— æ³•ç»ˆæ­¢ã€‚__
  * Beanstalk ä¼š[ä¸ºå¤–éƒ¨çš„ RDS / ElastiCache ç­‰èµ„æºåˆ›å»ºå®‰å…¨ç»„](https://forums.aws.amazon.com/message.jspa?messageID=591163)ï¼Œè€Œè¿™äº›å®‰å…¨ç»„å¯èƒ½å› ä¸ºæ— æ³•åˆ é™¤è€Œå¯¼è‡´ Beanstalk æ— æ³•é‡å»ºã€ç»ˆæ­¢ç¯å¢ƒã€‚
* __åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå®˜æ–¹å»ºè®®æŠŠæ•°æ®åº“[æ”¾åœ¨ç¯å¢ƒä¹‹å¤–](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/using-features.managing.db.html)ã€‚__ ä»¥é¿å…æ›´æ–°ç¯å¢ƒå’Œåº”ç”¨æ—¶å½±å“æ•°æ®åº“ã€‚
  * ä¹Ÿæ–¹ä¾¿æ‰§è¡Œ Blue/Green éƒ¨ç½²ã€‚


## API Gateway

_ã€Œæ‰˜ç®¡çš„ API ç½‘å…³ã€‚ã€_

* __Edge-Optimized Endpoint å°±æ˜¯ API Gateway + CloudFrontï¼Œä½¿ç”¨å…¨å±€ç»Ÿä¸€çš„åŸŸåã€‚__ Regional Endpoint éœ€è¦ä½ æŒ‰éœ€è‡ªè¡Œé…ç½® CloudFrontã€‚
  * ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºæš‚æ—¶æ²¡æœ‰ Edge-Optimized Endpointã€‚
  * ğŸ’¢ å¦‚ä½¿ç”¨ Edge-Optimized Endpointï¼Œç”±äºä½¿ç”¨äº†å…¨å±€ç»Ÿä¸€åŸŸåå¹¶ä»…è·¯ç”±åˆ°å•ä¸ª Region çš„ API Gatewayï¼Œæ‰€ä»¥æ— æ³•åšåŒæ´»å®¹é”™ã€åŸºäºå»¶è¿Ÿçš„ DNS è·¯ç”±ç­‰ç­‰ã€‚è¦è¾¾åˆ°è¿™ä¸ªæ•ˆæœå¯ä½¿ç”¨å¤šä¸ª Regional Endpointã€‚ï¼ˆè§ [Link](https://aws.amazon.com/blogs/compute/building-a-multi-region-serverless-application-with-amazon-api-gateway-and-aws-lambda/)ï¼‰
* __å¯ä»¥ç›´æ¥è®¾ç½®ä¸º AWS æœåŠ¡ä»£ç†ã€‚__ ç›´æ¥[é›†æˆ AWS æœåŠ¡](https://amazonaws-china.com/blogs/compute/using-amazon-api-gateway-as-a-proxy-for-dynamodb/)ã€‚

### Method & Integration

* __Method Request / Responseã€‚__ Method æ˜¯ä¸å‰ç«¯å¯¹æ¥çš„éƒ¨åˆ†ï¼Œæ¯”å¦‚ `GET` / `POST`ã€‚

### API é…ç½®

* ğŸ’¢ __API è®¾ç½®å¥½ä¹‹åéœ€è¦éƒ¨ç½²æ‰èƒ½ä½¿ç”¨ã€‚__ æ—§ç‰ˆ API å¯ä»¥å’Œæ–°ç‰ˆå¹¶å­˜ã€‚
* __API éƒ¨ç½²åä¼šåœ¨ URI ååŠ å…¥éƒ¨ç½²çš„ Stage åä½œä¸ºè·¯å¾„ã€‚__ å¯ä»¥é€šè¿‡è‡ªå®šä¹‰åŸŸåæ¥é¿å…ã€‚
* __åŸæ¥ä¸æ”¯æŒæŠŠåå°æœåŠ¡æ”¾åˆ°ç§æœ‰å­ç½‘ä¸­ã€‚__ ç°åœ¨å¯ä»¥é€šè¿‡ PrivateLink ä»¥åŠ NLB æ¥æ”¯æŒã€‚
* __ä½¿ç”¨ä»£ç†æ¨¡å¼æ—¶å¯ä½¿ç”¨ `{proxy+}` ä½œä¸ºè·¯å¾„å‚æ•°ã€‚__ è¿™æ˜¯ä¸€ä¸ªè´ªå©ªå¼å‚æ•°ï¼Œä¼šå°½é‡å¤šåœ°åŒ¹é…æ‰€æœ‰è·¯å¾„ä¸Šçš„å­—ç¬¦ï¼Œå¹¶å­˜å…¥ `{proxy}` è¿™ä¸ªå‚æ•°ä¸­ã€‚
  * åœ¨ Console ä¸­ä½¿ç”¨ `{proxy+}` ä¼šè‡ªåŠ¨åˆ›å»º `ANY` æ–¹æ³•å¹¶åªèƒ½é€‰æ‹©ä»£ç†æ¨¡å¼ï¼Œå¯åˆ é™¤ `ANY` æ–¹æ³•å¹¶è‡ªè¡Œåˆ›å»ºéœ€è¦çš„æ–¹æ³•ã€‚
  * `{proxy+}` å’Œä»£ç†æ¨¡å¼å®é™…ä¸Šæ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„åŠŸèƒ½ã€‚
  * `{proxy+}` ä¸­çš„ `proxy` å¯ä»¥æ”¹æˆå…¶ä»–åå­—ï¼Œä½†å»ºè®®ä¿ç•™ `proxy` ä»¥ä¾¿è¯†åˆ«ã€‚
* __ä¸èƒ½ä½¿ç”¨ `/res/{proxy+}` çš„å½¢å¼ã€‚__ å› ä¸ºèµ„æºè·¯å¾„åªå…è®¸çº¯å‚æ•°æˆ–è€…çº¯é™æ€ï¼Œä¸å…è®¸æ··æ‚äºŒè€…ã€‚
  * å¯å…ˆåˆ›å»º `/res` ç„¶ååœ¨å…¶ä¹‹ä¸‹åˆ›å»º `/{proxy+}`ã€‚

### Model

* __ç”¨äºæŒ‡ç¤º Request å’Œ Response çš„æ ¼å¼ã€‚__

### Mapping Template

* __ç”¨äºè½¬æ¢ Request / Responseã€‚__ æ¯”å¦‚ä¸ºæ–°ç‰ˆ API æä¾›å‘åå…¼å®¹ã€‚ 

### Lambda

* __Lambda Proxy æ‰“å¼€ä¹‹åè·¯å¾„å’Œè¯·æ±‚ä¸­çš„å‚æ•°å¯ä»¥ä» `event` ä¸­è¯»å–ã€‚__ åˆ†åˆ«æ˜¯ `event.pathParameters` å’Œ `event.queryStringParameters`ã€‚
* __Console ä¸­çš„è®¾ç½®å˜æ›´æœ‰è¯¸å¤š bugã€‚__ å»ºè®®æ›´æ”¹ Proxy å’Œ Execution Role ç­‰è®¾ç½®çš„æ—¶å€™é‡‡å–åˆ é™¤ Method é‡å»ºçš„æ–¹å¼ã€‚
* __ä½¿ç”¨ Lambda Proxy é›†æˆçš„ API åœ¨è¿”å›å€¼ä¸ç¬¦åˆæ ¼å¼è¦æ±‚æ—¶ä¼šäº§ç”Ÿ `502 Bad Gateway` é”™è¯¯ã€‚__ è§ [Link](https://forums.aws.amazon.com/thread.jspa?threadID=246541)ã€‚
  * âœ… è¯·ä»”ç»†æ£€æŸ¥ `status` å’Œ `body`ï¼Œå°¤å…¶æ˜¯ `body` æ˜¯å¦å·²ç» `JSON.stringify()`ã€‚
* __é»˜è®¤çš„è¶…æ—¶åªæœ‰ 3sã€‚__ å‡½æ•°åœ¨åˆæ¬¡æ‰§è¡Œæ—¶å¯èƒ½ä¼šè¶…æ—¶ã€‚
  * åœ¨åç»­å†æ‰§è¡Œå‡½æ•°æ—¶ä¼šæ•ˆç‡ä¼šé€æ­¥æé«˜åˆ°æœ€ä¼˜ï¼Œæ‰€ä»¥ä¸ºäº†é¿å…æ€§èƒ½æŸè€—ï¼Œä¼šåš [Pre-warming](https://forums.aws.amazon.com/thread.jspa?threadID=232882)ã€‚
* __Console ä¸­çš„ã€ŒTestã€åŠŸèƒ½å¶å°”ä¼šä½¿ç”¨æ—§ä»£ç ã€‚__ ä¿®æ”¹å‡½æ•°å¹¶ä¿å­˜åï¼Œç‚¹å‡»ã€ŒTestã€ï¼Œæ—¥å¿—ç°å®ä»ç„¶æµ‹è¯•çš„æ˜¯æ—§å‡½æ•°ã€‚

### Stage

* __Stage ç”¨äºåŒºåˆ†åŒä¸€å¥— API çš„ä¸åŒä¸Šä¸‹æ–‡ç¯å¢ƒã€‚__ æ¯”å¦‚ DEV / PRODã€‚
* __Stage åå­—ä¼šå‡ºç°åœ¨ URI ä¸­ã€‚__ æ¯”å¦‚ `https://1x2x3x4x.execute-api.cn-northwest-1.amazonaws.com.cn/dev` ä¸­çš„ `dev`ã€‚
* __å¯ä½¿ç”¨ Stage Variable æ¥å­˜å‚¨å˜é‡ã€‚__ å¯ä»¥åœ¨ URI ä¸­ä½¿ç”¨è¿™äº›å˜é‡ï¼Œä»¥ä¾¿æ ¹æ® Stage æ¥åšä¸€äº›ç®€å•çš„å®šåˆ¶ã€‚

#### Canary Release

* __åœ¨ Stage ä¸Šå¯ä»¥å¼€å¯ Canary Releaseã€‚__ 
  * å¼€å¯åéƒ¨ç½²ä¼šå…ˆåˆ° Canary Releaseã€‚
  * å¯è®¾å®šå›ºå®šç™¾åˆ†æ¯”çš„æµé‡æŒ‡å‘ Canary Releaseã€‚
  * éœ€æ‰‹åŠ¨ Promote Canary Release æ‰èƒ½çœŸæ­£éƒ¨ç½²åˆ° Stageã€‚

### é”™è¯¯ä»£ç 

* __`429 Too Many Requests` ç”¨æˆ·è¯·æ±‚æ•°é‡è¶…è¿‡äº†é™é¢ã€‚__ é»˜è®¤æ¯ç§’ 10000 æ¬¡è°ƒç”¨ã€‚

### å¹¶å‘é™åˆ¶

* ğŸ’¢ __å•ä¸ª Method çš„å¹¶å‘é™åˆ¶[é»˜è®¤ç­‰äºè´¦å·åŒºåŸŸå¹¶å‘é™åˆ¶](https://theburningmonk.com/2019/10/the-api-gateway-security-flaw-you-need-to-pay-attention-to/?ck_subscriber_id=527212891)ã€‚__ æ„å‘³ç€å¯¹ä¸€ä¸ª Method è¿›è¡Œæ”»å‡»ï¼Œå°±èƒ½æŠŠå•ä¸ªè´¦å·ä¸‹æ‰€æœ‰ API çš„é™é¢ç”¨å®Œã€‚

### è¸©å‘

* __è·¯å¾„ä¿¡æ¯ä¸ä¼šè‡ªåŠ¨æ·»åŠ åˆ° Endpoint ä¸Šã€‚__ å¿…é¡»æ‰‹åŠ¨åœ¨ Endpoint ä¸Šæ·»åŠ é™æ€è·¯å¾„ï¼Œæˆ–è€…ç”¨è·¯å¾„å‚æ•°æ•æ‰åå†æ·»åŠ åŠ¨æ€è·¯å¾„ã€‚
  * å³ä¾¿ä½¿ç”¨ä»£ç†æ¨¡å¼ä¹Ÿä¸ä¼šè‡ªåŠ¨æ·»åŠ ã€‚
* __æµ‹è¯• `POST` æ–¹æ³•æ—¶å°†é»˜è®¤ä½¿ç”¨ `application/json` æ ¼å¼ã€‚__ ä¸æ˜¯ Web å¸¸è§çš„ `application/x-www-form-urlencoded` æ ¼å¼ã€‚
  * å¯åœ¨ Method Execution ç•Œé¢æ‰‹åŠ¨æ·»åŠ  `Content-Type: application/x-www-form-urlencoded` çš„ header æ¥è¦†ç›–ã€‚


## SQSï¼ˆSimple Queue Serviceï¼‰

_ã€Œæ‰˜ç®¡çš„æç®€æ¶ˆæ¯é˜Ÿåˆ—ã€‚ã€_

> [æ‰‹å†Œ](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/welcome.html) | [FAQ](https://amazonaws-china.com/sqs/faqs/)

* __æœ€æ—©çš„ AWS æœåŠ¡ä¹‹ä¸€ã€‚__ 2004 å¹´å³[å­˜åœ¨](http://jeff-barr.com/2014/08/19/my-first-12-years-at-amazon-dot-com/)ä½†æœªç”¨äºç”Ÿäº§ï¼Œ2006 å¹´ 6 æœˆ 13 æ—¥[ä¸Šçº¿](https://amazonaws-china.com/blogs/aws/amazon_simple_q/)ã€‚
* ğŸ’¢ __æ¶ˆæ¯å¤„ç†å®Œåä¸ä¼šè‡ªåŠ¨åˆ é™¤ã€‚__ å¿…é¡»æ‰‹åŠ¨åˆ é™¤ã€‚
  * __è®¾ç½®é˜Ÿåˆ—çš„ VisibilityTimeout å¯ä»¥ç¡®ä¿åœ¨åˆæ¬¡è¿”å›æ¶ˆæ¯ä¹‹åä¸€æ®µæ—¶é—´å†…è¯¥æ¶ˆæ¯ä¸ä¼šå†è¢«è¿”å›ï¼Œé¿å…è¢«ä¸åŒå®¢æˆ·ç«¯é‡å¤å¤„ç†ã€‚__ é»˜è®¤ 30 ç§’ï¼Œæœ€çŸ­ 0 ç§’ï¼Œæœ€é•¿ 12 å°æ—¶ã€‚
* ğŸ“ __è®¾ç½®å¯¹åˆ—çš„ DelaySeconds å‚æ•°ï¼Œå¯ä»¥[è®©æ¶ˆæ¯å»¶è¿Ÿè¿”å›](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-delay-queues.html)ã€‚__ é»˜è®¤ 0 ç§’ï¼Œæœ€é•¿ 15 åˆ†é’Ÿã€‚
  * ä¹Ÿå¯åœ¨å•æ¡æ¶ˆæ¯ä¸Šè®¾ç½® message timer å‚æ•°æ¥è¦†ç›– DelaySeconds å‚æ•°ã€‚

### [Short / Long Polling](https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-short-and-long-polling.html#sqs-long-polling)

* __ä½¿ç”¨ `ReceiveMessage` æ¥è·å–æ¶ˆæ¯ã€‚__ æœ‰ Short å’Œ Long ä¸¤ç§è½®è¯¢æ¨¡å¼ã€‚
* __é»˜è®¤ä½¿ç”¨ Short Polling æ¨¡å¼ã€‚__ åœ¨ SQS é›†ç¾¤ä¸Šéšæœºå–æ ·å¹¶è¿”å›æ¶ˆæ¯ã€‚
  * ğŸ’¢ __å¯èƒ½æ— æ³•ä¸€æ¬¡å–å›å®Œæ•´çš„å¾…å¤„ç†æ¶ˆæ¯ã€‚__ éœ€è¦å¤šæ¬¡è°ƒç”¨æ‰èƒ½å–åˆ°å®Œæ•´æ¶ˆæ¯ã€‚
* __å¯åœ¨ä½¿ç”¨ `ReceiveMessage` æ—¶è®¾ç½® `WaitTimeSeconds > 0` åˆ™ä½¿ç”¨ Long Polling æ¨¡å¼ã€‚__ å¯ä»¥é¿å…åå¤è½®è¯¢åˆå–ä¸å®Œæ•°æ®é€ æˆçš„æµªè´¹ã€‚
  * __ä¸€æ—¦æœ‰æ–°çš„ä¿¡æ¯ä¼šç«‹åˆ»è¿”å›ã€‚__

### FIFO Queue

## Data Pipeline

* __ä¼ è¾“çš„æºå’Œç›®æ ‡ç§°ä½œã€ŒData Nodeã€ã€‚__

## System Manager

_ã€Œç³»ç»Ÿç®¡ç†å·¥å…·é›†ã€‚ã€_

### Parameter Store

* __å®‰å…¨åœ°å­˜å‚¨å¯†ç ç­‰æœºå¯†ä¿¡æ¯ã€‚__ å…è´¹å­˜å‚¨ 10000 æ¡ï¼Œæ— é¢å¤–è´¹ç”¨ã€‚

### SSM Agentï¼ˆSystem Manager Agentï¼‰

* ğŸ“ __å¯ä»¥å®‰è£…åœ¨ EC2 æˆ–äº‘ä¸‹çš„æœºå™¨ä¸Šï¼Œè®© System Manager å¯ä»¥ç»Ÿä¸€ç®¡ç†ã€‚__ ä¹Ÿ[æ”¯æŒ Raspberry Pi](https://amazonaws-china.com/blogs/mt/manage-raspberry-pi-devices-using-aws-systems-manager/) çš„ Raspian OSã€‚

## Secret Manager

_ã€Œç§˜å¯†ç®¡ç†å·¥å…·ã€‚ã€_

* __å®‰å…¨å­˜å‚¨æ•°æ®åº“å¯†ç ç­‰ç§˜å¯†ä¿¡æ¯ã€‚__
* __å¯è‡ªåŠ¨è½®æ¢å¯†ç ã€‚__ ä¸ RDS è‡ªåŠ¨é›†æˆã€‚
* ğŸ‡¨ğŸ‡³ __ä¸­å›½åŒºæš‚æ—¶æ²¡æœ‰ã€‚__

## Glue

_ã€Œæ•°æ®å½’æ‹¢å·¥å…·ã€‚ã€_

* __ä½¿ç”¨çˆ¬è™«è·å–å†…éƒ¨æ•°æ®å¹¶å‘å¸ƒåˆ° Glue Data Catalogã€‚__


## X-Ray

_ã€Œæ‰˜ç®¡çš„åˆ†å¸ƒå¼è¿½è¸ªç³»ç»Ÿã€‚ã€_

* __Interceptorsã€‚__

## AWS SDK

_ã€Œç”¨ç¼–ç¨‹æ–¹å¼æ¥è°ƒç”¨ AWS æœåŠ¡æ¥å£ã€‚ã€_

### JavaScript

* ğŸ’¢ __å‡ ä¹æ‰€æœ‰æœåŠ¡æ¥å£è°ƒç”¨å‡ä¸ºå¼‚æ­¥ï¼Œè¿”å› `AWS.Request` å¯¹è±¡ã€‚__
  * âœ… å¯ä½¿ç”¨ `AWS.Request.promise()` å‡½æ•°å°†å…¶è½¬æ¢æˆ `Promise` ç„¶åä½¿ç”¨ `await` ä¿®é¥°ç¬¦æ¥è½¬åŒ–æˆåŒæ­¥è°ƒç”¨ã€‚æ³¨æ„ `await` ä»…èƒ½åœ¨å¸¦ `async` ä¿®é¥°ç¬¦çš„å‡½æ•°ä¸­ä½¿ç”¨ã€‚

## CodeBuild

* __æ”¯æŒã€ŒBuild å‘½ä»¤ã€ã€ã€Œé¡¹ç›®é…ç½®ã€ã€ã€Œ`buildspec.yml`ã€ä¸‰ä¸ªåœ°æ–¹è®¾ç½®ç¯å¢ƒå˜é‡ã€‚__ [ä¼˜å…ˆé¡ºåº](https://docs.aws.amazon.com/codebuild/latest/userguide/build-spec-ref.html)ï¼šBuild å‘½ä»¤ > é¡¹ç›®é…ç½® > `buildspec.yml`ã€‚
  * ğŸ“ __æ„å»ºå‚æ•°çš„é•¿åº¦æœ‰é™åˆ¶ã€‚__ æ¨èä½¿ç”¨ System Manager Parameter Store æ‰å­˜å‚¨ï¼Œå¯ä»¥åœ¨ `buildspec.yml` ä¸­[ç›´æ¥å¼•ç”¨](https://docs.aws.amazon.com/codebuild/latest/userguide/build-env-ref-env-vars.html)ã€‚
* ğŸ’¢ __é»˜è®¤ä¸æ”¯æŒ VPC å†…çš„èµ„æºï¼Œéœ€è¦é¢å¤–çš„é…ç½®ã€‚__ è§ [Link](https://docs.aws.amazon.com/codebuild/latest/userguide/vpc-support.html)ã€‚

## CodeDeploy

* __æœ‰ä¸åŒ[éƒ¨ç½²æ–¹å¼](https://docs.aws.amazon.com/codedeploy/latest/userguide/deployment-configurations.html#deployment-configuration-lambda)ã€‚__

### Application

* __æ”¯æŒ EC2 / On-Premiseã€ECSã€Lambda ä¸‰ç§è®¡ç®—å¹³å°ã€‚__

### Deployment Group

* __å¯¹äº EC2 éƒ¨ç½²ï¼ŒDeployment Group æ˜¯ç›®æ ‡å®ä¾‹ç»„ã€‚__
* __å¯¹äº Lambda éƒ¨ç½²ï¼ŒDeployment Group å®é™…ä¸Šæ˜¯éƒ¨ç½²çš„é…ç½®ã€‚__ ä¸æ˜¯ç›®æ ‡å‡½æ•°ç»„ã€‚
  * ç›®æ ‡å‡½æ•°åœ¨ `AppSpec` æ–‡ä»¶ä¸­å®šä¹‰ã€‚

### `AppSpec`

* __éƒ¨ç½²é…ç½®æ–‡ä»¶ã€‚__ [å®šä¹‰](https://docs.aws.amazon.com/codedeploy/latest/userguide/reference-appspec-file-example.html#appspec-file-example-lambda)å„ç§ Hookã€å‘½ä»¤ã€Task Definitionã€‚

### EC2 / On-Premise éƒ¨ç½²æ–¹å¼

* __AllAtOnceã€‚__
* __HalfAtATimeã€‚__
* __OneAtATimeã€‚__

### ECS éƒ¨ç½²æ–¹å¼

* __AllAtOnceã€‚__

### Lambda éƒ¨ç½²æ–¹å¼

* __AllAtOnceã€‚__
* __Canaryã€‚__
* __Linearã€‚__

### Trigger

* __åœ¨éƒ¨ç½²è¿‡ç¨‹çš„å„ä¸ªèŠ‚ç‚¹å¯ä»¥å‘é€æ¶ˆæ¯åˆ° SNS Topicã€‚__

### CodeDeploy Agent

* ğŸ’¢ __å¿…é¡»å®‰è£… Agent æ‰èƒ½éƒ¨ç½²ã€‚__
* __ä»»ä½•å¯ä»¥å®‰è£… Agent çš„æœºå™¨éƒ½èƒ½éƒ¨ç½²ã€‚__ AWS ä¹‹å¤–çš„æœºå™¨ä¹Ÿå¯ä»¥ã€‚

### On-Premise éƒ¨ç½²

* ğŸ“ __ä» On-Premise æœºå™¨è°ƒç”¨ CodeDeploy æ—¶ï¼Œä¸ºç¡®ä¿å®‰å…¨ï¼Œéœ€è¦ä¸æ–­é€šè¿‡ `AssumeRole` æ¥[æ›´æ–°ä¸´æ—¶å®‰å…¨å‡­è¯](https://docs.aws.amazon.com/codedeploy/latest/userguide/register-on-premises-instance-iam-session-arn.html)ã€‚__
  * Role å°†éœ€è¦åŒ…å« `AWSCodeDeployFullAccess` æƒé™ï¼Œæ‰èƒ½æ·»åŠ å®ä¾‹åˆ° Deployment Groupã€‚
  * Agent å°†éœ€è¦åŒä¸Šæƒé™ï¼Œæ‰èƒ½è°ƒç”¨ CodeDeploy API æ¥[è½®è¯¢æ–°çš„éƒ¨ç½²å¹¶æ‰§è¡Œ](https://docs.aws.amazon.com/codedeploy/latest/userguide/instances-on-premises-prerequisites.html)ã€‚
* ğŸ“ __å¯¹ On-Premise çš„æœºå™¨å¿…é¡»ä½¿ç”¨ Tagã€‚__ å› ä¸ºå®ƒä»¬æ²¡æœ‰ Instance IDã€‚

### è¸©å‘

* ğŸ’¢ __é»˜è®¤çš„å›æ»šæ–¹å¼æ˜¯é‡æ–°éƒ¨ç½²ã€‚__ å¯¹äºè“ç»¿éƒ¨ç½²æ¥è¯´ï¼Œå¯ä»¥æ‰‹åŠ¨åšç¯å¢ƒ URL åˆ‡æ¢ã€‚
* ğŸ’¢ __å¿…é¡»å®‰è£… Agentã€‚__ å¦åˆ™æ— æ³•éƒ¨ç½²ã€‚
* ğŸ’¢ __EC2 çš„æƒé™é”™è¯¯ä¼šå¯¼è‡´éƒ¨ç½²æ­¥éª¤å…¨éƒ¨è¢«ã€Œè·³è¿‡ã€ã€‚__ å¦‚æœä½ å‘ç°æ‰€æœ‰éƒ¨ç½²æ­¥éª¤éƒ½è¢« Skip æ‰ï¼Œå¯å…ˆæ£€æŸ¥ EC2 æ˜¯å¦æœ‰è¶³å¤Ÿæƒé™è®¿é—® S3 æ¡¶ã€‚
  * å¯åœ¨ EC2 å®ä¾‹ä¸ŠæŸ¥çœ‹æ—¥å¿—ï¼Œä½ç½®æ˜¯ `/var/log/aws/codedeploy-agent/codedeploy-agent.log`ã€‚

## Organizations

* ğŸ’¢ __è¢«å…³è”çš„è´¦å·æ— æ³•ä¸‹è½½è¯¦ç»†çš„è´¦å•æŠ¥è¡¨ã€‚__

## STSï¼ˆSimple Token Serviceï¼‰

_ã€Œç™»å½•ä»¤ç‰Œå‘æ”¾æœåŠ¡ã€‚ã€_

### `AssumeRole`

* __è¿”å› AK/SK ä»¥åŠ Session Tokenã€‚__ è°ƒç”¨ API æ—¶éœ€è¦åŒæ—¶æä¾›ã€‚

### `AssumeRoleWithWebIdentity`

* __å…ˆç™»å½• Facebook å¹¶æ‹¿åˆ° OAuth 2 ä»¤ç‰Œï¼Œç„¶åç”¨ä»¤ç‰Œæ¥è°ƒç”¨ `AssumeRoleWithWebIdentity`ã€‚__

### `DecodeAuthorizationMessage`

* __ç”¨æˆ·æ‰§è¡Œæœªæˆæƒæ“ä½œæ—¶ï¼ŒAWS æœåŠ¡ä¼šè¿”å› `403 Unauthorized` å¹¶é™„åŠ ä¸€æ¡åŠ å¯†çš„ä¿¡æ¯ã€‚__ è¿™æ¡ä¿¡æ¯å¯ä»¥ç”¨ `DecodeAuthorizationMessage` æ¥è§£å¯†ã€‚

## CloudFront

_ã€ŒCDN æœåŠ¡ã€‚ã€_

> [ä»·æ ¼](https://www.amazonaws.cn/en/cloudfront/pricing/)

* __å…è´¹æ”¯æŒ Server Name Indicationï¼ˆSNIï¼‰ã€‚__ å¦‚æœ[ä½¿ç”¨ä¸“å± IP çš„ SSL è¯ä¹¦](https://docs.amazonaws.cn/en_us/AmazonCloudFront/latest/DeveloperGuide/cnames-https-dedicated-ip-or-sni.html)ï¼ˆDedicated IP SSL Certificateï¼‰ï¼Œä¼šäº§ç”Ÿè´¹ç”¨ã€‚

### é™åˆ¶

* __å• Distribution æ•°æ®ååï¼š40 Gbpsã€‚__ è½¯é™åˆ¶å¯æå‡ã€‚
* __å• Distribution è¯·æ±‚å¹¶å‘ï¼š[10 ä¸‡æ¬¡](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/cloudfront-limits.html)ã€‚__ è½¯é™åˆ¶å¯æå‡ã€‚
* __æœ€å¤§æ–‡ä»¶å°ºå¯¸ï¼š20 GBã€‚__ ç¡¬é™åˆ¶ã€‚
* __æ¯ Orgin è¶…æ—¶é™åˆ¶ï¼š4-60 ç§’ã€‚__ è½¯é™åˆ¶å¯æå‡ã€‚

## SNSï¼ˆSimple Notification Serviceï¼‰

_ã€Œæ¶ˆæ¯æ¨é€æœåŠ¡ã€‚ã€_

* __ç³»ç»Ÿæ¨é€æ”¯æŒ Lambdaã€SQSã€EventBridge å’Œ HTTP/S Endpointã€‚__
* __ç”¨æˆ·æ¨é€æ”¯æŒ Mobile Push å’ŒçŸ­ä¿¡ã€‚__

### Topic

* __ç”¨æˆ·å¿…é¡»å…ˆè®¢é˜… Topic æ‰èƒ½æ”¶åˆ°æ¶ˆæ¯ã€‚__ æ¶ˆæ¯ä¼šæ¨é€ç»™æ‰€æœ‰è®¢é˜…è€…ã€‚

### Filter

* __å¯ä»¥ä¸ºæ¯ä¸ªè®¢é˜…è€…æ·»åŠ  Filter æ¥è¿‡æ»¤æ¶ˆæ¯ã€‚__ æ¯”åˆ›å»ºå¤šä¸ª Topic æ›´é«˜æ•ˆã€‚

### Fanout Pattern

* âœ… __ç”¨ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆå¦‚ SQSï¼‰æ¥è§£è€¦å‘å¸ƒè€…å’Œè®¢é˜…è€…ã€‚__ è®¢é˜…è€…è®¢é˜…æ¶ˆæ¯é˜Ÿåˆ—ï¼Œè€Œä¸ç›´æ¥è®¢é˜… Topicã€‚
  * ç‰ºç‰²éƒ¨åˆ†å®æ—¶æ€§ï¼Œæ¢å–å¹¶è¡Œå¤„ç†ã€å¼¹æ€§ä¼¸ç¼©ç­‰å¥½å¤„ã€‚


## Cognito

_ã€Œæ‰˜ç®¡çš„ç¤¾äº¤ã€OIDCã€SAML ç”¨æˆ·èº«ä»½éªŒè¯æœåŠ¡ã€‚ã€_

> [æ‰‹å†Œ](https://docs.aws.amazon.com/cognito/latest/developerguide/what-is-amazon-cognito.html)

* __ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºæš‚æ—¶æ²¡æœ‰ã€‚__
* __æ”¯æŒ MFAã€‚__
* __æ”¯æŒ OIDCã€SAMLã€‚__

### OIDC

### SAML

### Cognito Sync

* ğŸ“ __å¯åœ¨å¤šä¸ªè®¾å¤‡é—´[åŒæ­¥å’Œæ¨é€ç”¨æˆ·ä¿¡æ¯](https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-sync.html)ã€‚__ æ— éœ€è‡ªå»ºåå°ã€‚


## CodePipeline

> [æ‰‹å†Œ](https://docs.aws.amazon.com/codepipeline/latest/userguide/welcome.html)

* __ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºæš‚æ—¶æ²¡æœ‰ã€‚__

### Custom Job Worker

* __åˆ›å»ºè‡ªå®šä¹‰çš„ Stageã€‚__ åˆ°è¯¥ Stage æ—¶ä¼šç”Ÿæˆä¸€ä¸ª Job ç­‰å¾…å¤„ç†ã€‚
* __ä½¿ç”¨ `PollJobs` API æ¥ä¸»åŠ¨è½®è¯¢ã€‚__ å¹¶ç”¨ `AcknowledgeJob` æ¥å‘ŠçŸ¥ Pipeline ä»»åŠ¡å·²ç»è·å–ã€‚
* __ä½¿ç”¨ `PutJobSuccessResult` æ¥å‘ŠçŸ¥ Pipeline æ‰§è¡Œç»“æœã€‚__ æˆ–è€… `PutJobFailedResult`ã€‚
* __å¼‚æ­¥è°ƒç”¨æ—¶å¯åœ¨ `PutJobSuccessResult` ä¸­åŒ…å« Continuation Tokenã€‚__ åˆ™ä¸‹æ¬¡ `PollJobs` æ—¶æ­¤ Job ä¼šå†æ¬¡å‡ºç°å¹¶åŒ…å« Continuation Tokenã€‚
  * æ–¹ä¾¿è¿½è¸ªé•¿æ—¶é—´/å¼‚æ­¥è¿è¡Œçš„ç»“æœã€‚

### Lambda

* __Pipeline å¯ä»¥[ä¸»åŠ¨è°ƒç”¨ Lambda](https://docs.aws.amazon.com/codepipeline/latest/userguide/actions-invoke-lambda-function.html#actions-invoke-lambda-function-add-action)ã€‚__ ç”¨äºæ›´æ–°ç¯å¢ƒç­‰ç­‰ã€‚
  * ä¸ Lambda ä¸åŒï¼ŒCustom Job Worker éœ€è¦è‡ªè¡Œè½®è¯¢ Jobã€‚
* __Lambda æœ‰è‡ªå·±çš„ Stageã€‚__ é€‰æ‹© Action Provider ä¸º Lambda å³å¯ã€‚
* ??? __éœ€è¦å®éªŒï¼šLambda çš„å¼‚æ­¥ä»»åŠ¡ï¼ŒCodePipeline ä¼šå¤šä¹…è°ƒç”¨ä¸€æ¬¡ï¼Ÿ__

## CodeBuild

### Build Phases

* ğŸ“ __æ„å»ºåˆ†ä¸º[ä¸åŒ Phase](https://docs.aws.amazon.com/codebuild/latest/APIReference/API_BuildPhase.html)ã€‚__
  * `SUBMITTED`ï¼Œæ”¶åˆ°æ„å»ºä»»åŠ¡ã€‚
  * `PROVISIONING`ï¼Œç”³è¯·æ„å»ºèµ„æºã€‚å¦‚å¤±è´¥ç›´æ¥è·³åˆ° `COMPLETED`ã€‚
  * `DOWNLOAD_SOURCE`ï¼Œä¸‹è½½æºä»£ç ã€‚å¦‚å¤±è´¥ç›´æ¥è·³åˆ° `FINALIZING`ã€‚
  * `INSTALL`ï¼Œå®‰è£…éœ€è¦çš„åŒ…ã€‚å¦‚å¤±è´¥ç›´æ¥è·³åˆ° `FINALIZING`ã€‚
  * `PRE_BUILD`ï¼Œæ‰§è¡Œæ„å»ºå‰çš„æ“ä½œã€‚å¦‚å¤±è´¥ç›´æ¥è·³åˆ° `FINALIZING`ã€‚
  * `BUILD`ï¼Œæ‰§è¡Œæ„å»ºæ“ä½œã€‚
  * `POST_BUILD`ï¼Œæ‰§è¡Œæ„å»ºåçš„æ“ä½œã€‚
  * `UPLOAD_ARTIFACTS`ï¼Œä¸Šä¼ æ„å»ºå¥½çš„åº”ç”¨ã€‚æ„å»ºå¤±è´¥çš„äº§ç‰©ä¹Ÿä¼šä¸Šä¼ ï¼Œæ–¹ä¾¿ä½ è°ƒè¯•ã€‚
  * `FINALIZING`ï¼Œæ”¶å°¾å·¥ä½œã€‚
  * `COMPLETED`ï¼Œå®Œæˆæ„å»ºã€‚
* __æ„å»ºçš„ Phase è½¬æ¢è§„åˆ™è¯·è§[æ­¤é“¾æ¥](https://docs.aws.amazon.com/codebuild/latest/userguide/view-build-details.html#view-build-details-phases)ã€‚__

## CodeCommit

_ã€Œæ‰˜ç®¡çš„ Git ä»£ç ä»“åº“ã€‚ã€_

* ğŸ‡¨ğŸ‡³ __ä¸­å›½åŒºæš‚æ—¶æ²¡æœ‰ã€‚__


### Git

* ğŸ“ __å¦‚æœéœ€è¦é€šè¿‡ HTTPS æ–¹å¼æ¥ä½¿ç”¨ CodeCommitï¼Œåˆ™[éœ€è¦ç”Ÿæˆ Git èº«ä»½éªŒè¯ä¿¡æ¯](https://docs.aws.amazon.com/codecommit/latest/userguide/setting-up-gc.html#setting-up-gc-iam)ã€‚__
* __å¯è‡ªè¡Œä¸Šä¼  SSH Public Key åˆ° IAM è´¦å·ä¸‹çš„ SSH Key for CodeCommit æ¥å¯ç”¨ Git/SSH æ“ä½œã€‚__
  * ğŸ“ æ„å‘³ç€å¯ä»¥å¤ç”¨å·²æœ‰çš„ SSH Keyã€‚

### Notifications

* __å¯¹æ¥ CloudWatch è¿›è¡Œé€šçŸ¥ã€‚__
* __ä¸»è¦é’ˆå¯¹ Pull Requests å’Œ Comments è¿›è¡Œé€šçŸ¥ã€‚__ åæ¥[å¢åŠ äº†çŠ¶æ€å˜åŒ–çš„é€šçŸ¥](https://aws.amazon.com/about-aws/whats-new/2017/08/aws-codecommit-now-sends-state-changes-to-amazon-cloudwatch-events-saves-user-preferences-and-adds-tag-details-view/)ï¼Œå³å¯ä»¥åœ¨æ–°ä»£ç æäº¤æ—¶è§¦å‘ã€‚
  * ğŸ’¢ æ–°å¢çš„çŠ¶æ€å˜åŒ–é€šçŸ¥å¹¶æ²¡åšè¿› CodeCommit ä¸€ä¾§çš„ Notifications è®¾ç½®ä¸­ï¼Œè€Œéœ€è¦åœ¨ CloudWatch ä¸­é€‰æ‹©ã€‚

### Triggers

* __åœ¨ä»£ç æäº¤ã€åˆ›å»º/åˆ é™¤ Branch æ—¶å‘é€ SNS é€šçŸ¥æˆ–è§¦å‘ Lambdaã€‚__
* ğŸ’¢ __ä¸ Notification çš„åŠŸèƒ½æœ‰é‡åˆã€‚__ ä½†è¾ƒç®€å•ï¼Œä»…æ”¯æŒä¸Šè¿°ä¸‰ç§åœºæ™¯ï¼Œä¸æ”¯æŒ Pull Request ç­‰ã€‚


## CodeStar

_ã€ŒåŸºäº Code* ç³»åˆ—çš„è½¯ä»¶ç ”å‘ç®¡ç†ç¯å¢ƒã€‚ã€_

* ğŸ‡¨ğŸ‡³ __ä¸­å›½åŒºæš‚æ—¶æ²¡æœ‰ã€‚__
* __ç›´æ¥é›†æˆäº† CodePipelineã€CodeCommitã€CodeBuildã€CodeDeploy ç­‰æœåŠ¡ã€‚__
* __æä¾›ä¸­å¿ƒæ§åˆ¶é¢æ¿ã€‚__

### Member Roles

* __å†…ç½®ä¸åŒçš„ Role ç±»å‹ã€‚__ æ¯ä¸ªé¡¹ç›®è®¾ç½®ä¸€ç»„ã€‚
  * Ownerï¼Œå³ç®¡ç†å‘˜ï¼Œå¯ç®¡ç†é¡¹ç›®æˆå‘˜ã€‚
  * Contributorï¼Œå³å¯è¯»å†™å’Œæ‰§è¡Œæ“ä½œçš„äººå‘˜ã€‚
  * Viewerï¼Œå³åªè¯»äººå‘˜ã€‚

## Rekgnition

_ã€Œæ‰˜ç®¡çš„è§†é¢‘å’Œå›¾ç‰‡è¯†åˆ«æœåŠ¡ã€‚ã€_

* __ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºæš‚æ—¶æ²¡æœ‰ã€‚__
* ğŸ’¢ __å°è£…çš„é«˜é˜¶ API å¯èƒ½ä¼šæŠ¥æ„ä¹‰ä¸æ˜çš„é”™è¯¯ã€‚__ 
  * `CompareFaces` ä¼š[æŠ›å‡º `InvalidParameterException`](https://forums.aws.amazon.com/thread.jspa?threadID=261754)ï¼Œä½†å®é™…ä¸Šä»…ä»…æ˜¯å› ä¸ºå›¾ç‰‡ä¸­æ²¡æœ‰åŒ…å«äººè„¸ï¼Œè€Œéå‚æ•°é”™è¯¯ã€‚
  * `DetectLabels` ä¼š[æŠ›å‡º `InvalidParameterException`](https://forums.aws.amazon.com/thread.jspa?threadID=250949)ï¼Œä½†å®é™…ä¸Šæ˜¯å› ä¸ºå›¾ç‰‡å°ºå¯¸å°äº Rekgnition æ”¯æŒçš„æœ€å°å°ºå¯¸ï¼ˆ80px Ã— 80pxï¼‰ã€‚


## Config

_ã€Œæ‰˜ç®¡çš„é…ç½®ç®¡ç†ç›‘æ§æœåŠ¡ã€‚ã€_

* __æ ¹æ® Rule è¯„ä¼°æ¬¡æ•°åŠè®°å½•çš„é…ç½®é¡¹æ•°é‡æ¥æ”¶è´¹ã€‚__

### Rule

* __Change-triggered Ruleã€‚__ åœ¨ Config ç›‘æµ‹åˆ°é…ç½®æ”¹å˜æ—¶è§¦å‘ã€‚
* __Periodic Ruleã€‚__ å®šæ—¶è§¦å‘ã€‚

### Scope

* __Rule åˆ›å»ºåå¿…é¡»è®¾ç½®ç”Ÿæ•ˆèŒƒå›´ã€‚__ Rule ä»…é’ˆå¯¹èŒƒå›´å†…çš„èµ„æºè¿›è¡Œè¯„ä¼°ã€‚

### Aggregated View

* __æ‰€æœ‰åŒºåŸŸçš„æ‰€æœ‰èµ„æºåˆ—è¡¨ã€‚__


## Service Catalog

_ã€Œè‡ªå®šä¹‰ AWS æœåŠ¡åˆ—è¡¨å’Œå…¥å£ã€‚ã€_

* ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºæš‚æ—¶æ²¡æœ‰ã€‚
* __åŸºæœ¬æ¦‚å¿µæ˜¯ Portfolio å’Œ Productã€‚__ å‰è€…æ˜¯åˆ—è¡¨ï¼Œåè€…æ˜¯äº§å“ã€‚


## CloudSearch

* ğŸ‡¨ğŸ‡³ ä¸­å›½åŒºæš‚æ—¶æ²¡æœ‰ã€‚
* __åŸºæœ¬å•ä½æ˜¯ Search Domainã€‚__ åœ¨ Search Domain ä¸‹é…ç½® Indexã€‚

## Step Functions

### è¿è¡Œæ—¶é”™è¯¯

* __[è¿è¡Œæ—¶é”™è¯¯](https://docs.aws.amazon.com/step-functions/latest/dg/concepts-error-handling.html)ç±»å‹ã€‚__
  * çŠ¶æ€æœºå®šä¹‰é”™è¯¯ã€‚
* __å‡ºé”™æ—¶é»˜è®¤è¡Œä¸ºæ˜¯ç»ˆæ­¢æ‰§è¡Œæ•´ä¸ªçŠ¶æ€æœºã€‚__


## OpsWorks

### ä¸‰ç§æœåŠ¡

* __OpsWorks Stacksï¼ŒOpsWorks Chefï¼ŒOpsWorks Puppetã€‚__
  * å…¶ä¸­ Stacks ä¹Ÿæ˜¯ Chefã€‚

### Stack / Layer / App

* __Stack æŒ‡ä¸€ä¸ªå®Œæ•´åº”ç”¨æ‰€éœ€çš„æ‰€æœ‰èµ„æºï¼Œå…¶ä¸­åŒ…å« Layerã€‚__
* __Layer æ˜¯åŒç±»èµ„æºé›†åˆï¼Œæ¯”å¦‚ EC2ã€ECSã€RDSã€‚__ ä¸€ä¸ª Layer ä¹Ÿä»£è¡¨äº†ä¸€ç§èŒèƒ½ï¼Œæ¯”å¦‚éƒ½æ˜¯åš Web æœåŠ¡å™¨çš„ï¼Œéƒ½æ˜¯åšç¼“å­˜çš„ï¼Œç­‰ç­‰ã€‚
  * __æ–°å»ºèµ„æºçš„æ—¶å€™éœ€è¦å½’æ‹¢åˆ° Layer ä¸‹æ‰èƒ½éƒ¨ç½²ã€‚__
* __App æ˜¯åº”ç”¨é…ç½®ä¿¡æ¯ï¼ŒåŒ…å«äº†éƒ¨ç½²çš„æºä»£ç ä½ç½®ã€é…ç½®ç­‰ç­‰ã€‚__ éƒ¨ç½² Stack çš„æ—¶å€™éœ€è¦é€‰æ‹© App æ¥éƒ¨ç½²ã€‚
  * __Recipe å¯ä»¥è¯»å– App ä¸­çš„é…ç½®ä¿¡æ¯ã€‚__
* __è¿™æ ·çš„æ‹†åˆ†æ–¹å¼å¯ä»¥å°†æŸä¸ª App éƒ¨ç½²åˆ°å¤šä¸ªä¸åŒçš„ Stackã€‚__

### Cookbook / Recipe

* __Cookbook [åŒ…å«ä¸€å¥— Attributeã€Templateã€Recipe æ–‡ä»¶](https://docs.aws.amazon.com/opsworks/latest/userguide/workingcookbook-installingcustom-components.html)ã€‚__
  * Attribute æ–‡ä»¶åŒ…å«å¯å¼•ç”¨çš„å˜é‡ã€‚
  * Template æ–‡ä»¶æ˜¯ç”¨æ¥ç”Ÿæˆé…ç½®æ–‡ä»¶çš„æ¨¡æ¿ã€‚
  * Recipe æ–‡ä»¶æ˜¯ Ruby è„šæœ¬æ–‡ä»¶ç”¨äºå®‰è£…åº”ç”¨ã€‚

### OpsWorks Agent

* __å®‰è£…äº† Agent çš„å®ä¾‹ä¼š[æŒç»­ä¸ OpsWorks æœåŠ¡é€šè®¯](https://docs.aws.amazon.com/opsworks/latest/userguide/workinginstances-autohealing.html)ã€‚__ å¦‚æœ 5 åˆ†é’Ÿæ²¡æœ‰é€šè®¯ï¼ŒOpsWorks ä¼šè®¤ä¸ºè¯¥å®ä¾‹å·²ç»å¤±æ•ˆã€‚
* __å¦‚æœ Layer çš„ Auto Healing åŠŸèƒ½å¼€å¯ï¼Œåˆ™ OpsWorks ä¼šè‡ªåŠ¨æ›¿æ¢å¤±æ•ˆçš„å®ä¾‹ã€‚__
  * __Auto Healing é»˜è®¤å¼€å¯ã€‚__ 

### Lifecycle Events

* __Setupã€‚__ å®ä¾‹å¯åŠ¨åè§¦å‘ï¼Œè¿è¡Œ Recipeã€‚
  * è¯¥é˜¶æ®µä¹ŸåŒ…å« Deployã€‚
* __Configureã€‚__ åœ¨æŸä¸ªå®ä¾‹ä¸Šçº¿æˆ–è€…ä¸‹çº¿æ—¶ï¼Œåœ¨æ‰€æœ‰å®ä¾‹ä¸Šéƒ½ä¼šè§¦å‘ã€‚
  * é€‚åˆç”¨äºæ›´æ–°å®ä¾‹é…ç½®ã€‚
  * æ·»åŠ  ELB æ—¶ä¹Ÿä¼šè§¦å‘ã€‚
* __Deployã€‚__ è¿è¡Œéƒ¨ç½² Recipeã€‚
* __Undeployã€‚__
* __Shutdownã€‚__ åœ¨å®ä¾‹ç»ˆæ­¢ä¹‹å‰è¿è¡Œã€‚
* __é‡å¯å®ä¾‹ä¸ä¼šè§¦å‘ä»»ä½• Lifecycle Eventsã€‚__

### Auto Scaling

* __OpsWorks ä»…æ”¯æŒå†…ç½®çš„ Scaling ç­–ç•¥ã€‚__ [ä¸æ”¯æŒ Auto Scaling](https://amazonaws-china.com/opsworks/stacks/faqs/)ã€‚
  * å¯æŒ‰æ—¶é—´å’Œè´Ÿè½½æ¥è‡ªåŠ¨ä¼¸ç¼©ã€‚
  * å› ä¸ºå®ä¾‹çŠ¶æ€ç”± OpsWorks ç®¡ç†ï¼Œæ‰€ä»¥å¤–éƒ¨çš„ä¿®æ”¹æ˜¯ä¸å…è®¸çš„ï¼Œä»è€Œä¸æ”¯æŒ Auto Scalingã€‚

### éƒ¨ç½²æ–¹æ³•

* __åœ¨åˆ›å»ºæ–°çš„å®ä¾‹æ—¶ä¼šè‡ªåŠ¨éƒ¨ç½²ã€‚__
  * å¯èƒ½[ä¼šå¯¼è‡´çº¿ä¸Šç‰ˆæœ¬ä¸ä¸€è‡´](https://docs.aws.amazon.com/opsworks/latest/userguide/best-deploy.html)é—®é¢˜ã€‚
  * âœ… å»ºè®®ä½¿ç”¨ä¸“é—¨çš„ä»“åº“æˆ–åˆ†æ”¯æ¥å­˜å‚¨å·²è·å‡†ä¸Šçº¿çš„ä»£ç ï¼Œå¹¶åªä»è¯¥ä»“åº“æ‹‰ä»£ç ã€‚
* __ä½¿ç”¨ Deploy å‘½ä»¤æ¥[æ­£å¼éƒ¨ç½²](https://docs.aws.amazon.com/opsworks/latest/userguide/workingapps-deploying.html)ã€‚__ 
* __ä½¿ç”¨ Update Custom Cookbook æ¥æ›´æ–° Cookbookã€‚__ æ›´æ–° Cookbook åéœ€[æ‰‹åŠ¨è§¦å‘éƒ¨ç½²](https://docs.aws.amazon.com/opsworks/latest/userguide/workingstacks-commands.html)ã€‚

### éƒ¨ç½²æ¨¡å¼

* __OpsWorks å¯ä»¥åšæ»šåŠ¨éƒ¨ç½²ã€è“ç»¿éƒ¨ç½²ç­‰ï¼Œä½†æ˜¯[éœ€è¦è‡ªå·±æ‰‹åŠ¨æ“ä½œ](https://docs.aws.amazon.com/opsworks/latest/userguide/best-deploy.html)ã€‚__
  * è“ç»¿éƒ¨ç½²éœ€è¦å€ŸåŠ© Route 53 ç­‰ DNS æ¥åˆ‡æ¢ URL å…¥å£ã€‚



